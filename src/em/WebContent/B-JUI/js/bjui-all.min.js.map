{"version":3,"names":[],"mappings":"","sources":["bjui-all.min.js"],"sourcesContent":["+function(t){\"use strict\";var e={JSPATH:\"BJUI/\",PLUGINPATH:\"BJUI/plugins/\",IS_DEBUG:!1,KeyPressed:{ctrl:!1,shift:!1},keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,CTRL:17,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{initUI:\"bjui.initUI\",beforeInitUI:\"bjui.beforeInitUI\",afterInitUI:\"bjui.afterInitUI\",ajaxStatus:\"bjui.ajaxStatus\",resizeGrid:\"bjui.resizeGrid\",beforeAjaxLoad:\"bjui.beforeAjaxLoad\",beforeLoadNavtab:\"bjui.beforeLoadNavtab\",beforeLoadDialog:\"bjui.beforeLoadDialog\",afterLoadNavtab:\"bjui.afterLoadNavtab\",afterLoadDialog:\"bjui.afterLoadDialog\",beforeCloseNavtab:\"bjui.beforeCloseNavtab\",beforeCloseDialog:\"bjui.beforeCloseDialog\",afterCloseNavtab:\"bjui.afterCloseNavtab\",afterCloseDialog:\"bjui.afterCloseDialog\"},pageInfo:{pageCurrent:\"pageCurrent\",pageSize:\"pageSize\",orderField:\"orderField\",orderDirection:\"orderDirection\"},alertMsg:{displayPosition:\"topcenter\",alertTimeout:6e3},ajaxTimeout:3e4,statusCode:{ok:200,error:300,timeout:301},keys:{statusCode:\"statusCode\",message:\"message\"},ui:{windowWidth:0,showSlidebar:!0,clientPaging:!0,overwriteHomeTab:!1},debug:function(t){this.IS_DEBUG&&(\"undefined\"!=typeof console?console.log(t):alert(t))},loginInfo:{url:\"login.html\",title:\"Login\",width:420,height:260,mask:!0},loadLogin:function(){var e=this.loginInfo;t(\"body\").dialog({id:\"bjui-login\",url:e.url,title:e.title,width:e.width,height:e.height,mask:e.mask})},init:function(a){var i=t.extend({},a);t.extend(e.statusCode,i.statusCode),t.extend(e.pageInfo,i.pageInfo),t.extend(e.alertMsg,i.alertMsg),t.extend(e.loginInfo,i.loginInfo),t.extend(e.ui,i.ui),i.JSPATH&&(this.JSPATH=i.JSPATH),i.PLUGINPATH&&(this.PLUGINPATH=i.PLUGINPATH),i.ajaxTimeout&&(this.ajaxTimeout=i.ajaxTimeout),this.IS_DEBUG=i.debug||!1,this.initEnv(),t.cookie&&t.cookie(\"bjui_theme\")||!i.theme||t(this).theme(\"setTheme\",i.theme)},initEnv:function(){t(window).resize(function(){var a=t(this).width();e.ui.windowWidth&&e.ui.windowWidth>600&&e.ui.windowWidth<a&&(a=e.ui.windowWidth),e.initLayout(a),setTimeout(function(){t(this).trigger(e.eventType.resizeGrid)},30)}),setTimeout(function(){var a=t(window).width();e.ui.windowWidth&&e.ui.windowWidth>600&&e.ui.windowWidth<a&&(a=e.ui.windowWidth),e.initLayout(a),t(document).initui()},10)},initLayout:function(a){var i=a-(e.ui.showSlidebar?t(\"#bjui-sidebar\").width()+6:6),n=t(window).height()-t(\"#bjui-header\").height()-t(\"#bjui-footer\").outerHeight(),o=t(\"#bjui-navtab\").find(\".tabsPageHeader\").height();e.ui.windowWidth&&t(\"#bjui-window\").width(a),e.windowWidth=a,t(\"#bjui-container\").height(n),t(\"#bjui-navtab\").width(i),t(\"#bjui-leftside, #bjui-sidebar, #bjui-sidebar-s, #bjui-splitBar, #bjui-splitBarProxy\").css({height:\"100%\"}),t(\"#bjui-navtab .tabsPageContent\").height(n-o),setTimeout(function(){t(\"#bjui-navtab > .tabsPageContent > .navtabPage\").resizePageH(),t(\"#bjui-navtab > .tabsPageContent > .navtabPage\").find(\".bjui-layout\").resizePageH()},10);var s=t(\"body\").data(\"bjui.navbar.width\"),r=t(\"#bjui-header\"),l=r.find(\".bjui-navbar-toggle\"),d=r.find(\".bjui-navbar-logo\"),c=t(\"#bjui-navbar-collapse\"),u=c.find(\".bjui-navbar-right\");s||(s={logoW:d.outerWidth(),navW:u.outerWidth()},t(\"body\").data(\"bjui.navbar.width\",s)),s&&(a-s.logoW<s.navW?(l.show(),c.addClass(\"collapse menu\")):(l.hide(),c.removeClass(\"collapse menu in\")));var h=t(\"#bjui-hnav-navbar-box\"),p=h.find(\"> #bjui-hnav-navbar\"),f=h.prev(),g=h.next(),m=h.width(),b=0;p.find(\"> li\").each(function(e){var a=t(this);b+=a.outerWidth(),b>m?(g.show(),h.data(\"hnav.move\",!0).data(\"hnav.liw\",b)):(f.hide(),g.hide(),h.removeData(\"hnav.move\"))})},regional:{},setRegional:function(t,a){e.regional[t]=a},getRegional:function(t){if(String(t).indexOf(\".\")>=0){for(var a,i=String(t).split(\".\"),n=0;n<i.length;n++)a=a?a[i[n]]:e.regional[i[n]];return a}return e.regional[t]},doRegional:function(e,a){return t.each(a,function(t,a){e=e.replaceAll(\"#\"+t+\"#\",a)}),e}};window.BJUI=e}(jQuery),+function(t){\"use strict\";t(function(){BJUI.setRegional(\"alertmsg\",{title:{error:\"错误提示\",info:\"信息提示\",warn:\"警告信息\",correct:\"成功信息\",confirm:\"确认信息\"},btnMsg:{ok:\"确定\",yes:\"是\",no:\"否\",cancel:\"取消\"}}),BJUI.setRegional(\"dialog\",{close:\"关闭\",maximize:\"最大化\",restore:\"还原\",minimize:\"最小化\",title:\"弹出窗口\"}),BJUI.setRegional(\"orderby\",{asc:\"升序\",desc:\"降序\"}),BJUI.setRegional(\"pagination\",{total:\"总记录数/总页数\",first:\"首页\",last:\"末页\",prev:\"上一页\",next:\"下一页\",jumpto:\"输入跳转页码，回车确认\",jump:\"跳转\",page:\"页\",refresh:\"刷新\"}),BJUI.setRegional(\"datagrid\",{asc:\"升序\",desc:\"降序\",showhide:\"显示/隐藏 列\",filter:\"过滤\",clear:\"清除\",lock:\"锁定列\",unlock:\"解除锁定\",add:\"添加\",edit:\"编辑\",save:\"保存\",update:\"更新\",cancel:\"取消\",del:\"删除\",prev:\"上一条\",next:\"下一条\",refresh:\"刷新\",query:\"查询\",\"import\":\"导入\",\"export\":\"导出\",all:\"全部\",\"true\":\"是\",\"false\":\"否\",selectMsg:\"未选中任何行！\",editMsg:\"请先保存编辑行！\",saveMsg:\"没有需要保存的行！\",delMsg:\"确定要删除该行吗？\",delMsgM:\"确定要删除选中行？\"}),BJUI.setRegional(\"progressmsg\",\"正在努力加载数据，请稍等...\"),BJUI.setRegional(\"datepicker\",{close:\"关闭\",prev:\"上月\",next:\"下月\",clear:\"清空\",ok:\"确定\",dayNames:[\"日\",\"一\",\"二\",\"三\",\"四\",\"五\",\"六\"],monthNames:[\"一月\",\"二月\",\"三月\",\"四月\",\"五月\",\"六月\",\"七月\",\"八月\",\"九月\",\"十月\",\"十一月\",\"十二月\"]}),BJUI.setRegional(\"navtabCM\",{refresh:\"刷新本标签\",close:\"关闭本标签\",closeother:\"关闭其他标签\",closeall:\"关闭所有标签\"}),BJUI.setRegional(\"dialogCM\",{refresh:\"刷新本窗口\",close:\"关闭本窗口\",closeother:\"关闭其他窗口\",closeall:\"关闭所有窗口\"}),BJUI.setRegional(\"upload\",{upConfirm:\"开始上传\",upPause:\"暂停上传\",upCancel:\"取消上传\"}),BJUI.setRegional(\"statusCode_503\",\"服务器当前负载过大或者正在维护！\"),BJUI.setRegional(\"sessiontimeout\",\"会话超时，请重新登陆！\"),BJUI.setRegional(\"plhmsg\",\"占位符对应的选择器无有效值！\"),BJUI.setRegional(\"nocheckgroup\",'未定义选中项的组名[复选框的\"data-group\"]！'),BJUI.setRegional(\"notchecked\",\"未选中任何一项！\"),BJUI.setRegional(\"selectmsg\",\"请选择一个选项！\"),BJUI.setRegional(\"validatemsg\",\"提交的表单中 [{0}] 个字段有错误，请更正后再提交！\"),BJUI.setRegional(\"uititle\",\"B-JUI\"),BJUI.setRegional(\"maintab\",\"我的主页\"),t.validator&&t.validator.config({defaultMsg:\"{0}格式不正确\",loadingMsg:\"正在验证...\",rules:{digits:[/^\\d+$/,\"请输入整数\"],number:[/^[\\-\\+]?((([0-9]{1,3})([,][0-9]{3})*)|([0-9]+))?([\\.]([0-9]+))?$/,\"请输入有效的数字\"],letters:[/^[a-z]+$/i,\"{0}只能输入字母\"],tel:[/^(?:(?:0\\d{2,3}[\\- ]?[1-9]\\d{6,7})|(?:[48]00[\\- ]?[1-9]\\d{6}))$/,\"电话格式不正确\"],mobile:[/^1[3-9]\\d{9}$/,\"手机号格式不正确\"],email:[/^[\\w\\+\\-]+(\\.[\\w\\+\\-]+)*@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.([a-z]{2,4})$/i,\"邮箱格式不正确\"],qq:[/^[1-9]\\d{4,}$/,\"QQ号格式不正确\"],date:[/^\\d{4}[\\/\\-](0?[1-9]|1[012])[\\/\\-](0?[1-9]|[12][0-9]|3[01])$/,\"请输入正确的日期，例：yyyy-MM-dd\"],time:[/^(2[0123]|(1|0?)[0-9]){1}:([0-5][0-9]){1}:([0-5][0-9]){1}$/,\"请输入正确的时间，例：HH:mm:ss\"],datetime:[/^\\d{4}[\\/\\-](0?[1-9]|1[012])[\\/\\-](0?[1-9]|[12][0-9]|3[01])\\s+(2[0123]|(1|0?)[0-9]){1}:([0-5][0-9]){1}:([0-5][0-9]){1}$/,\"请输入正确的日期时间，例：yyyy-MM-dd HH:mm:ss\"],ID_card:[/^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])((\\d{4})|\\d{3}[A-Z])$/,\"请输入正确的身份证号码\"],url:[/^(https?|ftp):\\/\\/[^\\s]+$/i,\"网址格式不正确\"],postcode:[/^[1-9]\\d{5}$/,\"邮政编码格式不正确\"],chinese:[/^[\\u0391-\\uFFE5]+$/,\"请输入中文\"],username:[/^\\w{3,12}$/,\"请输入3-12位数字、字母、下划线\"],password:[/^[0-9a-zA-Z]{6,16}$/,\"密码由6-16位数字、字母组成\"],pattern:function(t,e){if(!e)return!0;var a=t.value.parseDate(e);return a?!0:this.renderMsg(\"错误的日期时间格式！\",e)},accept:function(t,e){if(!e)return!0;var a=e[0];return\"*\"===a||new RegExp(\".(?:\"+(a||\"png|jpg|jpeg|gif\")+\")$\",\"i\").test(t.value)||this.renderMsg(\"只接受{1}后缀\",a.replace(\"|\",\",\"))}}}),t.validator&&t.validator.config({messages:{required:\"{0}不能为空\",remote:\"{0}已被使用\",integer:{\"*\":\"请输入整数\",\"+\":\"请输入正整数\",\"+0\":\"请输入正整数或0\",\"-\":\"请输入负整数\",\"-0\":\"请输入负整数或0\"},match:{eq:\"{0}与{1}不一致\",neq:\"{0}与{1}不能相同\",lt:\"{0}必须小于{1}\",gt:\"{0}必须大于{1}\",lte:\"{0}必须小于或等于{1}\",gte:\"{0}必须大于或等于{1}\"},range:{rg:\"请输入{1}到{2}的数\",gte:\"请输入大于或等于{1}的数\",lte:\"请输入小于或等于{1}的数\"},checked:{eq:\"请选择{1}项\",rg:\"请选择{1}到{2}项\",gte:\"请至少选择{1}项\",lte:\"请最多选择{1}项\"},length:{eq:\"请输入{1}个字符\",rg:\"请输入{1}到{2}个字符\",gte:\"请至少输入{1}个字符\",lte:\"请最多输入{1}个字符\",eq_2:\"\",rg_2:\"\",gte_2:\"\",lte_2:\"\"}}})})}(jQuery),+function(t){\"use strict\";BJUI.setRegional(\"alertmsg\",{title:{error:\"Error\",info:\"Info\",warn:\"Warning\",correct:\"Correct\",confirm:\"Confirm\"},btnMsg:{ok:\"OK\",yes:\"YES\",no:\"NO\",cancel:\"Cancel\"}}),BJUI.setRegional(\"dialog\",{close:\"Close\",maximize:\"Maximize\",restore:\"Restore\",minimize:\"Minimize\",title:\"Popup window\"}),BJUI.setRegional(\"orderby\",{asc:\"Asc\",desc:\"Desc\"}),BJUI.setRegional(\"pagination\",{first:\"First page\",last:\"Last page\",prev:\"Prev page\",next:\"Next page\",jumpto:\"Jump page number\",jump:\"Jump\"}),BJUI.setRegional(\"datagrid\",{asc:\"ASC\",desc:\"DESC\",showhide:\"Show/Hide columns\",filter:\"Filter\",clear:\"Clear\",lock:\"Lock\",unlock:\"Unlock\",add:\"Add\",edit:\"Edit\",save:\"Save\",update:\"Update\",cancel:\"Cancel\",del:\"Delete\",prev:\"Prev\",next:\"Next\",refresh:\"Refresh\",query:\"Query\",\"import\":\"Import\",\"export\":\"Export\",all:\"All\",\"true\":\"True\",\"false\":\"False\",selectMsg:\"Not selected any rows!\",saveMsg:\"No rows need to save!\",editMsg:\"Please save the edited row!\",delMsg:\"Sure you want to delete this row?\",delMsgM:\"Sure you want to delete selected rows?\"}),BJUI.setRegional(\"progressmsg\",\"Data loading, please waiting...\"),BJUI.setRegional(\"datepicker\",{close:\"Close\",prev:\"Prev month\",next:\"Next month\",clear:\"Clear\",ok:\"OK\",dayNames:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],monthNames:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]}),BJUI.setRegional(\"navtabCM\",{refresh:\"Refresh navtab\",close:\"Close navtab\",closeother:\"Close other navtab\",closeall:\"Close all navtab\"}),BJUI.setRegional(\"dialogCM\",{refresh:\"Refresh dialog\",close:\"Close dialog\",closeother:\"Close other dialog\",closeall:\"Close all dialog\"}),BJUI.setRegional(\"upload\",{upConfirm:\"Start upload\",upPause:\"Pause upload\",upCancel:\"Cancel upload\"}),BJUI.setRegional(\"statusCode_503\",\"The current server load is too large or is down for maintenance!\"),BJUI.setRegional(\"sessiontimeout\",\"Session timeout, please login!\"),BJUI.setRegional(\"plhmsg\",\"Placeholder corresponding selector None Valid!\"),BJUI.setRegional(\"nocheckgroup\",'Undefined group name selected item [check box \"data-group\"]!'),BJUI.setRegional(\"notchecked\",\"Unchecked any one!\"),BJUI.setRegional(\"selectmsg\",\"Please select one option!\"),BJUI.setRegional(\"validatemsg\",\"Submitted form data has [{0}] field an error, please after modified submitting!\"),BJUI.setRegional(\"uititle\",\"B-JUI\"),BJUI.setRegional(\"maintab\",\"My home\"),window.FRAG={dialog:'<div class=\"bjui-dialog bjui-dialog-container\" style=\"top:150px; left:300px;\">    <div class=\"dialogHeader\" onselectstart=\"return false;\" oncopy=\"return false;\" onpaste=\"return false;\" oncut=\"return false;\">        <a class=\"close\" href=\"#close\" title=\"#close#\"><i class=\"fa fa-times-circle\"></i></a>        <a class=\"maximize\" href=\"#maximize\" title=\"#maximize#\"><i class=\"fa fa-plus-circle\"></i></a>        <a class=\"restore\" href=\"#restore\" title=\"#restore#\"><i class=\"fa fa-history\"></i></a>        <a class=\"minimize\" href=\"#minimize\" title=\"#minimize#\"><i class=\"fa fa-minus-circle\"></i></a>        <h1><span><i class=\"fa fa-th-large\"></i></span> <span class=\"title\">#title#</span></h1>    </div>    <div class=\"dialogContent unitBox\"></div>    <div class=\"resizable_h_l\" tar=\"nw\"></div>    <div class=\"resizable_h_r\" tar=\"ne\"></div>    <div class=\"resizable_h_c\" tar=\"n\"></div>    <div class=\"resizable_c_l\" tar=\"w\" style=\"height:100%;\"></div>    <div class=\"resizable_c_r\" tar=\"e\" style=\"height:100%;\"></div>    <div class=\"resizable_f_l\" tar=\"sw\"></div>    <div class=\"resizable_f_r\" tar=\"se\"></div>    <div class=\"resizable_f_c\" tar=\"s\"></div></div>',taskbar:'<div id=\"bjui-taskbar\" style=\"left:0px; display:none;\">    <div class=\"taskbarContent\">        <ul></ul>    </div>    <div class=\"taskbarLeft taskbarLeftDisabled\"><i class=\"fa fa-angle-double-left\"></i></div>    <div class=\"taskbarRight\"><i class=\"fa fa-angle-double-right\"></i></div></div>',splitBar:'<div id=\"bjui-splitBar\"></div>',splitBarProxy:'<div id=\"bjui-splitBarProxy\"></div>',resizable:'<div id=\"bjui-resizable\" class=\"bjui-resizable\"></div>',alertBackground:'<div class=\"bjui-alertBackground\"></div>',maskBackground:'<div class=\"bjui-maskBackground bjui-ajax-mask\"></div>',maskProgress:'<div class=\"bjui-maskProgress bjui-ajax-mask\"><i class=\"fa fa-cog fa-spin\"></i>&nbsp;&nbsp;#msg#<div class=\"progressBg\"><div class=\"progress\"></div></div></div>',progressBar_custom:'<div id=\"bjui-progressBar-custom\" class=\"progressBar\"><i class=\"fa fa-cog fa-spin\"></i> <span></span></div>',dialogMask:'<div class=\"bjui-dialogBackground\"></div>',orderby:'<a href=\"javascript:;\" class=\"order asc\" data-order-direction=\"asc\" title=\"#asc#\"><i class=\"fa fa-angle-up\"></i></a><a href=\"javascript:;\" class=\"order desc\" data-order-direction=\"desc\" title=\"#desc#\"><i class=\"fa fa-angle-down\"></i></a>',slidePanel:'<div class=\"panel panel-default\">    <div class=\"panel-heading\">        <h4 class=\"panel-title\"><a data-toggle=\"collapse\" data-parent=\"#bjui-accordionmenu\" href=\"##id#\" class=\"#class#\">#icon#&nbsp;#title#<b>#righticon#</b></a></h4>    </div>    <div id=\"#id#\" class=\"panel-collapse collapse#bodyclass#\">        <div class=\"panel-body\">        </div>    </div></div>',pagination:'<ul class=\"pagination\">    <li class=\"j-first\">        <a class=\"first\" href=\"javascript:;\"><i class=\"fa fa-step-backward\"></i> #first#</a>        <span class=\"first\"><i class=\"fa fa-step-backward\"></i> #first#</span>    </li>    <li class=\"j-prev\">        <a class=\"previous\" href=\"javascript:;\"><i class=\"fa fa-backward\"></i> #prev#</a>        <span class=\"previous\"><i class=\"fa fa-backward\"></i> #prev#</span>    </li>    #pageNumFrag#    <li class=\"j-next\">        <a class=\"next\" href=\"javascript:;\">#next# <i class=\"fa fa-forward\"></i></a>        <span class=\"next\">#next# <i class=\"fa fa-forward\"></i></span>    </li>    <li class=\"j-last\">        <a class=\"last\" href=\"javascript:;\">#last# <i class=\"fa fa-step-forward\"></i></a>        <span class=\"last\">#last# <i class=\"fa fa-step-forward\"></i></span>    </li>    <li class=\"jumpto\"><span class=\"p-input\"><input class=\"form-control input-sm-pages\" type=\"text\" size=\"2.6\" value=\"#pageCurrent#\" title=\"#jumpto#\"></span><a class=\"goto\" href=\"javascript:;\" title=\"#jump#\"><i class=\"fa fa-chevron-right\"></i></a></li></ul>',gridPaging:'<ul class=\"pagination\">    <li class=\"page-total\">        <span title=\"#total#\">#count#</span>    </li>    <li class=\"page-jumpto\"><span class=\"page-input\"><input class=\"form-control input-sm-pages\" type=\"text\" size=\"3.2\" value=\"#pageCurrent#\" title=\"#jumpto#\"></span></li>    <li class=\"page-first btn-nav\">        <a href=\"javascript:;\" title=\"#first#\"><i class=\"fa fa-step-backward\"></i></a>    </li>    <li class=\"page-prev btn-nav\">        <a href=\"javascript:;\" title=\"#prev#\"><i class=\"fa fa-backward\"></i></a>    </li>    <li class=\"page-next btn-nav\">        <a href=\"javascript:;\" title=\"#next#\"><i class=\"fa fa-forward\"></i></a>    </li>    <li class=\"page-last btn-nav\">        <a href=\"javascript:;\" title=\"#last#\"><i class=\"fa fa-step-forward\"></i></a>    </li></ul>',gridPageNum:'<li class=\"page-num#active#\"><a href=\"javascript:;\">#num#</a></li>',gridMenu:'<div class=\"datagrid-menu-box\">    <ul>        <li class=\"datagrid-li-asc\"><a href=\"javascript:;\"><span class=\"icon\"><i class=\"fa fa-sort-amount-asc\"></i></span><span class=\"title\">#asc#</span></a></li>        <li class=\"datagrid-li-desc\"><a href=\"javascript:;\"><span class=\"icon\"><i class=\"fa fa-sort-amount-desc\"></i></span><span class=\"title\">#desc#</span></a></li>        <li class=\"datagrid-li-filter\"><a href=\"javascript:;\"><span class=\"icon\"><i class=\"fa fa-filter\"></i></span><span class=\"title\">#filter#</span><span class=\"arrow\"></span></a></li>        <li class=\"datagrid-li-showhide\"><a href=\"javascript:;\"><span class=\"icon\"><i class=\"fa fa-check-square-o\"></i></span><span class=\"title\">#showhide#</span><span class=\"arrow\"></span></a></li>        <li class=\"datagrid-li-lock\"><a href=\"javascript:;\"><span class=\"icon\"><i class=\"fa fa-lock\"></i></span><span class=\"title\">#lock#</span></a></li>        <li class=\"datagrid-li-unlock disable\"><a href=\"javascript:;\"><span class=\"icon\"><i class=\"fa fa-unlock\"></i></span><span class=\"title\">#unlock#</span></a></li>    </ul></div>',gridFilter:'<div class=\"datagrid-filter-box\"><fieldset><legend>#label#</legend><span class=\"filter-a\"></span><span class=\"filter-and\"><select data-toggle=\"selectpicker\" data-container=\"true\" data-width=\"100%\"><option value=\"and\">AND</option><option value=\"or\">OR</option></select></span><span class=\"filter-b\"></span><span class=\"filter-ok\"><button type=\"button\" class=\"btn-green ok\" data-icon=\"check\">#filter#</button><button type=\"button\" class=\"btn-orange clear\" data-icon=\"remove\">#clear#</button></span></fieldset></div>',gridShowhide:'<li data-index=\"#index#\" class=\"datagrid-col-check\"><a href=\"javascript:;\"><i class=\"fa fa-check-square-o\"></i>#label#</a></li>',gridEditBtn:'<button type=\"button\" class=\"btn-green edit\" data-icon=\"edit\">#edit#</button><button type=\"button\" class=\"btn-green update\" data-icon=\"edit\">#update#</button><button type=\"button\" class=\"btn-green save\" data-icon=\"check\">#save#</button><button type=\"button\" class=\"btn-orange cancel\" data-icon=\"undo\">#cancel#</button><button type=\"button\" class=\"btn-red delete\" data-icon=\"remove\">#del#</button>',gridDialogEditBtns:'<ul>    <li class=\"pull-left\"><button type=\"button\" class=\"btn btn-orange prev\" data-icon=\"arrow-up\">#prev#</button></li>    <li class=\"pull-left\"><button type=\"button\" class=\"btn btn-orange next\" data-icon=\"arrow-down\">#next#</button></li>    <li><button type=\"button\" class=\"btn btn-red cancel\" data-icon=\"remove\">#cancel#</button></li>    <li><button type=\"button\" class=\"btn btn-default save\" data-icon=\"save\">#save#</button></li></ul>',alertBoxFrag:'<div id=\"bjui-alertMsgBox\" class=\"bjui-alert\"><div class=\"alertContent\"><div class=\"#type#\"><div class=\"alertInner\"><h1><i class=\"fa #fa#\"></i>#title#</h1><div class=\"msg\">#message#</div></div><div class=\"toolBar\"><ul>#btnFragment#</ul></div></div></div></div>',alertBtnFrag:'<li><button class=\"btn btn-#class#\" rel=\"#callback#\" type=\"button\">#btnMsg#</button></li>',calendarFrag:'<div id=\"bjui-calendar\">    <div class=\"main\">        <a class=\"close\" href=\"javascript:;\" title=\"#close#\"><i class=\"fa fa-times-circle\"></i></a>        <div class=\"head\">            <table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"2\">                <tr>                    <td width=\"20\"><a class=\"prev\" href=\"javascript:;\" title=\"#prev#\"><i class=\"fa fa-arrow-left\"></i></a></td>                    <td><select name=\"year\"></select></td>                    <td><select name=\"month\"></select></td>                    <td width=\"20\"><a class=\"next\" href=\"javascript:;\" title=\"#next#\"><i class=\"fa fa-arrow-right\"></i></a></td>                </tr>            </table>        </div>        <div class=\"body\">            <dl class=\"dayNames\"><dt>7</dt><dt>1</dt><dt>2</dt><dt>3</dt><dt>4</dt><dt>5</dt><dt>6</dt></dl>            <dl class=\"days\"><!-- date list --></dl>            <div style=\"clear:both;height:0;line-height:0\"></div>        </div>        <div class=\"foot\">            <table class=\"time\">                <tr>                    <td>                        <input type=\"text\" class=\"hh\" maxlength=\"2\" data-type=\"hh\" data-start=\"0\" data-end=\"23\">:<input                         type=\"text\" class=\"mm\" maxlength=\"2\" data-type=\"mm\" data-start=\"0\" data-end=\"59\">:<input                         type=\"text\" class=\"ss\" maxlength=\"2\" data-type=\"ss\" data-start=\"0\" data-end=\"59\">                    </td>                    <td><ul><li class=\"up\" data-add=\"1\">&and;</li><li class=\"down\">&or;</li></ul></td>                </tr>            </table>            <button type=\"button\" class=\"clearBtn btn btn-orange\">#clear#</button>            <button type=\"button\" class=\"okBtn btn btn-default\">#ok#</button>        </div>        <div class=\"tm\">            <ul class=\"hh\">                <li>0</li>                <li>1</li>                <li>2</li>                <li>3</li>                <li>4</li>                <li>5</li>                <li>6</li>                <li>7</li>                <li>8</li>                <li>9</li>                <li>10</li>                <li>11</li>                <li>12</li>                <li>13</li>                <li>14</li>                <li>15</li>                <li>16</li>                <li>17</li>                <li>18</li>                <li>19</li>                <li>20</li>                <li>21</li>                <li>22</li>                <li>23</li>            </ul>            <ul class=\"mm\">                <li>0</li>                <li>5</li>                <li>10</li>                <li>15</li>                <li>20</li>                <li>25</li>                <li>30</li>                <li>35</li>                <li>40</li>                <li>45</li>                <li>50</li>                <li>55</li>            </ul>            <ul class=\"ss\">                <li>0</li>                <li>10</li>                <li>20</li>                <li>30</li>                <li>40</li>                <li>50</li>            </ul>        </div>    </div></div>',spinnerBtn:'<ul class=\"bjui-spinner\"><li class=\"up\" data-add=\"1\">&and;</li><li class=\"down\">&or;</li></ul>',lookupBtn:'<a class=\"bjui-lookup\" href=\"javascript:;\" data-toggle=\"lookupbtn\"><i class=\"fa fa-search\"></i></a>',dateBtn:'<a class=\"bjui-lookup\" href=\"javascript:;\" data-toggle=\"datepickerbtn\"><i class=\"fa fa-calendar\"></i></a>',navtabCM:'<ul id=\"bjui-navtabCM\">    <li rel=\"reload\"><span class=\"icon\"><i class=\"fa fa-refresh\"></i></span><span class=\"title\">#refresh#</span></li>    <li rel=\"closeCurrent\"><span class=\"icon\"><i class=\"fa fa-remove\"></i></span><span class=\"title\">#close#</li>    <li rel=\"closeOther\"><span class=\"icon\"><i class=\"fa fa-remove\"></i></span><span class=\"title\">#closeother#</li>    <li rel=\"closeAll\"><span class=\"icon\"><i class=\"fa fa-remove\"></i></span><span class=\"title\">#closeall#</li></ul>',dialogCM:'<ul id=\"bjui-dialogCM\">    <li rel=\"reload\"><span class=\"icon\"><i class=\"fa fa-refresh\"></i></span><span class=\"title\">#refresh#</span></li>    <li rel=\"closeCurrent\"><span class=\"icon\"><i class=\"fa fa-remove\"></i></span><span class=\"title\">#close#</span></li>    <li rel=\"closeOther\"><span class=\"icon\"><i class=\"fa fa-remove\"></i></span><span class=\"title\">#closeother#</span></li>    <li rel=\"closeAll\"><span class=\"icon\"><i class=\"fa fa-remove\"></i></span><span class=\"title\">#closeall#</span></li></ul>',externalFrag:'<iframe src=\"{url}\" style=\"width:100%;height:{height};\" frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\"></iframe>',uploadTemp:'<div id=\"{fileId}\" class=\"item\">    <div class=\"info\">        <span class=\"up_filename\">{fileName}</span><span class=\"up_confirm\" title=\"#upConfirm#\"><i class=\"fa fa-play-circle-o\"></i></span><span class=\"up_pause\" title=\"#upPause#\"><span class=\"glyphicon glyphicon-pause\"></span></span><span class=\"up_cancel\" title=\"#upCancel#\"><i class=\"fa fa-times-circle-o\"></i></span>    </div>    <div class=\"preview\"><span class=\"img\"></span></div>    <div class=\"progress\"><div class=\"bar\"></div></div>    <span class=\"percent\">{percent}</span>    <span class=\"filesize\"><span class=\"uploadedsize\">{uploadedSize}</span>/<span class=\"totalsize\">{fileSize}</span></span></div>',uploadFrag:'<input class=\"bjui-upload-select-file\" style=\"display:none;\" type=\"file\" name=\"fileselect[]\" #multi# accept=\"#accept#\"><a href=\"javascript:void(0)\" class=\"btn btn-default bjui-upload-select\">#btnTxt#</a><div class=\"queue\"></div>',statusCode_503:\"HTTP status 503, #statusCode_503#\",sessionTimout:\"#sessiontimeout#\",alertPlhMsg:\"#plhmsg#\",alertNoCheckGroup:\"#nocheckgroup#\",alertNotChecked:\"#notchecked#\",alertSelectMsg:\"#selectmsg#\",validateErrorMsg:\"#validatemsg#\",uiTitle:\"#uititle#\",mainTabTitle:\"#mynavtab#\"}}(jQuery),+function(t){\"use strict\";t.fn.extend({ajaxUrl:function(e){var a=t(this);a.trigger(BJUI.eventType.beforeAjaxLoad),e.loadingmask&&a.trigger(BJUI.eventType.ajaxStatus),t.ajax({type:e.type||\"GET\",url:e.url,data:e.data||{},cache:!1,dataType:\"html\",timeout:BJUI.ajaxTimeout,success:function(i){var n=i.toJson(),o=a.find(\"> .bjui-ajax-mask\");n[BJUI.keys.statusCode]?(n[BJUI.keys.statusCode]==BJUI.statusCode.error?(n[BJUI.keys.message]&&a.alertmsg(\"error\",n[BJUI.keys.message]),a.closest(\".bjui-layout\").length||(a.closest(\".navtab-panel\").length?a.navtab(\"closeCurrentTab\"):a.dialog(\"closeCurrent\"))):n[BJUI.keys.statusCode]==BJUI.statusCode.timeout&&(a.closest(\".bjui-dialog\").length&&a.dialog(\"closeCurrent\"),a.closest(\".navtab-panel\").length&&a.navtab(\"closeCurrentTab\"),t(\"body\").alertmsg(\"info\",n[BJUI.keys.message]||BJUI.regional.sessiontimeout),BJUI.loadLogin()),o.fadeOut(\"normal\",function(){t(this).remove()})):a.empty().html(i).append(o).initui(),t.isFunction(e.callback)&&e.callback(i)},error:function(t,e,i){a.bjuiajax(\"ajaxError\",t,e,i),a.closest(\".bjui-layout\").length||(a.closest(\".navtab-panel\").length?a.navtab(\"closeCurrentTab\"):a.dialog(\"closeCurrent\")),a.trigger(\"bjui.ajaxError\")},statusCode:{503:function(t,e,i){a.alertmsg(\"error\",FRAG.statusCode_503.replace(\"#statusCode_503#\",BJUI.regional.statusCode_503)||i)}}})},loadUrl:function(e,a,i){t(this).ajaxUrl({url:e,data:a,callback:i})},doAjax:function(e){var a,i,n=t(this);return e.url?e.callback?(e.callback=e.callback.toFunc(),e.loadingmask&&(a=n.getPageTarget(),a.trigger(BJUI.eventType.ajaxStatus),i=a.find(\"> .bjui-ajax-mask\")),e.type||(e.type=\"POST\"),e.dataType||(e.dataType=\"json\"),e.cache||(e.cache=!1),e.timeout=e.ajaxTimeout||BJUI.ajaxTimeout,e.success=function(n){i?e.callback?t.when(e.callback(n)).done(function(){a.trigger(\"bjui.ajaxStop\")}):a.trigger(\"bjui.ajaxStop\"):e.callback(n)},e.error=e.error||function(t,e,o){n.bjuiajax(\"ajaxError\",t,e,o),i&&a.trigger(\"bjui.ajaxError\")},void t.ajax(e)):void BJUI.debug(\"The ajax callback is undefined!\"):void BJUI.debug(\"The ajax url is undefined!\")},getPageTarget:function(){var e;return e=this.closest(\".bjui-layout\").length?this.closest(\".bjui-layout\"):this.closest(\".navtab-panel\").length?t.CurrentNavtab:t.CurrentDialog},resizePageH:function(){return this.each(function(){if(!t(this).closest(\".tab-content\").length){var e=t(this),a=e.find(\"> .bjui-pageHeader\"),i=e.find(\"> .bjui-pageContent\"),n=e.find(\"> .bjui-pageFooter\"),o=a.outerHeight()||0,s=n.outerHeight()||0;e.hasClass(\"navtabPage\")&&e.is(\":hidden\")&&(e.show(),o=a.outerHeight()||0,s=n.outerHeight()||0,e.hide()),n.css(\"bottom\")&&(s+=parseInt(n.css(\"bottom\"))||0),0==s&&e.hasClass(\"dialogContent\")&&(s=5),i.css({top:o,bottom:s})}})},getMaxIndexObj:function(e){var a=0,i=0;return e.each(function(e){var n=parseInt(t(this).css(\"zIndex\"))||1;n>a&&(a=n,i=e)}),e.eq(i)},serializeJson:function(){var e={},a=this.serializeArray();return t.each(a,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||\"\")):e[this.name]=this.value||\"\"}),e},isTag:function(e){return e&&t(this).prop(\"tagName\")&&t(this)[0].tagName.toLowerCase()==e?!0:!1},isBind:function(e){var a=t(this).data(\"events\");return a&&e&&a[e]},log:function(t){return this.each(function(){console&&console.log(\"%s: %o\",t,this)})}}),t.extend(String.prototype,{isPositiveInteger:function(){return new RegExp(/^[1-9]\\d*$/).test(this)},isInteger:function(){return new RegExp(/^\\d+$/).test(this)},isNumber:function(){return new RegExp(/^([-]{0,1}(\\d+)[\\.]+(\\d+))|([-]{0,1}(\\d+))$/).test(this)},includeChinese:function(){return new RegExp(/[\\u4E00-\\u9FA5]/).test(this)},trim:function(){return this.replace(/(^\\s*)|(\\s*$)|\\r|\\n/g,\"\")},startsWith:function(t){return 0===this.indexOf(t)},endsWith:function(t){var e=this.length-t.length;return e>=0&&this.lastIndexOf(t)===e},replaceSuffix:function(t){return this.replace(/\\[[0-9]+\\]/,\"[\"+t+\"]\").replace(\"#index#\",t)},replaceSuffix2:function(t){return this.replace(/\\-(i)([0-9]+)$/,\"-i\"+t).replace(\"#index#\",t)},trans:function(){return this.replace(/&lt;/g,\"<\").replace(/&gt;/g,\">\").replace(/&quot;/g,'\"')},encodeTXT:function(){return this.replaceAll(\"&\",\"&amp;\").replaceAll(\"<\",\"&lt;\").replaceAll(\">\",\"&gt;\").replaceAll(\" \",\"&nbsp;\")},replaceAll:function(t,e){return this.replace(new RegExp(t,\"gm\"),e)},replacePlh:function(e){return e=e||t(document),this.replace(/{\\/?[^}]*}/g,function(t){var a=e.find(t.replace(/[{}]+/g,\"\"));return a&&a.val()?a.val():t})},replaceMsg:function(t){return this.replace(new RegExp(\"({.*})\",\"g\"),t)},replaceTm:function(t){return t?this.replace(RegExp(\"({[A-Za-z_]+[A-Za-z0-9_-]*})\",\"g\"),function(e){return t[e.replace(/[{}]+/g,\"\")]}):this},replaceTmById:function(e){var a=e||t(document);return this.replace(RegExp(\"({[A-Za-z_]+[A-Za-z0-9_-]*})\",\"g\"),function(t){var e=a.find(\"#\"+t.replace(/[{}]+/g,\"\"));return e.val()?e.val():t})},isFinishedTm:function(){return!new RegExp(\"{/?[^}]*}\").test(this)},skipChar:function(t){return this&&0!==this.length?this.charAt(0)===t?this.substring(1).skipChar(t):this:\"\"},isValidPwd:function(){return new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)},isValidMail:function(){return new RegExp(/^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$/).test(this.trim())},isSpaces:function(){for(var t=0;t<this.length;t+=1){var e=this.charAt(t);if(\" \"!=e&&\"\\n\"!=e&&\"\t\"!=e&&\"\\r\"!=e)return!1}return!0},isPhone:function(){return new RegExp(/(^([0-9]{3,4}[-])?\\d{3,8}(-\\d{1,6})?$)|(^\\([0-9]{3,4}\\)\\d{3,8}(\\(\\d{1,6}\\))?$)|(^\\d{3,8}$)/).test(this)},isUrl:function(){return new RegExp(/^[a-zA-z]+:\\/\\/([a-zA-Z0-9\\-\\.]+)([-\\w .\\/?%&=:]*)$/).test(this)},isExternalUrl:function(){return this.isUrl()&&-1==this.indexOf(\"://\"+document.domain)},toBool:function(){return\"true\"===this.toLowerCase()?!0:!1},toJson:function(){var t=this;try{return\"object\"==typeof t&&(t=t.toString()),t.trim().match(\"^{(.+:.+,*){1,}}$\")?JSON.parse(this):this}catch(e){return this}},toObj:function(){var t=null;try{t=new Function(\"return \"+this)()}catch(e){t=this,BJUI.debug('String toObj：Parse \"String\" to \"Object\" error! Your str is: '+this)}return t},toFunc:function(){if(!this||0==this.length)return void 0;if(this.startsWith(\"function\"))return new Function(\"return \"+this)();for(var t=this.split(\".\"),e=window,a=0;a<t.length;a++)e=e[t[a]];return\"function\"==typeof e?e:void 0},setUrlParam:function(t,e){var a=\"\",i=this;if(-1==i.indexOf(\"?\"))return i+\"?\"+t+\"=\"+e;a=i.substr(i.indexOf(\"?\")+1);var n,o=\"\",s=\"\",r=\"0\";if(-1!=a.indexOf(\"&\")){n=a.split(\"&\");for(var l in n)n[l].split(\"=\")[0]==t?(s=e,r=\"1\"):s=n[l].split(\"=\")[1],o=o+n[l].split(\"=\")[0]+\"=\"+s+\"&\";o=o.substr(0,o.length-1),\"0\"==r&&o==a&&(o=o+\"&\"+t+\"=\"+e)}else-1!=a.indexOf(\"=\")?(n=a.split(\"=\"),n[0]==t?(s=e,r=\"1\"):s=n[1],o=n[0]+\"=\"+s,\"0\"==r&&o==a&&(o=o+\"&\"+t+\"=\"+e)):o=t+\"=\"+e;return i.substr(0,i.indexOf(\"?\"))+\"?\"+o}}),t.extend(Function.prototype,{toFunc:function(){return this}}),t.extend(Array.prototype,{remove:function(t){return 0>t?this:this.slice(0,t).concat(this.slice(t+1,this.length))},unique:function(){var t=new Array;this.sort();for(var e=0;e<this.length;e++)this[e]!=this[e+1]&&(t[t.length]=this[e]);return t},myIndexOf:function(t){if(!this||!this.length)return-1;for(var e,a=0;e=this[a];a++)if(e==t)return a;return-1},toJson:function(){var e={},a=this;return t.each(a,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||\"\")):e[this.name]=this.value||\"\"}),e}}),t.isJson=function(e){var a=!0;try{a=t.parseJSON(e)}catch(i){return!1}return a?!0:!1}}(jQuery),+function(t){\"use strict\";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},o.data(),\"object\"==typeof e&&e),r=o.data(\"bjui.basedrag\");r||o.data(\"bjui.basedrag\",r=new a(this,s)),\"string\"==typeof n&&t.isFunction(r[n])?([].shift.apply(i),i?r[n].apply(r,i):r[n]()):r.init()})}var a=function(e,a){this.$element=t(e),this.options=a};a.prototype.init=function(){var t=this;this.options.$obj=this.$element,this.options.obj&&(this.options.$obj=this.options.obj),this.options.event?this.start(this.options.event):this.$element.find(this.options.selector).bind(\"mousedown\",function(e){t.start.apply(t,[e])})},a.prototype.start=function(e){document.onselectstart=function(t){return!1};var a=this;this.options.oleft=parseInt(this.$element.css(\"left\"))||0,this.options.otop=parseInt(this.$element.css(\"top\"))||0,t(document).bind(\"mouseup.bjui.basedrag\",function(t){\na.stop.apply(a,[t])}).bind(\"mousemove.bjui.basedrag\",function(t){a.drag.apply(a,[t])})},a.prototype.drag=function(e){e||(e=window.event);var a=this.options,i=a.oleft+(e.pageX||e.clientX)-a.event.pageX,n=a.otop+(e.pageY||e.clientY)-a.event.pageY;if(1>n&&(n=0),\"horizontal\"==a.move)a.minW&&i>=parseInt(this.options.$obj.css(\"left\"))+a.minW&&a.maxW&&i<=parseInt(this.options.$obj.css(\"left\"))+a.maxW?this.$element.css(\"left\",i):a.scop&&a.relObj&&(i-parseInt(a.relObj.css(\"left\"))>a.cellMinW?this.$element.css(\"left\",i):this.$element.css(\"left\",i));else if(\"vertical\"==a.move)this.$element.css(\"top\",n);else{var o=a.selector?this.options.$obj.find(a.selector):this.options.$obj;i>=2*-o.outerWidth()/3&&n>=0&&i+o.outerWidth()/3<t(window).width()&&n+o.outerHeight()<t(window).height()&&this.$element.css({left:i,top:n})}return a.drag&&a.drag.apply(this.$element,[this.$element,e]),this.preventEvent(e)},a.prototype.stop=function(e){return t(document).unbind(\"mousemove.bjui.basedrag\").unbind(\"mouseup.bjui.basedrag\"),this.options.stop&&this.options.stop.apply(this.$element,[this.$element,e]),this.options.event&&this.destroy(),document.onselectstart=function(t){return!0},this.preventEvent(e)},a.prototype.preventEvent=function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1},a.prototype.destroy=function(){this.$element.removeData(\"bjui.basedrag\"),this.options.nounbind||this.$element.unbind(\"mousedown\")};var i=t.fn.basedrag;t.fn.basedrag=e,t.fn.basedrag.Constructor=a,t.fn.basedrag.noConflict=function(){return t.fn.basedrag=i,this}}(jQuery),+function(t){\"use strict\";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},o.data(),\"object\"==typeof e&&e),r=o.data(\"bjui.slidebar\");r||o.data(\"bjui.slidebar\",r=new a(this,s)),\"string\"==typeof n&&t.isFunction(r[n])?([].shift.apply(i),i?r[n].apply(r,i):r[n]()):r.init()})}t(function(){t(\"#bjui-leftside\").after(\"<!-- Adjust the width of Left slide -->\").after(FRAG.splitBar).after(FRAG.splitBarProxy)});var a=function(e,a){this.$element=t(e),this.$bar=this.$element.find(\"#bjui-sidebar\"),this.$sbar=this.$element.find(\"#bjui-sidebar-s\"),this.$lock=this.$bar.find(\"> .toggleCollapse > .lock\"),this.$navtab=t(\"#bjui-navtab\"),this.$collapse=this.$sbar.find(\".collapse\"),this.$split=t(\"#bjui-splitBar\"),this.$split2=t(\"#bjui-splitBarProxy\"),this.isfloat=!1,this.options=a};a.prototype.lock=function(){var e=this,a=e.$bar.outerWidth()+4,i=BJUI.windowWidth-t(\"#bjui-sidebar\").width()-6;e.faLock(),e.hoverLock(),e.$sbar.animate({left:-10},20),e.$bar.removeClass(\"shadown\"),e.isfloat=!1,e.$navtab.animate({left:a,width:i},500,function(){t(window).trigger(BJUI.eventType.resizeGrid)}),e.$split.show()},a.prototype.unlock=function(){var e=this,a=0-e.$bar.outerWidth()-0,i=BJUI.windowWidth-6;e.faUnLock(),e.hoverUnLock(),e.$navtab.animate({left:6,width:i},400),e.$bar.animate({left:a},500,function(){e.$sbar.animate({left:0},200),e.$split.hide(),t(window).trigger(BJUI.eventType.resizeGrid)}),e.isfloat=!1},a.prototype[\"float\"]=function(){var t=this;t.$sbar.animate({left:-10},200),t.$bar.addClass(\"shadown\").animate({left:0},500),t.isfloat=!0},a.prototype.hideFloat=function(){var t=this,e=0-t.$bar.outerWidth()-0;t.$bar.animate({left:e-10},500,function(){t.$sbar.animate({left:0},100)}),t.isfloat=!1},a.prototype.hoverLock=function(){var t=this;t.$lock.hover(function(){t.tipUnLock(),t.faUnLock()},function(){t.tipLock(),t.faLock()})},a.prototype.hoverUnLock=function(){var t=this;t.$lock.hover(function(){t.tipLock(),t.faLock()},function(){t.tipUnLock(),t.faUnLock()})},a.prototype.tipLock=function(){this.$lock.tooltip(\"destroy\").tooltip({title:\"保持锁定，始终显示导航栏\",container:\"body\"})},a.prototype.tipUnLock=function(){this.$lock.tooltip(\"destroy\").tooltip({title:\"解除锁定，自动隐藏导航栏\",container:\"body\"})},a.prototype.faLock=function(){this.$lock.find(\"> i\").attr(\"class\",\"fa fa-lock\")},a.prototype.faUnLock=function(){this.$lock.find(\"> i\").attr(\"class\",\"fa fa-unlock-alt\")},a.prototype.init=function(){var e=this;BJUI.ui.showSlidebar?e.hoverLock():e.unlock(),this.$lock.off(\"click.bjui.slidebar\").on(\"click.bjui.slidebar\",function(){e.isfloat?e.lock():e.unlock(),BJUI.ui.showSlidebar=!BJUI.ui.showSlidebar}),this.$collapse.hover(function(){e[\"float\"](),e.$navtab.click(function(){e.isfloat&&e.hideFloat()})}),this.$split.mousedown(function(a){e.$split2.each(function(){var i=t(this);return setTimeout(function(){i.show()},100),i.css({visibility:\"visible\",left:e.$split.css(\"left\")}).basedrag(t.extend(e.options,{obj:e.$bar,move:\"horizontal\",event:a,stop:function(){t(this).css(\"visibility\",\"hidden\");var a=parseInt(t(this).css(\"left\"))-parseInt(e.$split.css(\"left\")),i=e.$bar.outerWidth()+a,n=parseInt(e.$navtab.css(\"left\"))+a,o=e.$navtab.outerWidth()-a;e.$bar.css(\"width\",i),e.$split.css(\"left\",t(this).css(\"left\")),e.$navtab.css({left:n,width:o})}})),!1})}),t(\"#bjui-hnav-navbar-box\").length&&e.moveHnav()},a.prototype.moveHnav=function(){var e=t(\"#bjui-hnav-navbar-box\"),a=e.find(\"> #bjui-hnav-navbar\"),i=e.prev(),n=e.next();i.hover(function(){a.stop().animate({left:0},2e3,function(){i.hide()})},function(){a.stop(),e.data(\"hnav.move\")&&n.show()}).on(\"click\",function(){return a.stop().animate({left:0},\"fast\",function(){i.hide()}),!1}),n.hover(function(){a.stop().animate({left:e.width()-e.data(\"hnav.liw\")-10},2e3,function(){n.hide()})},function(){a.stop(),\"0px\"!=a.css(\"left\")&&i.show()}).on(\"click\",function(){return a.stop().animate({left:e.width()-e.data(\"hnav.liw\")-10},\"fast\",function(){n.hide()}),!1})},a.prototype.initHnav=function(){var e,a,i,n,o=this,s=o.$element.text().trim(),r=o.$element.parent(),l=t(\"#bjui-accordionmenu\");e=r.find(\"> .items > ul.ztree\"),a=r.find(\"> .items > ul.menu-items\"),(e.length||a.length)&&(e.length&&(n=e),a.length&&(n=n?n.add(a):a,a.find(\"a\").each(function(){var e=t(this),a=e.data(\"options\");!e.data(\"icon.init\")&&a&&\"string\"==typeof a&&(a=a.toObj(),a&&a.faicon&&(a.faicon=a.faicon.trim(),a.faicon.startsWith(\"fa-\")&&(a.faicon=a.faicon.substr(3)),e.prepend('<i class=\"fa fa-'+a.faicon+'\"></i>').data(\"icon.init\",!0).attr(\"title\",e.text())))})),l.empty(),n.each(function(e){var a,n,o,r=t(this),d=r.data(\"faicon\"),c=(r.data(\"faiconClose\"),d?d:\"dot-circle-o\");r.data(\"tit\")&&(s=r.data(\"tit\")),n=e?\"collapsed\":\"\",o=e?\"\":\" in\",a=FRAG.slidePanel.replaceAll(\"#id#\",\"bjui-collapse\"+e).replaceAll(\"#title#\",s).replaceAll(\"#righticon#\",'<i class=\"fa fa-angle-down\"></i>').replaceAll(\"#class#\",n).replaceAll(\"#bodyclass#\",o),a=c?a.replaceAll(\"#icon#\",'<i class=\"fa fa-'+c+'\"></i>'):a.replaceAll(\"#icon#\",\"\"),i=t(a),i.find(\"> .panel-collapse > .panel-body\").append(r.removeAttr(\"data-noinit\")),l.append(i),e||i.collapse(\"show\")}),t(\"#bjui-sidebar\").initui(),r.addClass(\"active\").data(\"bjui.slidebar.hnav.panels\",l.find(\"> .panel\")).siblings().removeClass(\"active\"))};var i=t.fn.slidebar;t.fn.slidebar=e,t.fn.slidebar.Constructor=a,t.fn.basedrag.noConflict=function(){return t.fn.slidebar=i,this},t(document).one(BJUI.eventType.afterInitUI,function(e){t(\"#bjui-leftside\").slidebar({minW:150,maxW:700})}),t(document).on(\"click.bjui.slidebar.data-api\",'[data-toggle=\"slidebar\"]',function(a){var i=t(this).parent(),n=t(\"#bjui-accordionmenu\"),o=i.data(\"bjui.slidebar.hnav.panels\");n.find(\"> .panel\").detach(),o&&o.length?(n.append(o),i.addClass(\"active\").siblings().removeClass(\"active\")):e.call(t(this),\"initHnav\"),a.preventDefault()})}(jQuery),+function(t){\"use strict\";function e(e){var a=arguments,i=e;return this.each(function(){var n=t(this),s=t.extend({},o.DEFAULTS,n.data(),\"object\"==typeof e&&e),r=n.data(\"bjui.contextmenu\");r||n.data(\"bjui.contextmenu\",r=new o(this,s)),\"string\"==typeof i&&t.isFunction(r[i])?([].shift.apply(a),a?r[i].apply(r,a):r[i]()):r.init()})}var a,i,n;t(function(){var e=function(){a=t('<div id=\"bjui-contextmenu\"></div>').hide(),i=t('<div id=\"bjui-contextmenuShadow\"></div>').hide(),n=[],t(\"body\").append(\"<!-- contextmenu -->\").append(a).append(i)};e()});var o=function(e,a){this.$element=t(e),this.options=a};o.DEFAULTS={id:void 0,shadow:!0,bindings:{},ctrSub:null},o.prototype.init=function(){var t=this,e=this.options;if(e.id){n.push({id:e.id,shadow:e.shadow,bindings:e.bindings||{},ctrSub:e.ctrSub});var a=n.length-1;this.$element.on(\"contextmenu\",function(i){return t.display(a,this,i,e),!1})}},o.prototype.display=function(e,o,s,r){var l=this,d=n[e],c=BJUI.regional[d.id],u=FRAG[d.id];t.each(c,function(t,e){u=u.replace(\"#\"+t+\"#\",c[t])}),a.html(u),t.each(d.bindings,function(e,i){t('[rel=\"'+e+'\"]',a).on(\"click\",function(e){l.hide(),i(t(o),t(\"#bjui-\"+d.id))})});var h=s.pageX,p=s.pageY;t(window).width()<h+a.width()&&(h-=a.width()),t(window).height()<p+a.height()&&(p-=a.height()),a.css({left:h,top:p}).show(),d.shadow&&i.css({width:a.width(),height:a.height(),left:h+3,top:p+3}).show(),t(document).one(\"click\",l.hide),t.isFunction(d.ctrSub)&&d.ctrSub(t(o),t(\"#bjui-\"+d.id))},o.prototype.hide=function(){a.hide(),i.hide()},o.prototype.show=function(e){var a=this;e.items&&e.items.length&&a.$element.on(\"contextmenu\",function(i){var n=!0;return e.exclude&&a.$element.find(e.exclude).each(function(){return this==i.target||t(this).find(i.target).length?void(n=!1):void 0}),n?(a.custom(e.items,i),!1):(i.stopPropagation(),!n)})},o.prototype.custom=function(e,n){a.empty().html(\"<ul></ul>\");var o,s=this,r=s.options,l=a.find(\"> ul\");t.each(e,function(e,a){var i=\"\";a.icon&&(i='<i class=\"fa fa-'+a.icon+'\"></i>'),\"diver\"==a.title?o=t('<li class=\"diver\"></li>'):(o=t('<li><span class=\"icon\">'+i+'</span><span class=\"title\">'+a.title+\"</span></li>\"),a.func&&\"string\"==typeof a.func&&(a.func=a.func.toFunc()),a.func&&o.on(\"click\",function(t){s.hide(),a.func(s.$element,o)})),o.appendTo(l)});var d=n.pageX,c=n.pageY;t(window).width()<d+a.width()&&(d-=a.width()),t(window).height()<c+a.height()&&(c-=a.height()),a.css({left:d,top:c}).show(),r.shadow&&i.css({width:a.width(),height:a.height(),left:d+3,top:c+3}).show(),t(document).one(\"click\",s.hide)};var s=t.fn.contextmenu;t.fn.contextmenu=e,t.fn.contextmenu.Constructor=o,t.fn.contextmenu.noConflict=function(){return t.fn.contextmenu=s,this}}(jQuery),+function(t){\"use strict\";function e(e){var a=arguments,i=e;return this.each(function(){var n=t(this),o=t.extend({},g.DEFAULTS,\"object\"==typeof e&&e),s=n.data(\"bjui.navtab\");s||n.data(\"bjui.navtab\",s=new g(this,o)),\"string\"==typeof i&&t.isFunction(s[i])?([].shift.apply(a),a?s[i].apply(s,a):s[i]()):(s=new g(this,o),s.openTab())})}var a,i,n,o,s,r,l,d,c,u,h,p,f;t(function(){var e=function(){a=0,o=t(\"#bjui-navtab\"),s=o.find(\".navtab-tab\"),r=o.find(\".navtab-panel\"),l=o.find(\".tabsLeft\"),d=o.find(\".tabsRight\"),c=o.find(\".tabsMore\"),u=o.find(\".tabsMoreList\"),h=s.find(\"li:first\"),p=u.find(\"li:first\"),l.click(function(){t(this).navtab(\"scrollPrev\")}),d.click(function(){t(this).navtab(\"scrollNext\")}),c.click(function(){u.show()}),t(document).on(\"click.bjui.navtab.switchtab\",function(e){var a=\"I\"==e.target.tagName?t(e.target).parent():t(e.target);c[0]!=a[0]&&u.hide()});var e,i;h.navtab(\"contextmenu\",h).click(function(){t(this).navtab(\"switchTab\",\"main\")}).find(\"> a > span\").html(function(t,a){return e=a.replace(\"#maintab#\",BJUI.regional.maintab)}),i=t.extend({},g.DEFAULTS,h.data(),{id:\"main\",title:e}),h.data(\"initOptions\",i).data(\"options\",i),h.attr(\"data-url\")&&t(document).one(BJUI.eventType.initUI,function(t){h.removeAttr(\"data-url\").navtab(\"reload\",i)}),setTimeout(function(){h.navtab(\"switchTab\",\"main\")},50),p.click(function(){t(this).hasClass(\"active\")?u.hide():t(this).navtab(\"switchTab\",\"main\")}).find(\"> a\").html(function(t,e){return e.replace(\"#maintab#\",BJUI.regional.maintab)})};e()});var g=function(e,a){this.$element=t(e),this.options=a,this.tools=this.TOOLS()};g.DEFAULTS={id:void 0,title:\"New tab\",url:void 0,type:\"GET\",data:{},loadingmask:!0,fresh:!1,autorefresh:!1,onLoad:null,beforeClose:null,onClose:null},g.prototype.TOOLS=function(){var e=this,c={getDefaults:function(){return g.DEFAULTS},getTabs:function(){return s.find(\"> li\")},getPanels:function(){return r.find(\"> div\")},getMoreLi:function(){return u.find(\"> li\")},getTab:function(t){var e=this.indexTabId(t);return e>=0?this.getTabs().eq(e):void 0},getPanel:function(t){var e=this.indexTabId(t);return e>=0?this.getPanels().eq(e):void 0},getTabsW:function(t,e){return this.tabsW(this.getTabs().slice(t,e))},tabsW:function(e){var a=0;return e.each(function(){a+=t(this).outerWidth(!0)}),a},indexTabId:function(e){if(!e)return-1;var a=-1;return this.getTabs().each(function(i){return t(this).data(\"initOptions\").id==e?void(a=i):void 0}),a},getLeft:function(){return s.position().left},getScrollBarW:function(){return o.width()-55},visibleStart:function(){for(var t=this.getLeft(),e=0,a=this.getTabs(),i=0;i<a.size();i++){if(e+t>=0)return i;e+=a.eq(i).outerWidth(!0)}return 0},visibleEnd:function(){for(var t=this.getLeft(),e=0,a=this.getTabs(),i=0;i<a.size();i++)if(e+=a.eq(i).outerWidth(!0),e+t>this.getScrollBarW())return i;return a.size()},scrollPrev:function(){var t=this.visibleStart();t>0&&this.scrollTab(-this.getTabsW(0,t-1))},scrollNext:function(){var t=this.visibleEnd();t<this.getTabs().size()&&this.scrollTab(-this.getTabsW(0,t+1)+this.getScrollBarW())},scrollTab:function(t,a){s.animate({left:t},200,function(){e.tools.ctrlScrollBtn()})},scrollCurrent:function(){var t=this.tabsW(this.getTabs()),e=this.getScrollBarW();e>=t?this.scrollTab(0):this.getLeft()<e-t?this.scrollTab(e-t):a<this.visibleStart()?this.scrollTab(-this.getTabsW(0,a)):a>=this.visibleEnd()&&this.scrollTab(e-this.getTabs().eq(a).outerWidth(!0)-this.getTabsW(0,a))},ctrlScrollBtn:function(){var t=this.tabsW(this.getTabs());this.getScrollBarW()>t?(l.hide(),d.hide(),s.parent().removeClass(\"tabsPageHeaderMargin\")):(l.show().removeClass(\"tabsLeftDisabled\"),d.show().removeClass(\"tabsRightDisabled\"),s.parent().addClass(\"tabsPageHeaderMargin\"),this.getLeft()>=0?l.addClass(\"tabsLeftDisabled\"):this.getLeft()<=this.getScrollBarW()-t&&d.addClass(\"tabsRightDisabled\"))},switchTab:function(o){var s=this.getTabs().removeClass(\"active\").eq(o).addClass(\"active\"),r=this.getPanels(),l=r.eq(o),d=e.options.onSwitch?e.options.onSwitch.toFunc():null;s.data(\"reloadFlag\")?(r.hide(),l.show(),e.refresh(s.data(\"initOptions\").id)):(r.hide(),l.find(\".bjui-ajax-mask\").length?l.show():(l.addClass(\"fade\").removeClass(\"in\").show(),t.support.transition?l.one(\"bsTransitionEnd\",function(){l.addClass(\"in\")}).emulateTransitionEnd(10):l.removeClass(\"fade\"))),this.getMoreLi().removeClass(\"active\").eq(o).addClass(\"active\"),a=o,this.scrollCurrent(),i=s,t.CurrentNavtab=n=l,d&&d.apply(e),l.trigger(\"bjui.navtab.switch\")},closeTab:function(t,i){var n=this.getTabs().eq(t),o=this.getMoreLi().eq(t),s=this.getPanels().eq(t),r=n.data(\"options\"),l=r.beforeClose?r.beforeClose.toFunc():null,d=r.onClose?r.onClose.toFunc():null,c=!0;if(l&&(c=l.apply(e,[s])),!c)return void e.tools.switchTab(t);if(n.remove(),o.remove(),s.trigger(BJUI.eventType.beforeCloseNavtab).remove(),f&&clearInterval(f),d&&d.apply(e),a>=t&&a--,i){var u=this.indexTabId(i);u>0&&(a=u)}this.scrollCurrent(),this.switchTab(a)},closeOtherTab:function(e){e=e||a,this.getTabs().each(function(a){a>0&&e!=a&&t(this).find(\"> .close\").trigger(\"click\")})},loadUrlCallback:function(t){t.find(\":button.btn-close\").click(function(){e.closeCurrentTab()})},reload:function(t,a){a=a||t.data(\"reloadFlag\");var i=t.data(\"options\");if(a){t.data(\"reloadFlag\",!1);var n=e.tools.getPanel(i.id);t.hasClass(\"external\")?e.openExternal(i.url,n):e.tools.reloadTab(n,i)}},reloadTab:function(t,a){var i=a.onLoad?a.onLoad.toFunc():null,n=a.autorefresh&&(isNaN(String(a.autorefresh))?15:a.autorefresh);t.trigger(BJUI.eventType.beforeLoadNavtab).ajaxUrl({type:a.type||\"GET\",url:a.url,data:a.data||{},loadingmask:a.loadingmask,callback:function(a){e.tools.loadUrlCallback(t),i&&i.apply(e,[t]),f&&clearInterval(f),n&&(f=setInterval(function(){t.navtab(\"refresh\")},1e3*n)),BJUI.ui.clientPaging&&t.data(\"bjui.clientPaging\")&&t.pagination(\"setPagingAndOrderby\",t)}})}};return c},g.prototype.contextmenu=function(t){var e=this;t.contextmenu({id:\"navtabCM\",bindings:{reload:function(t,a){e.refresh(t.data(\"initOptions\").id)},closeCurrent:function(t,a){var i=t.data(\"initOptions\").id;i?e.closeTab(i):e.closeCurrentTab()},closeOther:function(t,i){if(0==t.index())e.closeAllTab();else{var n=e.tools.indexTabId(t.data(\"initOptions\").id);e.tools.closeOtherTab(n>0?n:a)}},closeAll:function(t,a){e.closeAllTab()}},ctrSub:function(t,a){var i=a.find('[rel=\"reload\"]'),n=a.find('[rel=\"closeCurrent\"]');a.find('[rel=\"closeOther\"]'),a.find('[rel=\"closeAll\"]'),e.tools.getTabs();0==t.index()&&(n.addClass(\"disabled\"),t.data(\"url\")||i.addClass(\"disabled\"))}})},g.prototype.openTab=function(){var e=this,i=this.$element,n=this.options,o=this.tools;if(!n.url&&n.href&&(n.url=n.href),!n.url)return void BJUI.debug(\"Navtab Plugin: Error trying to open a navtab, url is undefined!\");if(n.url=decodeURI(n.url).replacePlh(i.closest(\".unitBox\")),!n.url.isFinishedTm())return i.alertmsg(\"error\",n.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"Navtab Plugin: The new navtab's url is incorrect, url: \"+n.url);n.url=encodeURI(n.url);var l=n.id?o.indexTabId(n.id):a;if(n.id||BJUI.ui.overwriteHomeTab||0!=l||(n.id=\"navtab\",l=-1),l>=0){n.id||delete n.id;var d=o.getTabs().eq(l),c=o.getPanels().eq(l),h=d.data(\"initOptions\"),p=t.extend({},h,n);(h.fresh||n.fresh||h.url!=n.url)&&e.reload(p),a=l}else{var f='<li><a href=\"javascript:\" title=\"#title#\"><span>#title#</span></a><span class=\"close\">&times;</span></li>',d=t(f.replaceAll(\"#title#\",n.title)),c=t('<div class=\"navtabPage unitBox\"></div>'),g=t('<li><a href=\"javascript:\" title=\"#title#\">#title#</a></li>'.replaceAll(\"#title#\",n.title));d.appendTo(s),c.appendTo(r),g.appendTo(u),d.data(\"options\",n).data(\"initOptions\",n),n.external||n.url&&n.url.isExternalUrl()?(d.addClass(\"external\"),this.openExternal(n.url,c)):(d.removeClass(\"external\"),o.reloadTab(c,n)),a=o.getTabs().length-1,this.contextmenu(d),d.on(\"click\",function(a){var i=t(a.target);if(i.hasClass(\"close\"))e.closeTab(n.id);else{if(i.closest(\"li\").hasClass(\"active\"))return!1;e.switchTab(n.id)}}),g.on(\"click\",function(){e.switchTab(n.id)})}o.switchTab(a),o.scrollCurrent()},g.prototype.closeTab=function(t){var e=this.tools.indexTabId(t);e>0&&this.tools.closeTab(e)},g.prototype.closeCurrentTab=function(t){a>0&&this.tools.closeTab(a,t)},g.prototype.closeAllTab=function(){this.tools.getTabs().find(\"> .close\").each(function(){t(this).trigger(\"click\")})},g.prototype.reloadFlag=function(t){for(var e=t.split(\",\"),i=0;i<e.length;i++){var n=this.tools.getTab(e[i].trim());n&&(this.tools.indexTabId(e[i])==a?this.tools.reload(n,!0):n.data(\"reloadFlag\",!0))}},g.prototype.switchTab=function(t){var e=this.tools.indexTabId(t);this.tools.switchTab(e)},g.prototype.scrollPrev=function(){this.tools.scrollPrev()},g.prototype.scrollNext=function(){this.tools.scrollNext()},g.prototype.refresh=function(t){var e,a;e=t?\"string\"==typeof t?this.tools.getTab(t):t:i,e&&e.length&&(a=this.tools.getPanel(e.data(\"initOptions\").id),a.removeData(\"bjui.clientPaging\"),this.reload(e.data(\"initOptions\")))},g.prototype.reload=function(e,i){var n=this,o=t.extend({},\"object\"==typeof e&&e),s=o.id?this.tools.getTab(o.id):this.tools.getTabs().eq(a);if(s){var r=s.data(\"initOptions\")||{},l=t.extend({},r,o),d=function(){r.title!=l.title&&s.find(\"> a\").attr(\"title\",l.title).find(\"> span\").html(l.title),i||s.data(\"initOptions\",l),s.data(\"options\",l),n.tools.reload(s,!0)};o.reloadWarn?this.$element.alertmsg(\"confirm\",o.reloadWarn,{okCall:function(){d()}}):d()}},g.prototype.reloadForm=function(e,i){var n,o,s=t.extend({},\"object\"==typeof i&&i);if(\"string\"==typeof i?(n=this.tools.getTab(i),o=this.tools.getPanel(i)):(n=s.id?this.tools.getTab(s.id):this.tools.getTabs().eq(a),o=s.id?this.tools.getPanel(s.id):this.tools.getPanels().eq(a)),n&&o){if(!n.hasClass(\"external\")){var r=o.find(\"#pagerForm\"),l={},d={};if(r.attr(\"action\")&&(s.url=r.attr(\"action\")),r&&r.length){if(d=r.serializeJson(),i&&i.type||(s.type=r.attr(\"method\")||\"POST\"),e){var c=BJUI.pageInfo;for(var u in c)l[c[u]]=d[c[u]]}else l=d;s.data=t.extend({},s.data||{},l)}}this.reload(s,!0)}},g.prototype.getCurrentPanel=function(){return this.tools.getPanels().eq(a)},g.prototype.checkTimeout=function(){var t=JSON.parse(n.html());t&&t[BJUI.keys.statusCode]==BJUI.statusCode.timeout&&this.closeCurrentTab()},g.prototype.openExternal=function(t,e){var a=e.closest(\".navtab-panel\").height();e.html(FRAG.externalFrag.replaceAll(\"{url}\",t).replaceAll(\"{height}\",a+\"px\"))};var m=t.fn.navtab;t.fn.navtab=e,t.fn.navtab.Constructor=g,t.fn.navtab.noConflict=function(){return t.fn.navtab=m,this},t(document).on(\"click.bjui.navtab.data-api\",'[data-toggle=\"navtab\"]',function(a){var i=t(this),n=i.attr(\"href\"),o=i.data(),s=o.options;s&&(\"string\"==typeof s&&(s=s.toObj()),\"object\"==typeof s&&t.extend(o,s)),o.title||(o.title=i.text()),n&&!o.url&&(o.url=n),e.call(i,o),a.preventDefault()})}(jQuery),+function(t){\"use strict\";function e(e){var a=arguments,i=e;return this.each(function(){var n=t(this),o=t.extend({},s.DEFAULTS,\"object\"==typeof e&&e),r=n.data(\"bjui.dialog\");r||n.data(\"bjui.dialog\",r=new s(this,o)),\"string\"==typeof i&&t.isFunction(r[i])?([].shift.apply(a),a?r[i].apply(r,a):r[i]()):(r=new s(this,o),r.open())})}var a,i,n,o;t(function(){var e=function(){a=t(\"#bjui-resizable\"),n=\"dialogShadow\",o=s.ZINDEX,t(\"body\").append(\"<!-- dialog resizable -->\").append(FRAG.resizable)};e()});var s=function(e,a){this.$element=t(e),this.options=a,this.tools=this.TOOLS()};s.DEFAULTS={id:\"dialog\",title:\"New Dialog\",url:void 0,type:\"GET\",data:{},loadingmask:!0,width:500,height:300,minW:65,minH:40,max:!1,mask:!1,resizable:!0,drawable:!0,maxable:!0,minable:!0,fresh:!1,onLoad:null,beforeClose:null,onClose:null},s.ZINDEX=30,s.prototype.TOOLS=function(){var e=this,a={getDefaults:function(){return s.DEFAULTS},init:function(a){var i=e.options.width>e.options.minW?e.options.width:e.options.minW,o=e.options.height>e.options.minH?e.options.height:e.options.minH,s=t(window).width(),r=t(window).height(),l=e.options.max?0:(r-o)/2;i>s&&(i=s),o>r&&(o=r),a.height(o).width(i).show().css({left:(s-i)/2,top:0,opacity:.1}).animate({top:l>0?l:0,opacity:1}).addClass(n).find(\"> .dialogContent\").height(o-t(\"> .dialogHeader\",a).outerHeight()-6),t(\"body\").find(\"> .bjui-dialog-container\").not(a).removeClass(n)},reload:function(a,i){var n,o=a.find(\"> .dialogContent\"),s=i&&i.data;if(i=i||a.data(\"initOptions\"),n=i.onLoad?i.onLoad.toFunc():null,a.trigger(BJUI.eventType.beforeLoadDialog),i.url)s&&(\"string\"==typeof s&&(s=s.trim().startsWith(\"{\")?s.toObj():s.toFunc()),\"function\"==typeof s&&(s=s.apply())),o.ajaxUrl({type:i.type||\"GET\",url:i.url,data:s||{},loadingmask:i.loadingmask,callback:function(t){n&&n.apply(e,[a]),BJUI.ui.clientPaging&&a.data(\"bjui.clientPaging\")&&a.pagination(\"setPagingAndOrderby\",a)}});else if(i.target){var r=t(i.target).html()||a.data(\"bjui.dialog.target\");t(i.target).empty(),a.data(\"bjui.dialog.target\",r),o.trigger(BJUI.eventType.beforeAjaxLoad).html(r).initui(),n&&n.apply(e,[a])}},resizeContent:function(e,a,i){var n=e.find(\"> .dialogContent\");n.css({width:a-12,height:i-e.find(\"> .dialogHeader\").outerHeight()-6}).resizePageH(),t(window).trigger(BJUI.eventType.resizeGrid)}};return a},s.prototype.open=function(){var e=this,a=e.options,n=t(\"body\"),s=n.data(a.id);if(a.target&&t(a.target).length)a.url=void 0;else{if(!a.url&&a.href&&(a.url=a.href),!a.url)return void BJUI.debug(\"Dialog Plugin: Error trying to open a dialog, url is undefined!\");if(a.url=decodeURI(a.url).replacePlh(e.$element.closest(\".unitBox\")),!a.url.isFinishedTm())return e.$element.alertmsg(\"error\",a.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"Dialog Plugin: The new dialog's url is incorrect, url: \"+a.url);a.url=encodeURI(a.url)}if(s){var r=s.data(\"initOptions\")||a;this.switchDialog(s),s.is(\":hidden\")&&s.show(),(r.fresh||a.fresh||!r.url||r.url!=a.url)&&(e.reload(a),s.data(\"initOptions\",a))}else{var l=BJUI.regional.dialog,d=FRAG.dialog.replace(\"#close#\",l.close).replace(\"#maximize#\",l.maximize).replace(\"#restore#\",l.restore).replace(\"#minimize#\",l.minimize).replace(\"#title#\",l.title);s=t(d).data(\"options\",a).data(\"initOptions\",a).css(\"zIndex\",o+=1).hide().appendTo(n),s.find(\"> .dialogHeader > h1 > span.title\").html(a.title),this.tools.init(s),a.maxable?s.find(\"a.maximize\").show():s.find(\"a.maximize\").hide(),a.minable?s.find(\"a.minimize\").show():s.find(\"a.minimize\").hide(),a.max&&e.maxsize(s),a.mask?this.addMask(s):a.minable&&t.fn.taskbar&&this.$element.taskbar({id:a.id,title:a.title}),s.on(\"click\",function(a){t(a.target).data(\"bjui.dialog\")||i&&i[0]!=s[0]&&e.switchDialog(s)}).on(\"click\",\".btn-close\",function(t){e.close(s),t.preventDefault()}).on(\"click\",\".dialogHeader > a\",function(a){var i=t(this);i.hasClass(\"close\")&&e.close(s),i.hasClass(\"minimize\")&&e.minimize(s),i.hasClass(\"maximize\")&&(e.switchDialog(s),e.maxsize(s)),i.hasClass(\"restore\")&&e.restore(s),a.preventDefault(),a.stopPropagation()}).on(\"dblclick\",\".dialogHeader > h1\",function(t){a.maxable&&(s.find(\"> .dialogHeader > a.restore\").is(\":hidden\")?s.find(\"a.maximize\").trigger(\"click\"):s.find(\"> .dialogHeader > a.restore\").trigger(\"click\"))}).on(\"mousedown.bjui.dialog.drag\",\".dialogHeader > h1\",function(i){e.switchDialog(s),a.drawable&&!s.data(\"max\")&&(s.data(\"bjui.dialog.task\",!0),setTimeout(t.proxy(function(){s.data(\"bjui.dialog.task\")&&e.drag(i,s)},e),150),i.preventDefault())}).on(\"mouseup.bjui.dialog.drag\",\".dialogHeader > h1\",function(t){s.data(\"bjui.dialog.task\",!1)}).on(\"mousedown.bjui.dialog.resize\",'div[class^=\"resizable\"]',function(i){if(!a.drawable||s.data(\"max\"))return!1;if(!a.resizable)return!1;var n=t(this);e.switchDialog(s),e.resizeInit(i,t(\"#bjui-resizable\"),s,n),n.show(),i.preventDefault()}).on(\"mouseup.bjui.dialog.resize\",'div[class^=\"resizable\"]',function(t){t.preventDefault()}),n.data(a.id,s),this.tools.reload(s,a)}t.CurrentDialog=i=s},s.prototype.addMask=function(e){var a=e.data(\"bjui.dialog.mask\");e.wrap('<div style=\"z-index:'+o+'\" class=\"bjui-dialog-wrap\"></div>'),e.find(\"> .dialogHeader > a.minimize\").hide(),a&&a.length||(a=t(FRAG.dialogMask),a.css(\"zIndex\",1).show().insertBefore(e),e.data(\"bjui.dialog.mask\",a))},s.prototype.refresh=function(e){if(e&&\"string\"==typeof e)for(var a=e.split(\",\"),n=0;n<a.length;n++){var o=t(\"body\").data(a[n].trim());o&&(o.removeData(\"bjui.clientPaging\"),this.tools.reload(o))}else i.removeData(\"bjui.clientPaging\"),this.tools.reload(i)},s.prototype.reload=function(e,a){var i=this,n=t.extend({},\"object\"==typeof e&&e),o=n.id&&t(\"body\").data(n.id)||i.getCurrent();if(o&&o.length){var s=o.data(\"initOptions\"),r=t.extend({},s,n),l=function(){var e=o.find(\"> .dialogContent\");s.width!=r.width&&(r.max?(o.width(r.width),e.width(r.width)):o.animate({width:r.width},\"normal\",function(){e.width(r.width)})),s.height!=r.height&&(r.max?(o.height(r.height),e.height(r.height-o.find(\"> .dialogHeader\").outerHeight()-6)):o.animate({height:r.height},\"normal\",function(){e.height(r.height-o.find(\"> .dialogHeader\").outerHeight()-6).resizePageH()})),s.maxable!=r.maxable&&(r.maxable?o.find(\"a.maximize\").show():o.find(\"a.maximize\").hide()),s.minable!=r.minable&&(r.minable?o.find(\"a.minimize\").show():o.find(\"a.minimize\").hide()),s.max!=r.max&&r.max&&setTimeout(i.maxsize(o),10),s.mask!=r.mask&&(r.mask?(i.addMask(o),t.fn.taskbar&&i.$element.taskbar(\"closeDialog\",r.id)):r.minable&&t.fn.taskbar&&i.$element.taskbar({id:r.id,title:r.title})),s.title!=r.title&&(o.find(\"> .dialogHeader > h1 > span.title\").html(r.title),o.taskbar(\"changeTitle\",r.id,r.title)),o.data(\"options\",r),a||o.data(\"initOptions\",r),i.tools.reload(o,r)};r.reloadWarn?o.alertmsg(\"confirm\",r.reloadWarn,{okCall:function(){l()}}):l()}},s.prototype.reloadForm=function(e,a){var i,n;if(\"string\"==typeof a?(i=t(\"body\").data(a),n=i.data(\"options\")):\"object\"==typeof a&&(i=a.id&&t(\"body\").data(a.id)||this.getCurrent()),i){\"object\"==typeof a&&(a.title&&i.find(\"> .dialogHeader > h1 > span.title\").html(a.title),n=t.extend({},a,i.data(\"options\")));var o=i.find(\"#pagerForm\"),s={},r={};if(o.attr(\"action\")&&(n.url=o.attr(\"action\")),o&&o.length){if(r=o.serializeJson(),a&&a.type||(n.type=o.attr(\"method\")||\"POST\"),e){var l=BJUI.pageInfo;for(var d in l)s[l[d]]=r[l[d]]}else s=r;n.data=t.extend({},n.data||{},s)}this.reload(n,!0)}},s.prototype.getCurrent=function(){return i},s.prototype.switchDialog=function(e){var a=e.css(\"zIndex\");if(i&&i!=e){var o=i.css(\"zIndex\");i.css(\"zIndex\",a),e.css(\"zIndex\",o),t.CurrentDialog=i=e,t.fn.taskbar&&this.$element.taskbar(\"switchTask\",e.data(\"options\").id)}e.addClass(n),t(\"body\").find(\"> .bjui-dialog-container\").not(e).removeClass(n)},s.prototype.close=function(e){var a=this,n=\"string\"==typeof e?t(\"body\").data(e):e,r=n.data(\"bjui.dialog.mask\"),l=n.data(\"options\"),d=n.data(\"bjui.dialog.target\"),c=l.beforeClose?l.beforeClose.toFunc():null,u=l.onClose?l.onClose.toFunc():null,h=!0;if(n&&l){if(c&&(h=c.apply(a,[n])),!h)return void a.switchDialog(n);l.target&&d&&t(l.target).html(d),r&&r.length?(r.remove(),n.unwrap()):t.fn.taskbar&&this.$element.taskbar(\"closeDialog\",l.id),n.animate({top:-n.outerHeight(),opacity:.1},\"normal\",function(){t(\"body\").removeData(l.id),n.trigger(BJUI.eventType.beforeCloseDialog).remove(),u&&u.apply(a);var e=t(\"body\").find(\".bjui-dialog-container\"),r=void 0;e.length?r=a.$element.getMaxIndexObj(e):(o=s.ZINDEX,i=null),r&&r.is(\":visible\")&&a.switchDialog(r)})}},s.prototype.closeCurrent=function(){this.close(i)},s.prototype.checkTimeout=function(){var t=i.find(\"> .dialogContent\"),e=JSON.parse(t.html());e&&e[BJUI.keys.statusCode]==BJUI.statusCode.timeout&&this.closeCurrent()},s.prototype.maxsize=function(e){e.data(\"original\",{top:e.css(\"top\"),left:e.css(\"left\"),width:e.css(\"width\"),height:e.css(\"height\")}).data(\"max\",!0),e.find(\"> .dialogHeader > a.maximize\").hide(),e.find(\"> .dialogHeader > a.restore\").show();var a=t(window).width(),i=t(window).height()-t(\"#bjui-taskbar\").height()-1;e.css({top:0,left:0,width:a,height:i}),this.tools.resizeContent(e,a,i)},s.prototype.restore=function(t){var e=t.data(\"original\"),a=parseInt(e.width),i=parseInt(e.height);t.css({top:e.top,left:e.left,width:a,height:i}),this.tools.resizeContent(t,a,i),t.find(\"> .dialogHeader > a.maximize\").show(),t.find(\"> .dialogHeader > a.restore\").hide(),t.data(\"max\",!1)},s.prototype.minimize=function(e){e.hide(),t.fn.taskbar&&this.$element.taskbar(\"minimize\",e)},s.prototype.drag=function(e,a){t(\"#bjui-dialogProxy\");a.find(\"> .dialogContent\").css(\"opacity\",\".3\"),a.basedrag({selector:\"> .dialogHeader\",stop:function(){a.css({left:a.css(\"left\"),top:a.css(\"top\")}).find(\"> .dialogContent\").css(\"opacity\",1)},event:e,nounbind:!0})},s.prototype.resizeDialog=function(e,a,i){var n,o=parseInt(e.css(\"left\")),s=parseInt(e.css(\"top\")),r=parseInt(e.css(\"height\")),l=parseInt(e.css(\"width\"));if(n=\"n\"==i||\"nw\"==i?parseInt(a.css(\"top\"))-s:r-parseInt(a.css(\"height\")),0>s&&(s=0),a.css({top:s,left:o,width:l+2,height:r+1}).find(\"> .dialogContent\").css(\"width\",l-10),\"w\"!=i&&\"e\"!=i){var d=a.find(\"> .dialogContent\");d.css({height:r-a.find(\"> .dialogHeader\").outerHeight()-6}).resizePageH()}t(window).trigger(BJUI.eventType.resizeGrid)},s.prototype.resizeInit=function(e,a,i,n){var o=this,s=n.attr(\"tar\");t(\"body\").css(\"cursor\",s+\"-resize\"),a.css({top:i.css(\"top\"),left:i.css(\"left\"),height:i.outerHeight(),width:i.css(\"width\")}).show(),this.options.dragCurrent||(this.options.dragCurrent={$resizable:a,$dialog:i,target:s,oleft:parseInt(a.css(\"left\"))||0,owidth:parseInt(a.css(\"width\"))||0,otop:parseInt(a.css(\"top\"))||0,oheight:parseInt(a.css(\"height\"))||0,ox:e.pageX||e.screenX,oy:e.pageY||e.clientY},t(document).on(\"mouseup.bjui.dialog.resize\",t.proxy(o.resizeStop,o)),t(document).on(\"mousemove.bjui.dialog.resize\",t.proxy(o.resizeStart,o)))},s.prototype.resizeStart=function(e){var a=this.options.dragCurrent;if(a){if(!e)var e=window.event;var i=(e.pageX||e.screenX)-a.ox,n=(e.pageY||e.clientY)-a.oy,o=a.$dialog.data(\"bjui.dialog.mask\");if(o&&o.length||!((e.pageY||e.clientY)<=0||(e.pageY||e.clientY)>=t(window).height()-a.$dialog.find(\"> .dialogHeader\").outerHeight())){\nvar s=a.target,r=a.owidth,l=a.oheight;\"n\"!=s&&\"s\"!=s&&(r+=s.indexOf(\"w\")>=0?-i:i),r>=this.options.minW&&(s.indexOf(\"w\")>=0&&a.$resizable.css(\"left\",a.oleft+i),\"n\"!=s&&\"s\"!=s&&a.$resizable.css(\"width\",r)),\"w\"!=s&&\"e\"!=s&&(l+=s.indexOf(\"n\")>=0?-n:n),l>=this.options.minH&&(s.indexOf(\"n\")>=0&&a.$resizable.css(\"top\",a.otop+n),\"w\"!=s&&\"e\"!=s&&a.$resizable.css(\"height\",l))}}},s.prototype.resizeStop=function(e){var a=this.options.dragCurrent;return a?(t(document).off(\"mouseup.bjui.dialog.resize\"),t(document).off(\"mousemove.bjui.dialog.resize\"),this.options.dragCurrent=null,this.resizeDialog(a.$resizable,a.$dialog,a.target),t(\"body\").css(\"cursor\",\"\"),void a.$resizable.hide()):!1};var r=t.fn.dialog;t.fn.dialog=e,t.fn.dialog.Constructor=s,t.fn.dialog.noConflict=function(){return t.fn.dialog=r,this},t(document).on(\"click.bjui.dialog.data-api\",'[data-toggle=\"dialog\"]',function(a){var i=t(this),n=i.attr(\"href\"),o=i.data(),s=o.options;s&&(\"string\"==typeof s&&(s=s.toObj()),\"object\"==typeof s&&t.extend(o,s)),o.title||(o.title=i.text()),n&&!o.url&&(o.url=n),e.call(i,o),a.preventDefault()})}(jQuery),+function(t){\"use strict\";function e(e){var a=arguments,i=e;return this.each(function(){var n=t(this),o=t.extend({},u.DEFAULTS,n.data(),\"object\"==typeof e&&e),s=n.data(\"bjui.taskbar\");s?s.options.id!=o.id&&n.data(\"bjui.taskbar\",s=new u(this,o)):n.data(\"bjui.taskbar\",s=new u(this,o)),\"string\"==typeof i&&t.isFunction(s[i])?([].shift.apply(a),a?s[i].apply(s,a):s[i]()):s.init()})}var a,i,n,o,s,r,l,d,c;t(function(){var e=function(){a=t(\"#bjui-resizable\"),i=t(FRAG.taskbar),n=i.find(\".taskbarContent\"),o=n.find(\"> ul\"),s=i.find(\".taskbarLeft\"),r=i.find(\".taskbarRight\"),l=\"disabled\",d=\"selected\",c=\"taskbarMargin\",t(\"body\").append(\"<!-- dialog task bar -->\").append(i),s.click(function(e){t(this).taskbar(\"scrollLeft\")}),r.click(function(e){t(this).taskbar(\"scrollRight\")})};e()});var u=function(e,a){this.$element=t(e),this.$task=null,this.options=a,this.tools=this.TOOLS()};u.DEFAULTS={id:void 0,title:void 0},u.prototype.init=function(){var e=this,a=o.find(\"#\"+this.options.id);if(this.show(),a.length)a.find(\"> div > span.title\").html(this.options.title);else{var i='<li id=\"#taskid#\"><div class=\"taskbutton\"><span><i class=\"fa fa-th-large\"></i></span> <span class=\"title\">#title#</span></div><div class=\"close\"><i class=\"fa fa-times-circle\"></i></div></li>';a=t(i.replace(\"#taskid#\",this.options.id).replace(\"#title#\",this.options.title)),a.appendTo(o)}this.contextmenu(a),this.switchTask(a),this.tools.scrollTask(a),a.click(function(i){if(t(i.target).closest(\"div\").hasClass(\"close\")||t(i.target).hasClass(\"close\"))a.dialog(\"close\",e.options.id);else{var n=t(\"body\").data(e.options.id);a.hasClass(\"selected\")?n.find(\".dialogHeader a.minimize\").trigger(\"click\"):n.is(\":hidden\")?e.restoreDialog(n):(n.trigger(\"click\"),a.addClass(d)),e.scrollCurrent(a)}return!1})},u.prototype.TOOLS=function(){var e={scrollCurrent:function(){var t=this.tasksW(this.getTasks());if(t>this.getTaskBarW()){var e=this,a=o.find(\"> li:last-child\"),i=this.getTaskBarW()-a.position().left-a.outerWidth(!0);o.animate({left:i},200,function(){e.ctrlScrollBtn()})}else this.ctrlScrollBtn()},getTaskBarW:function(){return n.width()-(s.is(\":hidden\")?s.width()+2:0)-(r.is(\":hidden\")?r.width()+2:0)},scrollTask:function(t){var e=this;if(t.position().left+this.getLeft()+t.outerWidth()>this.getBarWidth()){var a=this.getTaskBarW()-t.position().left-t.outerWidth(!0)-2;o.animate({left:a},200,function(){e.ctrlScrollBtn()})}else if(t.position().left+this.getLeft()<0){var a=this.getLeft()-(t.position().left+this.getLeft());o.animate({left:a},200,function(){e.ctrlScrollBtn()})}},ctrlScrollBtn:function(){var t=this.tasksW(this.getTasks());this.getTaskBarW()>t?(n.removeClass(c),r.hide(),s.hide(),this.getTasks().eq(0).length&&this.scrollTask(this.getTasks().eq(0))):(n.addClass(c),r.show().removeClass(l),s.show().removeClass(l),this.getLeft()>=0&&s.addClass(l),this.getLeft()<=this.getTaskBarW()-t&&r.addClass(l))},getLeft:function(){return o.position().left},visibleStart:function(){for(var t=this.getLeft(),e=this.getTasks(),a=0;a<e.size();a++)if(e.eq(a).position().left+e.eq(a).outerWidth(!0)+t>=0)return e.eq(a);return e.eq(0)},visibleEnd:function(){for(var t=this.getLeft(),e=this.getTasks(),a=0;a<e.size();a++)if(e.eq(a).position().left+e.eq(a).outerWidth(!0)+t>this.getBarWidth())return e.eq(a);return e.eq(e.size()-1)},getTasks:function(){return o.find(\"> li\")},tasksW:function(e){var a=0;return e.each(function(){a+=t(this).outerWidth(!0)}),a},getBarWidth:function(){return i.innerWidth()},getCurrent:function(){return o.find(\"li.\"+d)}};return e},u.prototype.contextmenu=function(e){var a=this;e.contextmenu({id:\"dialogCM\",bindings:{reload:function(t){t.dialog(\"refresh\",a.options.id)},closeCurrent:function(t,e){var i=t.isTag(\"li\")?t:a.tools.getCurrent();i.find(\".close\").trigger(\"click\")},closeOther:function(e,a){var i=o.find(\"> li\").not(e);i.each(function(e){t(this).find(\".close\").trigger(\"click\")})},closeAll:function(e,i){var n=a.tools.getTasks();n.each(function(e){t(this).find(\".close\").trigger(\"click\")})}},ctrSub:function(t,e){var i=e.find('[rel=\"closeCurrent\"]'),n=e.find('[rel=\"closeOther\"]');a.tools.getCurrent().length?1==a.tools.getTasks().size()&&n.addClass(l):(i.addClass(l),n.addClass(l))}})},u.prototype.closeDialog=function(t){var e=\"string\"==typeof t?this.getTask(t):t;e&&e.length&&(e.remove(),0==this.tools.getTasks().size()&&this.hide(),this.tools.scrollCurrent(),this.$element.removeData(\"bjui.taskbar\"))},u.prototype.minimize=function(e){var i=this,n=\"string\"==typeof e?t(\"body\").data(\"dialog\"):e,o=this.getTask(n.data(\"options\").id);a.css({top:n.css(\"top\"),left:n.css(\"left\"),height:n.css(\"height\"),width:n.css(\"width\")}).show().animate({top:t(window).height()-60,left:o.position().left,width:o.outerWidth(),height:o.outerHeight()},250,function(){t(this).hide(),i.inactive(o)})},u.prototype.restoreDialog=function(e){var i=this.getTask(e.data(\"options\").id);a.css({top:t(window).height()-60,left:i.position().left,height:i.outerHeight(),width:i.outerWidth()}).show().animate({top:e.css(\"top\"),left:e.css(\"left\"),width:e.css(\"width\"),height:e.css(\"height\")},250,function(){t(this).hide(),e.show()}),this.switchTask(i)},u.prototype.inactive=function(t){var e=\"string\"==typeof t?this.getTask(t):t;e.removeClass(d)},u.prototype.scrollLeft=function(){var t=this.tools.visibleStart();this.tools.scrollTask(t)},u.prototype.scrollRight=function(){var t=this.tools.visibleEnd();this.tools.scrollTask(t)},u.prototype.scrollCurrent=function(t){this.tools.scrollTask(t)},u.prototype.switchTask=function(t){this.tools.getCurrent().removeClass(d);var e=\"string\"==typeof t?this.getTask(t):t;e.addClass(d)},u.prototype.getTask=function(t){return o.find(\"#\"+t)},u.prototype.changeTitle=function(t,e){var a=this.getTask(t);a&&e&&a.find(\".title\").html(e)},u.prototype.show=function(){i.is(\":hidden\")&&i.show().animate({bottom:0},500)},u.prototype.hide=function(){i.is(\":visible\")&&i.animate({bottom:-50},500,function(){i.hide()})};var h=t.fn.taskbar;t.fn.taskbar=e,t.fn.taskbar.Constructor=u,t.fn.taskbar.noConflict=function(){return t.fn.taskbar=h,this}}(jQuery),+function(t){\"use strict\";function e(e){var a=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},i.DEFAULTS,\"object\"==typeof e&&e),r=o.data(\"bjui.bjuiajax\");r||o.data(\"bjui.bjuiajax\",r=new i(this,s)),\"string\"==typeof n&&t.isFunction(r[n])&&([].shift.apply(a),a?r[n].apply(r,a):r[n]())})}var a,i=function(e,a){this.$element=t(e),this.options=a,this.tools=this.TOOLS()};i.DEFAULTS={reload:!0,loadingmask:!0},i.NAVTAB=\"navtab\",i.prototype.TOOLS=function(){var e=this,a={getPagerForm:function(e,a){var i=e.isTag(\"form\")?e[0]:e.find(\"#pagerForm:first\")[0],n=t.extend({},BJUI.pageInfo);if(e.data(\"bjui.clientPaging\")&&(a=t.extend({},e.data(\"bjui.clientPaging\"),a),e.data(\"bjui.clientPaging\",a)),i)for(var o in n){var s=\"\";a&&a[o]&&(s=a[o]),i[n[o]]?s&&(i[n[o]].value=s):t('<input type=\"hidden\" name=\"'+n[o]+'\" value=\"'+s+'\">').appendTo(t(i))}return i},getTarget:function(){return e.$element.closest(\".navtab-panel\").length?i.NAVTAB:\"dialog\"}};return a},i.prototype.ajaxForm=function(e){var a=this,i=this.$element,n=e&&e.callback,o=i.attr(\"enctype\");t.extend(a.options,\"object\"==typeof e&&e),n&&(n=n.toFunc());var s=function(e,o,s){n?n.apply(a,[e,i]):t.proxy(a.ajaxCallback(e),a)},r=function(){var e={loadingmask:a.options.loadingmask,type:i.attr(\"method\"),url:i.attr(\"action\"),callback:s,error:t.proxy(a.ajaxError,a)};o&&\"multipart/form-data\"==o?window.FormData?t.extend(e,{data:new FormData(i[0]),contentType:!1,processData:!1}):t.extend(e,{data:i.serializeArray(),files:i.find(\":file\"),iframe:!0,processData:!1}):t.extend(e,{data:i.serializeArray()}),-[1]||i[0].getAttributeNode(\"method\").specified||(e.type=\"post\"),a.options.ajaxTimeout&&(e.ajaxTimeout=a.options.ajaxTimeout),i.doAjax(e)};a.options.confirmMsg?i.alertmsg(\"confirm\",a.options.confirmMsg,{okCall:r}):r()},i.prototype.ajaxDone=function(t){var e=this.$element;t[BJUI.keys.statusCode]==BJUI.statusCode.error?t[BJUI.keys.message]&&e.alertmsg(\"error\",t[BJUI.keys.message]):t[BJUI.keys.statusCode]==BJUI.statusCode.timeout?(e.alertmsg(\"info\",t[BJUI.keys.message]||FRAG.sessionTimout),BJUI.loadLogin()):t[BJUI.keys.message]&&e.alertmsg(\"correct\",t[BJUI.keys.message])},i.prototype.ajaxError=function(t,e,a){var i=t.responseText;\"string\"==typeof i&&i.startsWith(\"{\")?this.ajaxDone(i.toObj()):this.$element.alertmsg(\"error\",\"<div>Http status: \"+t.status+\" \"+t.statusText+\"</div><div>ajaxOptions: \"+e+\" </div><div>thrownError: \"+a+\" </div><div>\"+i+\"</div>\")},i.prototype.ajaxCallback=function(t){var e=this,a=e.$element,n=a.closest(\".bjui-layout\");e.ajaxDone(t),t[BJUI.keys.statusCode]==BJUI.statusCode.ok&&(n&&n.length?e.divCallback(t,n):e.tools.getTarget()==i.NAVTAB?e.navtabCallback(t):e.dialogCallback(t))},i.prototype.divCallback=function(e,a){var i=this;if(e.tabid&&setTimeout(function(){i.$element.navtab(\"reloadFlag\",e.tabid)},100),e.dialogid&&setTimeout(function(){i.$element.dialog(\"refresh\",e.dialogid)},100),e.divid&&setTimeout(function(){i.$element.bjuiajax(\"refreshDiv\",e.divid)},100),e.datagrid&&setTimeout(function(){t.each(e.datagrid.split(\",\"),function(e,a){t(\"#\"+a.trim()).datagrid(\"refresh\")})},100),i.options.reload&&!e.forward){var n=i.tools.getPagerForm(a),o=null,s=null;n?(o=n.attr(\"action\"),s=n.attr(\"method\")||\"GET\"):(o=a.data(\"url\"),s=a.data(\"type\")||\"GET\"),o&&a.ajaxUrl({url:o,type:s})}if(i.options.reloadNavtab&&setTimeout(function(){i.$element.navtab(\"refresh\")},100),e.forward){var r=function(){a.ajaxUrl({url:e.forward})};e.forwardConfirm?i.$element.alertmsg(\"confirm\",e.forwardConfirm,{okCall:function(){r()}}):r()}},i.prototype.navtabCallback=function(e){var a=this;if(e.tabid&&setTimeout(function(){a.$element.navtab(\"reloadFlag\",e.tabid)},100),e.dialogid&&setTimeout(function(){a.$element.dialog(\"refresh\",e.dialogid)},100),e.divid&&setTimeout(function(){a.$element.bjuiajax(\"refreshDiv\",e.divid)},100),e.datagrid&&setTimeout(function(){t.each(e.datagrid.split(\",\"),function(e,a){t(\"#\"+a.trim()).datagrid(\"refresh\")})},100),e.closeCurrent&&!e.forward?a.$element.navtab(\"closeCurrentTab\"):a.options.reload&&!e.forward&&setTimeout(function(){a.$element.navtab(\"refresh\")},100),e.forward){var i=function(){a.$element.navtab(\"reload\",{url:e.forward})};e.forwardConfirm?a.$element.alertmsg(\"confirm\",e.forwardConfirm,{okCall:function(){i()},cancelCall:function(){e.closeCurrent&&a.$element.navtab(\"closeCurrentTab\")}}):i()}},i.prototype.dialogCallback=function(e){var a=this;if(e.tabid&&setTimeout(function(){a.$element.navtab(\"reloadFlag\",e.tabid)},100),e.dialogid&&setTimeout(function(){a.$element.dialog(\"refresh\",e.dialogid)},100),e.divid&&setTimeout(function(){a.$element.bjuiajax(\"refreshDiv\",e.divid)},100),e.datagrid&&setTimeout(function(){t.each(e.datagrid.split(\",\"),function(e,a){t(\"#\"+a.trim()).datagrid(\"refresh\")})},100),e.closeCurrent&&!e.forward?a.$element.dialog(\"closeCurrent\"):a.options.reload&&!e.forward&&setTimeout(function(){a.$element.dialog(\"refresh\")},100),a.options.reloadNavtab&&setTimeout(function(){a.$element.navtab(\"refresh\")},100),e.forward){var i=function(){a.$element.dialog(\"reload\",{url:e.forward})};e.forwardConfirm?a.$element.alertmsg(\"confirm\",e.forwardConfirm,{okCall:function(){i()}}):i()}},i.prototype.pageCallback=function(e,a){var n=this,o=t.extend({},i.DEFAULTS,e),s=a||null,r=null;s&&s.length?(r=n.tools.getPagerForm(s,o),r&&(t.extend(o,t(r).data()),n.reloadDiv(s,{type:t(r).attr(\"method\")||\"POST\",url:t(r).attr(\"action\"),data:t(r).serializeArray(),loadingmask:o.loadingmask}))):n.tools.getTarget()==i.NAVTAB?(s=t.CurrentNavtab,r=n.tools.getPagerForm(s,o),r&&t.extend(o,t(r).data()),n.$element.navtab(\"reloadForm\",!1,o)):(s=t.CurrentDialog,r=n.tools.getPagerForm(s,o),r&&t.extend(o,t(r).data()),n.$element.dialog(\"reloadForm\",!1,o))},i.prototype.doSearch=function(e){var a=this,n=a.$element,o=null,s={pageCurrent:1},r=n.closest(\".bjui-layout\"),l=e.isValid;if(e=t.extend({},i.DEFAULTS,\"object\"==typeof e&&e),e.url||(e.url=n.attr(\"action\")),!e.url)return void BJUI.debug(\"Error trying to submit form action: action url is undefined!\");if(e.url=decodeURI(e.url).replacePlh(n.closest(\".unitBox\")),!e.url.isFinishedTm())return n.alertmsg(\"error\",e.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"The submit form action is incorrect: \"+e.url);e.url=encodeURI(e.url);var d=function(){if(r&&r.length){o=a.tools.getPagerForm(r,s);var l=n.serializeJson(),d={};if(e.clearQuery){var c=BJUI.pageInfo;for(var u in c)d[c[u]]=l[c[u]];l=d}a.reloadDiv(r,{type:n.attr(\"method\")||\"POST\",url:e.url,data:l,loadingmask:e.loadingmask})}else a.tools.getTarget()==i.NAVTAB?(r=t.CurrentNavtab,o=a.tools.getPagerForm(r,s),n.navtab(\"reloadForm\",e.clearQuery,e)):(r=t.CurrentDialog,o=a.tools.getPagerForm(r,s),n.dialog(\"reloadForm\",e.clearQuery,e))};l?d():t.validator?n.isValid(function(t){t&&d()}):d()},i.prototype.doLoad=function(e){var a=this,n=a.$element,o=e.target?t(e.target):null;return e=t.extend({},i.DEFAULTS,\"object\"==typeof e&&e),e.url?(e.url=decodeURI(e.url).replacePlh(n.closest(\".unitBox\")),e.url.isFinishedTm()?(e.url=encodeURI(e.url),o&&o.length?void(o&&o.length&&(o.removeData(\"bjui.clientPaging\"),a.reloadDiv(o,e))):void BJUI.debug(\"Not set loaded 'ajax' content container, like [data-target].\")):(n.alertmsg(\"error\",e.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"The ajax link incorrect: \"+e.url))):void BJUI.debug(\"Error trying to open a ajax link: The url is undefined!\")},i.prototype.refreshLayout=function(e){var n=this,o=(n.$element,e.target?t(e.target):null);return e=t.extend({},i.DEFAULTS,\"object\"==typeof e&&e),o&&o.length?void(o&&o.length&&(o.removeData(\"bjui.clientPaging\"),n.reloadDiv(o,t.extend({},o.data(\"options\")||{},e)))):(a&&clearInterval(a),void BJUI.debug(\"Not set loaded 'ajax' content container, like [data-target].\"))},i.prototype.reloadDiv=function(t,e){var i=e.autorefresh&&(isNaN(String(e.autorefresh))?15:e.autorefresh);t.addClass(\"bjui-layout\").data(\"options\",e).ajaxUrl({type:e.type,url:e.url,data:e.data,loadingmask:e.loadingmask,callback:function(n){BJUI.ui.clientPaging&&t.data(\"bjui.clientPaging\")&&t.pagination(\"setPagingAndOrderby\",t),e.callback&&e.callback.apply(this,[t,n]),a&&clearInterval(a),i&&(a=setInterval(function(){t.bjuiajax(\"refreshLayout\",e)},1e3*i))}})},i.prototype.refreshDiv=function(t){if(t&&\"string\"==typeof t)for(var e=t.split(\",\"),a=0;a<e.length;a++)this.refreshLayout({target:\"#\"+e[a]})},i.prototype.doAjax=function(e){var a=this,n=a.$element;if(e=t.extend({},i.DEFAULTS,\"object\"==typeof e&&e),a.options=e,!e.url)return void BJUI.debug(\"Error trying to open a ajax link: url is undefined!\");if(e.url=decodeURI(e.url).replacePlh(n.closest(\".unitBox\")),!e.url.isFinishedTm())return n.alertmsg(\"error\",e.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"The ajax url is incorrect: \"+e.url);e.url=encodeURI(e.url);var o=e.callback&&e.callback.toFunc(),s=function(){n.doAjax({type:e.type,url:e.url,data:e.data,callback:o?o:t.proxy(function(t){a.ajaxCallback(t)},a)})};e.confirmMsg?n.alertmsg(\"confirm\",e.confirmMsg,{okCall:function(){s()}}):s()},i.prototype.ajaxdownload=function(e){var a=this,n=a.$element,o=n.getPageTarget();if(e||(e={}),e.loadingmask||(e.loadingmask=!1),e=t.extend({},i.DEFAULTS,\"object\"==typeof e&&e),a.options=e,!e.url)return void BJUI.debug(\"Error trying to download a file: url is undefined!\");if(e.url=decodeURI(e.url).replacePlh(n.closest(\".unitBox\")),!e.url.isFinishedTm())return n.alertmsg(\"error\",e.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"The ajax download url is incorrect: \"+e.url);var s=function(){var i={};i.failCallback=function(t,e){t.trim().startsWith(\"{\")&&(t=t.toObj()),a.ajaxDone(t),o.trigger(\"bjui.ajaxError\")},i.prepareCallback=function(t){e.loadingmask&&o.trigger(\"bjui.ajaxStart\")},i.successCallback=function(t){o.trigger(\"bjui.ajaxStop\")},t.extend(i,e),i.data||(i.data={}),\"undefined\"==typeof i.data.ajaxrequest&&(i.data.ajaxrequest=!0),t.fileDownload(e.url,i)};e.confirmMsg?n.alertmsg(\"confirm\",e.confirmMsg,{okCall:function(){s()}}):s()},i.prototype.doExport=function(e){var a,n=this,o=n.$element,s=e.target?t(e.target):null;if(!e.url)return void BJUI.debug(\"Error trying to open a ajax link: url is undefined!\");if(e.url=decodeURI(e.url).replacePlh(o.closest(\".unitBox\")),!e.url.isFinishedTm())return o.alertmsg(\"error\",e.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"The ajax url is incorrect: \"+e.url);var r=function(){s&&s.length||(s=n.tools.getTarget()==i.NAVTAB?t.CurrentNavtab:t.CurrentDialog),a=n.tools.getPagerForm(s),a&&(e.url=encodeURI(e.url+(-1==e.url.indexOf(\"?\")?\"?\":\"&\")+t(a).serialize())),t.fileDownload(e.url,{failCallback:function(t,e){t.trim().startsWith(\"{\")&&(t=t.toObj()),n.ajaxDone(t)}})};e.confirmMsg?o.alertmsg(\"confirm\",e.confirmMsg,{okCall:function(){r()}}):r()},i.prototype.doExportChecked=function(e){var a=this,n=a.$element,o=e.target?t(e.target):null;if(!e.url)return void BJUI.debug(\"Error trying to open a export link: url is undefined!\");if(e.url=decodeURI(e.url).replacePlh(n.closest(\".unitBox\")),!e.url.isFinishedTm())return n.alertmsg(\"error\",e.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"The ajax url is incorrect: \"+e.url);var s=function(){if(!e.group)return void a.$element.alertmsg(\"error\",e.warn||FRAG.alertNoCheckGroup.replace(\"#nocheckgroup#\",BJUI.regional.nocheckgroup));o&&o.length||(o=a.tools.getTarget()==i.NAVTAB?t.CurrentNavtab:t.CurrentDialog);var n=[],s=o.find(\":checkbox[name=\"+e.group+\"]:checked\");return 0==s.length?void a.$element.alertmsg(\"error\",FRAG.alertNotChecked.replace(\"#notchecked#\",BJUI.regional.notchecked)):(s.each(function(){n.push(t(this).val())}),e.url=e.url.setUrlParam(e.idname?e.idname:\"ids\",n.join(\",\")),void t.fileDownload(e.url,{failCallback:function(t,e){t.trim().startsWith(\"{\")&&(t=t.toObj()),a.ajaxDone(t)}}))};e.confirmMsg?n.alertmsg(\"confirm\",e.confirmMsg,{okCall:function(){s()}}):s()},i.prototype.doAjaxChecked=function(e){var a=this,n=a.$element,o=e.target?t(e.target):null;if(e=t.extend({},i.DEFAULTS,\"object\"==typeof e&&e),!e.url)return void BJUI.debug(\"Error trying to open a del link: url is undefined!\");if(e.url=decodeURI(e.url).replacePlh(n.closest(\".unitBox\")),!e.url.isFinishedTm())return n.alertmsg(\"error\",e.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"The ajax url is incorrect: \"+e.url);var s=function(){if(!e.group)return void n.alertmsg(\"error\",e.warn||FRAG.alertNoCheckGroup.replace(\"#nocheckgroup#\",BJUI.regional.nocheckgroup));o&&o.length||(o=a.tools.getTarget()==i.NAVTAB?t.CurrentNavtab:t.CurrentDialog);var s=[],r=o.find(\":checkbox[name=\"+e.group+\"]:checked\"),l=e.callback&&e.callback.toFunc();return 0==r.length?void n.alertmsg(\"error\",FRAG.alertNotChecked.replace(\"#notchecked#\",BJUI.regional.notchecked)):(r.each(function(){s.push(t(this).val())}),e.url=e.url.setUrlParam(e.idname?e.idname:\"ids\",s.join(\",\")),void n.doAjax({type:e.type,url:e.url,data:e.data,callback:l?l:t.proxy(function(t){a.ajaxCallback(t)},a)}))};e.confirmMsg?n.alertmsg(\"confirm\",e.confirmMsg,{okCall:function(){s()}}):s()};var n=t.fn.bjuiajax;t.fn.bjuiajax=e,t.fn.bjuiajax.Constructor=i,t.fn.bjuiajax.noConflict=function(){return t.fn.bjuiajax=n,this},t(document).on(\"submit.bjui.bjuiajax.data-api\",'form[data-toggle=\"ajaxform\"]',function(a){var i=t(this),n=i.data();e.call(i,\"ajaxForm\",n),a.preventDefault()}),t(function(){t.validator?t(document).on(BJUI.eventType.initUI,function(a){t(a.target).find('form[data-toggle=\"ajaxsearch\"]').each(function(){var a=t(this),i=a.data();i.isValid=!0,a.validator({valid:function(t){e.call(a,\"doSearch\",i)}})})}):t(document).on(\"submit.bjui.bjuiajax.data-api\",'form[data-toggle=\"ajaxsearch\"]',function(a){var i=t(this),n=i.data();e.call(i,\"doSearch\",n),a.preventDefault()})}),t(document).on(\"click.bjui.bjuiajax.data-api\",'[data-toggle=\"reloadsearch\"]',function(a){var i,n=t(this),o=n.closest(\"form\");o&&o.length&&(i=o.data(),i.clearQuery=n.data(\"clearQuery\")||!0,e.call(o,\"doSearch\",i),a.preventDefault())}),t(document).on(\"click.bjui.bjuiajax.data-api\",'[data-toggle=\"ajaxload\"]',function(a){var i=t(this),n=i.data();n.url||(n.url=i.attr(\"href\")),e.call(i,\"doLoad\",n),a.preventDefault()}),t(document).on(BJUI.eventType.initUI,function(a){var i=t(a.target).find('[data-toggle=\"autoajaxload\"]');i.each(function(){var a=t(this),i=a.data();i.target=this,e.call(a,\"doLoad\",i)})}),t(document).on(\"click.bjui.bjuiajax.data-api\",'[data-toggle=\"refreshlayout\"]',function(a){var i=t(this),n=i.data();e.call(i,\"refreshLayout\",n)}),t(document).on(\"click.bjui.bjuiajax.data-api\",'[data-toggle=\"doajax\"]',function(a){var i=t(this),n=i.data();n.url||(n.url=i.attr(\"href\")),e.call(i,\"doAjax\",n),a.preventDefault()}),t(document).on(\"click.bjui.bjuiajax.data-api\",'[data-toggle=\"ajaxdownload\"]',function(a){var i=t(this),n=i.data();n.url||(n.url=i.attr(\"href\")),e.call(i,\"ajaxdownload\",n),a.preventDefault()}),t(document).on(\"click.bjui.bjuiajax.data-api\",'[data-toggle=\"doexport\"]',function(a){var i=t(this),n=i.data();n.url||(n.url=i.attr(\"href\")),e.call(i,\"doExport\",n),a.preventDefault()}),t(document).on(\"click.bjui.bjuiajax.data-api\",'[data-toggle=\"doexportchecked\"]',function(a){var i=t(this),n=i.data();n.url||(n.url=i.attr(\"href\")),e.call(i,\"doExportChecked\",n),a.preventDefault()}),t(document).on(\"click.bjui.bjuiajax.data-api\",'[data-toggle=\"doajaxchecked\"]',function(a){var i=t(this),n=i.data();n.url||(n.url=i.attr(\"href\")),e.call(i,\"doAjaxChecked\",n),a.preventDefault()})}(jQuery),+function(t){\"use strict\";function e(e){var a=arguments,i=e;return this.each(function(){var n=t(this),s=t.extend({},o.DEFAULTS,n.data(),\"object\"==typeof e&&e),r=new o(this,s);\"string\"==typeof i&&t.isFunction(r[i])&&([].shift.apply(a),a?r[i].apply(r,a):r[i]())})}var a,i,n;t(function(){var e=function(){a=t(FRAG.alertBoxFrag).hide().html(\"\"),i=t(FRAG.alertBackground).hide().html(\"\"),t(\"body\").append(\"<!-- alert msg box -->\").append(a).append(\"<!-- alert msg box mask bg -->\").append(i)};e()});var o=function(e,a){this.$element=t(e),this.options=a,this.tools=this.TOOLS(),this.clearTime=null};o.DEFAULTS={displayPosition:\"topcenter\",displayMode:\"slide\",autoClose:null,alertTimeout:3e3,mask:null,types:{error:\"error\",info:\"info\",warn:\"warn\",correct:\"correct\",confirm:\"confirm\"},fas:{error:\"fa-times-circle\",info:\"fa-info-circle\",warn:\"fa-exclamation-circle\",correct:\"fa-check-circle\",confirm:\"fa-question-circle\"}},o.prototype.TOOLS=function(){var e=this,o=e.options,s={getTitle:function(t){return o.title||BJUI.regional.alertmsg.title[t]},keydownOk:function(t){return t.which==BJUI.keyCode.ENTER?(t.data.target.trigger(\"click\"),!1):!0},keydownEsc:function(t){t.which==BJUI.keyCode.ESC&&t.data.target.trigger(\"click\")},openPosition:function(){var t=BJUI.alertMsg.displayPosition,e=BJUI.alertMsg.displayMode,i=460,n=a.outerHeight(),s={},r={};switch(t?o.displayPosition&&\"topcenter\"!=o.displayPosition&&(t=o.displayPosition):t=o.displayPosition,e?o.displayMode&&\"silde\"!=o.displayMode&&(e=o.displayMode):e=o.displayMode,t){case\"topleft\":s={top:0-n,left:0,\"margin-left\":0},r={top:0};break;case\"topcenter\":s={top:0-n},r={top:0};break;case\"topright\":s={top:0-n,left:\"auto\",right:0,\"margin-left\":0},r={top:0};break;case\"middleleft\":s={top:\"50%\",left:0-i,\"margin-left\":0,\"margin-top\":0-n/2},r={left:0};break;case\"middlecenter\":s={top:\"0\",\"margin-top\":0-n/2},r={top:\"50%\"};break;case\"middleright\":s={top:\"50%\",left:\"auto\",right:0-i,\"margin-top\":0-n/2},r={right:0};break;case\"bottomleft\":s={top:\"auto\",left:0,bottom:0-n,\"margin-left\":0},r={bottom:0};break;case\"bottomcenter\":s={top:\"auto\",bottom:0-n},r={bottom:0};break;case\"bottomright\":s={top:\"auto\",left:\"auto\",right:0,bottom:0-n,\"margin-left\":0},r={bottom:0}}\"slide\"==e?a.css(s).show().animate(r,500):\"fade\"==e?(s.opacity=.1,a.css(s).css(r).show().animate({opacity:1},500)):a.css(s).css(r).show()},closePosition:function(){var e=BJUI.alertMsg.displayPosition,n=BJUI.alertMsg.displayMode,s=460,r=a.outerHeight(),l={};switch(e?o.displayPosition&&\"topcenter\"!=o.displayPosition&&(e=o.displayPosition):e=o.displayPosition,n?o.displayMode&&\"silde\"!=o.displayMode&&(n=o.displayMode):n=o.displayMode,e){case\"topleft\":l={top:0-r};break;case\"topcenter\":l={top:0-r};break;case\"topright\":l={top:0-r};break;case\"middleleft\":l={left:0-s};break;case\"middlecenter\":l={top:0-r};break;case\"middleright\":l={right:0-s};break;case\"bottomleft\":l={bottom:0-r};break;case\"bottomcenter\":l={bottom:0-r};break;case\"bottomright\":l={bottom:0-r}}\"slide\"==n?a.animate(l,500,function(){i.hide(),t(this).hide().empty()}):\"fade\"==n?a.animate({opacity:0},500,function(){i.hide(),t(this).hide().empty()}):(a.hide().remove(),i.hide())},open:function(s,r,l){var d,c,u=this,h=\"\",p=BJUI.alertMsg.alertTimeout;if(l)for(var f=0;f<l.length;f++){var g=l[f].call?\"callback\":\"\",m=l[f].cls?l[f].cls:\"default\",b=l[f].cls&&\"green\"==l[f].cls?\"check\":\"close\";h+=FRAG.alertBtnFrag.replace(\"#btnMsg#\",'<i class=\"fa fa-'+b+'\"></i> '+l[f].name).replace(\"#callback#\",g).replace(\"#class#\",m)}d=t(FRAG.alertBoxFrag.replace(\"#type#\",s).replace(\"#fa#\",o.fas[s]).replace(\"#title#\",this.getTitle(s)).replace(\"#message#\",r).replace(\"#btnFragment#\",h)).hide().appendTo(\"body\"),a&&a.length&&a.remove(),a=d,u.openPosition(),n&&(clearTimeout(n),n=null),null==o.mask&&o.types.info!=s&&o.types.correct!=s&&i.show(),null==o.autoClose&&(o.types.info==s||o.types.correct==s)&&(p?o.alertTimeout&&3e3!=o.alertTimeout&&(p=o.alertTimeout):p=o.alertTimeout,n=setTimeout(function(){u.close()},p)),c=a.find(\".btn\"),c.each(function(a){t(this).on(\"click\",t.proxy(function(){e.tools.close();var t=l[a].call;\"string\"==typeof t&&(t=t.toFunc()),\"function\"==typeof t&&t.call()},e)),l[a].keyCode==BJUI.keyCode.ENTER&&t(document).on(\"keydown.bjui.alertmsg.ok\",{target:c.eq(a)},u.keydownOk),l[a].keyCode==BJUI.keyCode.ESC&&t(document).on(\"keydown.bjui.alertmsg.esc\",{target:c.eq(a)},u.keydownEsc)})},alert:function(e,a,i){t.extend(o,\"object\"==typeof i&&i);var n=t.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null},o),s=[{name:n.okName,call:n.okCall,cls:\"default\",keyCode:BJUI.keyCode.ENTER}];this.open(e,a,s)},close:function(){t(document).off(\"keydown.bjui.alertmsg.ok\").off(\"keydown.bjui.alertmsg.esc\"),this.closePosition()}};return s},o.prototype.error=function(t,e){this.tools.alert(this.options.types.error,t,e)},o.prototype.info=function(t,e){this.tools.alert(this.options.types.info,t,e)},o.prototype.warn=function(t,e){this.tools.alert(this.options.types.warn,t,e)},o.prototype.ok=function(t,e){this.tools.alert(this.options.types.correct,t,e)},o.prototype.correct=function(t,e){this.tools.alert(this.options.types.correct,t,e)},o.prototype.confirm=function(e,a){t.extend(this.options,\"object\"==typeof a&&a);var i=t.extend({},{okName:BJUI.regional.alertmsg.btnMsg.ok,okCall:null,cancelName:BJUI.regional.alertmsg.btnMsg.cancel,cancelCall:null},this.options),n=[{name:i.okName,call:i.okCall,cls:\"green\",keyCode:BJUI.keyCode.ENTER},{name:i.cancelName,call:i.cancelCall,cls:\"red\",keyCode:BJUI.keyCode.ESC}];this.tools.open(this.options.types.confirm,e,n)};var s=t.fn.alertmsg;t.fn.alertmsg=e,t.fn.alertmsg.Constructor=o,t.fn.alertmsg.noConflict=function(){return t.fn.alertmsg=s,this},t(document).on(\"click.bjui.alertmsg.data-api\",'[data-toggle=\"alertmsg\"]',function(a){var i,n=t(this),o=n.data(),s=o.options;return s&&(\"string\"==typeof s&&(s=s.toObj()),\"object\"==typeof s&&t.extend(o,s)),(i=o.type)?(e.call(n,i,o.msg||i,o),void a.preventDefault()):!1})}(jQuery),+function(t){\"use strict\";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),\"object\"==typeof e&&e),r=o.data(\"bjui.pagination\");r||o.data(\"bjui.pagination\",r=new a(this,s)),\"string\"==typeof n&&t.isFunction(r[n])?([].shift.apply(i),i?r[n].apply(r,i):r[n]()):r.init()})}var a=function(e,a){this.$element=t(e),this.options=a,this.tools=this.TOOLS()};a.DEFAULTS={first:\"li.j-first\",prev:\"li.j-prev\",next:\"li.j-next\",last:\"li.j-last\",nums:\"li.j-num > a\",jump:\"li.jumpto\",pageNumFrag:'<li class=\"#liClass#\"><a href=\"javascript:;\">#pageNum#</a></li>',total:0,pageSize:10,pageNum:10,pageCurrent:1,callback:function(){return!1}},a.prototype.TOOLS=function(){var t=this.options,e={pageNums:function(){return Math.ceil(t.total/t.pageSize)},getInterval:function(){var e=Math.ceil(t.pageNum/2),a=this.pageNums(),i=a-t.pageNum,n=this.getCurrentPage()>e?Math.max(Math.min(this.getCurrentPage()-e,i),0):0,o=this.getCurrentPage()>e?Math.min(this.getCurrentPage()+e,a):Math.min(t.pageNum,a);return{start:n+1,end:o+1}},getCurrentPage:function(){var e=parseInt(t.pageCurrent);return isNaN(e)?1:e},hasPrev:function(){return this.getCurrentPage()>1},hasNext:function(){return this.getCurrentPage()<this.pageNums()}};return e},a.prototype.init=function(){function e(e,i){e.on(\"click\",function(e){var n={pageCurrent:i,pageSize:a.options.pageSize};a.setClientPaging(n),t(this).bjuiajax(\"pageCallback\",n,a.$element.closest(\".bjui-layout\")),e.preventDefault()})}BJUI.ui.clientPaging&&!this.getClientPaging()&&this.setClientPaging({pageCurrent:this.options.pageCurrent,pageSize:this.options.pageSize});for(var a=this,i=this.options,n=this.tools,o=n.getInterval(),s=\"\",r=FRAG.pagination,l=BJUI.regional.pagination,d=o.start;d<o.end;d++)s+=i.pageNumFrag.replaceAll(\"#pageNum#\",d).replaceAll(\"#liClass#\",d==n.getCurrentPage()?\"selected j-num\":\"j-num\");r=r.replaceAll(\"#pageNumFrag#\",s).replaceAll(\"#pageCurrent#\",n.getCurrentPage()).replaceAll(\"#first#\",l.first).replaceAll(\"#last#\",l.last).replaceAll(\"#prev#\",l.prev).replaceAll(\"#next#\",l.next).replaceAll(\"#jumpto#\",l.jumpto).replaceAll(\"#jump#\",l.jump),this.$element.html(r);var c=this.$element.find(i.first),u=this.$element.find(i.prev),h=this.$element.find(i.next),p=this.$element.find(i.last);n.hasPrev()?(c.add(u).find(\"> span\").hide(),e(u,n.getCurrentPage()-1),e(c,1)):c.add(u).addClass(\"disabled\").find(\"> a\").hide(),n.hasNext()?(h.add(p).find(\"> span\").hide(),e(h,n.getCurrentPage()+1),e(p,n.pageNums())):h.add(p).addClass(\"disabled\").find(\"> a\").hide(),this.$element.find(i.nums).each(function(a){e(t(this),a+o.start)}),this.$element.find(i.jump).each(function(){var e=t(this).find(\":text\"),n=t(this).find(\".goto\");n.on(\"click\",function(){var n=e.val(),o={pageCurrent:n,pageSize:i.pageSize};n&&n.isPositiveInteger()&&(a.setClientPaging(o),t(this).bjuiajax(\"pageCallback\",o,a.$element.closest(\".bjui-layout\")))}),e.keyup(function(t){t.keyCode==BJUI.keyCode.ENTER&&n.trigger(\"click\")})})},a.prototype.changePagesize=function(){var t=this,e=t.$element.val(),a={pageSize:e};isNaN(e)||(t.setClientPaging(a),t.$element.bjuiajax(\"pageCallback\",a,t.$element.closest(\".bjui-layout\")))},a.prototype.orderBy=function(e){var a=this;a.$element.css({cursor:\"pointer\"}).click(function(){var e=t(this).data(\"orderField\"),i=t(this).data(\"orderDirection\"),n={orderField:e,orderDirection:i};a.setClientPaging(n),t(this).bjuiajax(\"pageCallback\",n,a.$element.closest(\".bjui-layout\"));\n})},a.prototype.destroy=function(){this.$element.removeData(\"bjui.pagination\").empty()},a.prototype.getTarget=function(){var e,a=this;return e=a.$element.closest(\".bjui-layout\").length?a.$element.closest(\".bjui-layout\"):a.$element.closest(\".navtab-panel\").length?t.CurrentNavtab:t.CurrentDialog},a.prototype.getClientPaging=function(){return this.getTarget().data(\"bjui.clientPaging\")},a.prototype.setClientPaging=function(e){if(BJUI.ui.clientPaging){var a=this.getTarget();a.data(\"bjui.clientPaging\",t.extend({},a.data(\"bjui.clientPaging\")||{},e))}},a.prototype.setClientOrder=function(t){if(BJUI.ui.clientPaging){var e=this.getClientPaging();e&&e.orderField||this.setClientPaging(t)}},a.prototype.setPagingAndOrderby=function(t){var e=t.data(\"bjui.clientPaging\");t.find('[data-toggle=\"pagination\"]').pagination(\"destroy\").pagination(e),e.pageSize&&t.find('select[data-toggle-change=\"changepagesize\"]').selectpicker(\"val\",e.pageSize),e.orderField&&t.find('th[data-order-field=\"'+e.orderField+'\"]').addClass(e.orderDirection).siblings().removeClass(\"asc desc\")};var i=t.fn.pagination;t.fn.pagination=e,t.fn.pagination.Constructor=a,t.fn.pagination.noConflict=function(){return t.fn.pagination=i,this},t(document).on(BJUI.eventType.initUI,function(a){var i=t(a.target).find('[data-toggle=\"pagination\"]');i.length&&e.call(i)}),t(document).on(\"change.bjui.pagination.data-api\",'select[data-toggle-change=\"changepagesize\"]',function(a){var i=t(this);i.data();e.call(i,\"changePagesize\"),a.preventDefault()})}(jQuery),+function($){\"use strict\";function LZ(t){return(0>t||t>9?\"\":\"0\")+t}function formatDate(t,e){e+=\"\";var a,i=\"\",n=0,o=\"\",s=\"\",r=t.getYear()+\"\",l=t.getMonth()+1,d=t.getDate(),c=t.getDay(),a=t.getHours(),u=t.getMinutes(),h=t.getSeconds(),p={};for(r.length<4&&(r=\"\"+(r-0+1900)),p.y=\"\"+r,p.yyyy=r,p.yy=r.substring(2,4),p.M=l,p.MM=LZ(l),p.MMM=MONTH_NAMES[l-1],p.NNN=MONTH_NAMES[l+11],p.d=d,p.dd=LZ(d),p.E=DAY_NAMES[c+7],p.EE=DAY_NAMES[c],p.H=a,p.HH=LZ(a),0==a?p.h=12:a>12?p.h=a-12:p.h=a,p.hh=LZ(p.h),a>11?p.K=a-12:p.K=a,p.k=a+1,p.KK=LZ(p.K),p.kk=LZ(p.k),a>11?p.a=\"PM\":p.a=\"AM\",p.m=u,p.mm=LZ(u),p.s=h,p.ss=LZ(h);n<e.length;){for(o=e.charAt(n),s=\"\";e.charAt(n)==o&&n<e.length;)s+=e.charAt(n++);i+=null!=p[s]?p[s]:s}return i}function _isInteger(t){return new RegExp(/^\\d+$/).test(t)}function _getInt(t,e,a,i){for(var n=i;n>=a;n--){var o=t.substring(e,e+n);if(o.length<a)return null;if(_isInteger(o))return o}return null}function parseDate(t,e){t+=\"\",e+=\"\";for(var a,i,n=0,o=0,s=\"\",r=\"\",l=new Date(1900,0,1),d=l.getYear(),c=l.getMonth()+1,u=1,h=l.getHours(),p=l.getMinutes(),f=l.getSeconds(),g=\"\";o<e.length;){for(s=e.charAt(o),r=\"\";e.charAt(o)==s&&o<e.length;)r+=e.charAt(o++);if(\"yyyy\"==r||\"yy\"==r||\"y\"==r){if(\"yyyy\"==r&&(a=4,i=4),\"yy\"==r&&(a=2,i=2),\"y\"==r&&(a=2,i=4),d=_getInt(t,n,a,i),null==d)return 0;n+=d.length,2==d.length&&(d=d>70?1900+(d-0):2e3+(d-0))}else if(\"MMM\"==r||\"NNN\"==r){c=0;for(var m=0;m<MONTH_NAMES.length;m++){var b=MONTH_NAMES[m];if(t.substring(n,n+b.length).toLowerCase()==b.toLowerCase()&&(\"MMM\"==r||\"NNN\"==r&&m>11)){c=m+1,c>12&&(c-=12),n+=b.length;break}}if(1>c||c>12)return 0}else if(\"EE\"==r||\"E\"==r)for(var m=0;m<DAY_NAMES.length;m++){var v=DAY_NAMES[m];if(t.substring(n,n+v.length).toLowerCase()==v.toLowerCase()){n+=v.length;break}}else if(\"MM\"==r||\"M\"==r){if(c=_getInt(t,n,r.length,2),null==c||1>c||c>12)return 0;n+=c.length}else if(\"dd\"==r||\"d\"==r){if(u=_getInt(t,n,r.length,2),null==u||1>u||u>31)return 0;n+=u.length}else if(\"hh\"==r||\"h\"==r){if(h=_getInt(t,n,r.length,2),null==h||1>h||h>12)return 0;n+=h.length}else if(\"HH\"==r||\"H\"==r){if(h=_getInt(t,n,r.length,2),null==h||0>h||h>23)return 0;n+=h.length}else if(\"KK\"==r||\"K\"==r){if(h=_getInt(t,n,r.length,2),null==h||0>h||h>11)return 0;n+=h.length}else if(\"kk\"==r||\"k\"==r){if(h=_getInt(t,n,r.length,2),null==h||1>h||h>24)return 0;n+=h.length,h--}else if(\"mm\"==r||\"m\"==r){if(p=_getInt(t,n,r.length,2),null==p||0>p||p>59)return 0;n+=p.length}else if(\"ss\"==r||\"s\"==r){if(f=_getInt(t,n,r.length,2),null==f||0>f||f>59)return 0;n+=f.length}else if(\"a\"==r){if(\"am\"==t.substring(n,n+2).toLowerCase())g=\"AM\";else{if(\"pm\"!=t.substring(n,n+2).toLowerCase())return 0;g=\"PM\"}n+=2}else{if(t.substring(n,n+r.length)!=r)return 0;n+=r.length}}if(n!=t.length)return 0;if(2==c)if(d%4==0&&d%100!=0||d%400==0){if(u>29)return 0}else if(u>28)return 0;return(4==c||6==c||9==c||11==c)&&u>30?0:(12>h&&\"PM\"==g?h=h-0+12:h>11&&\"AM\"==g&&(h-=12),new Date(d,c-1,u,h,p,f))}function replaceTmEval(data){return data.replace(RegExp(\"({[A-Za-z0-9_+-]*})\",\"g\"),function($1){return eval(\"(\"+$1.replace(/[{}]+/g,\"\")+\")\")})}var MONTH_NAMES=new Array(\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\",\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"),DAY_NAMES=new Array(\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\",\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\");Date.prototype.formatDate=function(t){return formatDate(this,t)},String.prototype.parseDate=function(t){return this.length<t.length&&(t=t.slice(0,this.length)),parseDate(this,t)},Date.prototype.formatDateTm=function(t){var e=this.getFullYear(),a=this.getMonth()+1,i=this.getDate(),n=t.replaceAll(\"%y\",e).replaceAll(\"%M\",a).replaceAll(\"%d\",i);n=replaceTmEval(n);var o=1900,s=0,r=1,l=n.split(\"-\");return l.length>0&&(o=l[0]),l.length>1&&(s=l[1]-1),l.length>2&&(r=l[2]),new Date(o,s,r).formatDate(\"yyyy-MM-dd\")}}(jQuery),+function(t){\"use strict\";function e(e){var a=arguments,i=e;return this.each(function(){var n=t(this),o=t.extend({},k.DEFAULTS,n.data(),\"object\"==typeof e&&e),s=n.data(\"bjui.datepicker\");s||n.data(\"bjui.datepicker\",s=new k(this,o)),\"string\"==typeof i&&t.isFunction(s[i])?([].shift.apply(a),a?s[i].apply(s,a):s[i]()):s.init()})}var a,i,n,o,s,r,l,d,c,u,h,p,f,g,m,b,v,y;t(function(){var e=function(){var e=BJUI.regional.datepicker,k=FRAG.calendarFrag.replace(\"#close#\",e.close).replace(\"#prev#\",e.prev).replace(\"#next#\",e.next).replace(\"#clear#\",e.clear).replace(\"#ok#\",e.ok);a=t(k).hide(),t(\"body\").append(\"<!-- datepicker -->\").append(a),i=a.find(\"> .main\"),n=a.find(\"a.prev\"),o=a.find(\"a.next\"),s=a.find(\"select[name=year]\"),r=a.find(\"select[name=month]\"),l=a.find(\".time\"),d=l.find(\":text\"),c=l.find(\"ul > li\"),u=l.find(\".hh\"),h=l.find(\".mm\"),p=l.find(\".ss\"),f=i.find(\"> .tm\"),g=a.find(\".close\"),m=i.find(\"> .body > .days\"),b=i.find(\"> .body > .dayNames\"),v=a.find(\".clearBtn\"),y=a.find(\".okBtn\");var x=\"\",C=BJUI.regional.datepicker;t.each(C.dayNames,function(t,e){x+=\"<dt>\"+e+\"</dt>\"}),b.html(x),t.each(C.monthNames,function(t,e){var a=t+1;r.append('<option value=\"'+a+'\">'+e+\"</option>\")}),a.on(\"selectstart\",function(){return!1})};e()});var k=function(e,a){this.$element=t(e),this.options=a,this.tools=this.TOOLS(),this.$dateBtn=null;var i=new Date;this.options.minDate=i.formatDateTm(this.options.minDate),this.options.maxDate=i.formatDateTm(this.options.maxDate),this.events={focus_time:\"focus.bjui.datepicker.time\",click_prev:\"click.bjui.datepicker.prev\",click_next:\"click.bjui.datepicker.next\",click_ok:\"click.bjui.datepicker.ok\",click_days:\"click.bjui.datepicker.days\",click_clear:\"click.bjui.datepicker.clear\",click_close:\"click.bjui.datepicker.close\",click_tm:\"click.bjui.datepicker.tm\",click_spinner:\"click.bjui.datepicker.spinner\",mousedown_sp:\"mousedown.bjui.datepicker.spinner\",mouseup_sp:\"mouseup.bjui.datepicker.spinner\",change_ym:\"change.bjui.datepicker.ym\",click_time:\"click.bjui.datepicker.time\",keydown_time:\"keydown.bjui.datepicker.time\",keyup_time:\"keyup.bjui.datepicker.time\"}};k.DEFAULTS={pattern:\"yyyy-MM-dd\",minDate:\"1900-01-01\",maxDate:\"2099-12-31\",mmStep:1,ssStep:1},k.EVENTS={afterChange:\"afterchange.bjui.datepicker\"},k.prototype.TOOLS=function(){var e=this,i={changeTmMenu:function(t){f.removeClass(\"hh\").removeClass(\"mm\").removeClass(\"ss\"),t&&(f.addClass(t),d.removeClass(\"slt\").filter(\".\"+t).addClass(\"slt\"))},clickTmMenu:function(a,i){f.find(\"> ul\").hide().filter(\".\"+i).show().find(\"> li\").off(e.events.click_tm).on(e.events.click_tm,function(){var e=t(this),i=parseInt(e.text())<10?\"0\"+e.text():e.text();a.val(i)})},keydownInt:function(t){return t.keyCode>=48&&t.keyCode<=57||t.keyCode==BJUI.keyCode.DELETE||t.keyCode==BJUI.keyCode.BACKSPACE?void 0:!1},changeTm:function(t,e){var a=parseInt(t.val()),i=parseInt(t.data(\"start\"))||0,n=parseInt(t.data(\"end\")),o=parseInt(t.data(\"step\")||1),s=e?e.data(\"add\")?e.data(\"add\"):-1:0,r=a;1==s?n-o>=a&&(r=a+o):-1==s?a>=i+o&&(r=a-o):a>n?r=n:i>a&&(r=i),10>r&&(r=\"0\"+r),t.val(r)},closeCalendar:function(n){i.changeTmMenu(),n&&(t(document).off(e.events.click_close),a.hide())},get:function(t){return e.options[t]},getDays:function(t,e){return 2==e?t%4||!(t%100)&&t%400?28:29:/4|6|9|11/.test(e)?30:31},minMaxDate:function(t){var e=t.split(\"-\").length-1,a=\"y-M-d\";return 1==e?a=\"y-M\":0==e&&(a=\"y\"),t.parseDate(a)},getMinDate:function(){return this.minMaxDate(e.options.minDate)},getMaxDate:function(){var t=e.options.maxDate,a=t.split(\"-\").length-1,i=this.minMaxDate(t);if(2>a){var n=this.getDays(i.getFullYear(),i.getMonth()+1);i.setDate(n),0==a&&i.setMonth(11)}return i},getDateWrap:function(t){t||(t=this.parseDate(e.sDate)||new Date);var a=t.getFullYear(),i=t.getMonth()+1,n=this.getDays(a,i);return{year:a,month:i,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),days:n,date:t}},changeDate:function(t,a,i){var n=new Date(t,a-1,i||1);return e.sDate=this.formatDate(n),n},changeDateTime:function(t,a,i,n,o,s){var r=new Date(t,a-1,i,n,o,s);return e.sDate=this.formatDate(r),r},changeDay:function(t,e){e||(e=0);var a=this.getDateWrap();return this.changeDate(a.year,a.month+parseInt(e),t)},changeMonth:function(t){var e=s.get(0).selectedIndex,a=s.find(\"option\").length,i=1*r.val()+t;0==i?0==e?i=1:(i=12,e--,s.get(0).selectedIndex=e):13==i&&(e==a-1?i=12:(i=1,e++,s.get(0).selectedIndex=e)),r.val(i).change()},parseDate:function(t){return t?t.parseDate(e.options.pattern):null},formatDate:function(t){return t.formatDate(e.options.pattern)},hasHour:function(){return-1!=e.options.pattern.indexOf(\"H\")},hasMinute:function(){return-1!=e.options.pattern.indexOf(\"m\")},hasSecond:function(){return-1!=e.options.pattern.indexOf(\"s\")},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){for(var t=[\"y\",\"M\",\"d\",\"E\"],a=0;a<t.length;a++)if(-1!=e.options.pattern.indexOf(t[a]))return!0;return!1},afterChange:function(t){e.$element.trigger(k.EVENTS.afterChange,{value:t})}};return i},k.prototype.addBtn=function(){var e=this,a=e.$element;if(!this.$dateBtn&&!this.options.addbtn&&!a.parent().hasClass(\"wrap_bjui_btn_box\")){this.$dateBtn=t(FRAG.dateBtn),this.$element.css({paddingRight:\"15px\"}).wrap('<span class=\"wrap_bjui_btn_box\"></span>');var i=this.$element.parent(),n=this.$element.addClass(\"form-control\").innerHeight();i.css({position:\"relative\",display:\"inline-block\"}),this.$dateBtn.css({height:n,lineHeight:n+\"px\"}).appendTo(i),this.$dateBtn.on(\"selectstart\",function(){return!1})}},k.prototype.init=function(){this.$element.val()&&(this.sDate=this.$element.val().trim());var e=this,a=(this.options,this.tools),i=a.getDateWrap(),l=a.getMinDate(),d=a.getMaxDate(),c=l.getFullYear(),f=d.getFullYear();s.empty();for(var b=c;f>=b;b++)s.append('<option value=\"'+b+'\"'+(i.year==b?\" selected\":\"\")+\">\"+b+\"</option>\");r.val(i.month),s.add(r).off(this.events.change_ym).on(this.events.change_ym,function(){if(a.hasTime()){var t=m.find(\".slt\"),n=a.changeDateTime(s.val(),r.val(),t.data(\"day\"),i.hour,i.minute,i.second);e.create(a.getDateWrap(n),l,d)}else{var t=m.find(\".slt\"),n=a.changeDate(s.val(),r.val(),t.data(\"day\"));e.create(a.getDateWrap(n),l,d)}}),n.off(this.events.click_prev).on(this.events.click_prev,function(){e.tools.changeMonth(-1)}),o.off(this.events.click_prev).on(this.events.click_prev,function(){e.tools.changeMonth(1)}),v.off(this.events.click_clear).on(this.events.click_clear,function(){e.$element.val(\"\"),a.closeCalendar(!0)}),y.off(this.events.click_ok).on(this.events.click_ok,function(){var t=m.find(\"dd.slt\");if(t.hasClass(\"disabled\"))return!1;var i=a.changeDay(t.data(\"day\"),t.data(\"month\"));a.hasTime()&&(i.setHours(parseInt(u.val())),i.setMinutes(parseInt(h.val())),i.setSeconds(parseInt(p.val()))),a.closeCalendar(!0),e.$element.val(a.formatDate(i)).focus(),a.afterChange(i)}),g.off(this.events.click_close).on(this.events.click_close,function(){a.closeCalendar(!0)}),t(document).on(this.events.click_close,function(i){var n=t(i.target);i.target!=e.$element.get(0)&&(n.closest(\"#calendar\").length||(\"datepicker\"==n.data(\"toggle\")||\"datepickerbtn\"==n.parent().data(\"toggle\")||\"datepickerbtn\"==n.data(\"toggle\")?a.closeCalendar(!1):a.closeCalendar(!0)))}),this.create(i,l,d)},k.prototype.create=function(e,n,o){var s=this,r=this.options,g=this.tools,b=new Date(e.year,e.month-1,1),v=b.getDay(),y=\"\";if(v>0){b.setMonth(b.getMonth()-1);for(var k=g.getDateWrap(b),x=k.days-v+1;x<=k.days;x++){var C=new Date(e.year,e.month-2,x),w=C>=n&&o>=C?\"\":\" disabled\";y+='<dd class=\"other'+w+'\" data-month=\"-1\" data-day=\"'+x+'\">'+x+\"</dd>\"}}for(var x=1;x<=e.days;x++){var C=new Date(e.year,e.month-1,x),w=C>=n&&o>=C?\"\":\"disabled\";x==e.day&&(w+=\" slt\"),y+='<dd class=\"'+w+'\" data-day=\"'+x+'\">'+x+\"</dd>\"}for(var x=1;x<=42-v-e.days;x++){var C=new Date(e.year,e.month,x),w=C>=n&&o>=C?\"\":\" disabled\";y+='<dd class=\"other'+w+'\" data-month=\"1\" data-day=\"'+x+'\">'+x+\"</dd>\"}var $=m.html(y).find(\"dd\");if($.not(\".disabled\").off(this.events.click_days).on(this.events.click_days,function(){var e=t(this);if(g.hasTime())$.removeClass(\"slt\"),e.addClass(\"slt\");else{var a=g.changeDay(e.data(\"day\"),e.data(\"month\"));g.closeCalendar(!0),s.$element.val(g.formatDate(a)).focus(),g.afterChange(a)}}),g.hasDate()?i.removeClass(\"nodate\"):i.addClass(\"nodate\"),g.hasTime()){l.show(),u.val(e.hour<10?\"0\"+e.hour:e.hour).off(this.events.focus_time).on(this.events.focus_time,function(){g.changeTmMenu(\"hh\")});var j=parseInt(e.minute/r.mmStep)*r.mmStep;h.val(10>j?\"0\"+j:j).data(\"step\",r.mmStep).off(this.events.focus_time).on(this.events.focus_time,function(){g.changeTmMenu(\"mm\")}),p.val(g.hasSecond()?e.second<10?\"0\"+e.second:e.second:\"00\").data(\"step\",r.ssStep).off(this.events.focus_time).on(this.events.focus_time,function(){g.changeTmMenu(\"ss\")}),a.off(\"click\").on(\"click\",function(e){t(e.target).closest(\".time\").length||(f.find(\"> ul\").hide(),g.changeTmMenu())}),d.off(this.events.keydown_time).on(this.events.keydown_time,g.keydownInt).each(function(){var e=t(this);e.off(s.events.keyup_time).on(s.events.keyup_time,function(){g.changeTm(e)})}).off(this.events.click_time).on(this.events.click_time,function(){g.clickTmMenu(t(this),t(this).data(\"type\"))});var T=null;c.off(this.events.click_spinner).on(this.events.click_spinner,function(e){var a=t(this);d.filter(\".slt\").each(function(){g.changeTm(t(this),a)}),e.preventDefault()}).off(this.events.mousedown_sp).on(this.events.mousedown_sp,function(e){var a=t(this);T=setInterval(function(){d.filter(\".slt\").each(function(){g.changeTm(t(this),a)})},150)}).off(this.events.mouseup_sp).on(this.events.mouseup_sp,function(t){clearTimeout(T)}),g.hasHour()||u.attr(\"disabled\",!0),g.hasMinute()||h.attr(\"disabled\",!0),g.hasSecond()||p.attr(\"disabled\",!0)}else l.hide();this.show()},k.prototype.show=function(){var e=this.$element.offset(),i=e.top+this.$element.get(0).offsetHeight,n=a.outerHeight(!0);i>n&&i>t(window).height()-n&&(i=e.top-n),a.css({left:e.left,top:i}).show().click(function(t){t.stopPropagation()})};var x=t.fn.datepicker;t.fn.datepicker=e,t.fn.datepicker.Constructor=k,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=x,this},t(document).on(BJUI.eventType.initUI,function(a){var i=t(a.target).find('[data-toggle=\"datepicker\"]');i.length&&(i.data(\"nobtn\")||e.call(i,\"addBtn\"))}),t(document).on(\"click.bjui.datepicker.data-api\",'[data-toggle=\"datepickerbtn\"]',function(a){var i=t(this).prevAll('[data-toggle=\"datepicker\"]');i&&i.is(\":text\")&&(e.call(i,i.data()),a.preventDefault())}),t(document).on(\"click.bjui.datepicker.data-api\",'[data-toggle=\"datepicker\"]',function(a){var i=t(this);i.data(\"onlybtn\")||i.is(\":text\")&&(e.call(i,i.data()),a.preventDefault())})}(jQuery),+function(t){\"use strict\";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),\"object\"==typeof e&&e),r=o.data(\"bjui.ajaxtab\");r||o.data(\"bjui.ajaxtab\",r=new a(this,s)),\"string\"==typeof n&&t.isFunction(r[n])?([].shift.apply(i),i?r[n].apply(r,i):r[n]()):r.init()})}var a=function(e,a){this.$element=t(e),this.options=a};a.DEFAULTS={url:void 0,target:void 0,reload:!1},a.prototype.init=function(){var t=this.options;if(!t.url)return void BJUI.debug(\"Ajaxtab Plugin: Error trying to open a tab, url is undefined!\");if(t.url=decodeURI(t.url).replacePlh(this.$element.closest(\".unitBox\")),!t.url.isFinishedTm())return this.$element.alertmsg(\"error\",t.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"Ajaxtab Plugin: The new ajaxtab's url is incorrect, url: \"+t.url);if(t.url=encodeURI(t.url),!t.target)return void BJUI.debug(\"Ajaxtab Plugin: Attribute 'target' is not defined!\");if(t.reload)this.load();else{var e=this.$element.data(\"bjui.ajaxtab.reload\");e?this.$element.tab(\"show\"):this.load()}},a.prototype.load=function(){var e=this.$element,a=this.options;t(a.target).ajaxUrl({url:a.url,data:{},callback:function(){e.data(\"bjui.ajaxtab.reload\",!0).tab(\"show\")}})};var i=t.fn.ajaxtab;t.fn.ajaxtab=e,t.fn.ajaxtab.Constructor=a,t.fn.ajaxtab.noConflict=function(){return t.fn.ajaxtab=i,this},t(document).on(\"click.bjui.ajaxtab.data-api\",'[data-toggle=\"ajaxtab\"]',function(a){var i=t(this),n=i.data();n.url||(n.url=i.attr(\"href\")),e.call(i,n),a.preventDefault()})}(jQuery),+function(t){\"use strict\";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),\"object\"==typeof e&&e),r=o.data(\"bjui.datagrid\");r||o.data(\"bjui.datagrid\",r=new a(this,s)),\"string\"==typeof n&&t.isFunction(r[n])?([].shift.apply(i),i?r[n].apply(r,i):r[n]()):r.init()})}var a=function(e,a){this.$element=t(e),this.options=a,this.tools=this.TOOLS(),this.datanames={tbody:\"bjui.datagrid.tbody.dom\",td_html:\"bjui.datagrid.td.html\",changeData:\"bjui.datagrid.tr.changeData\"},this.classnames={s_checkbox:\"datagrid-checkbox\",s_linenumber:\"datagrid-linenumber\",s_edit:\"datagrid-column-edit\",s_lock:\"datagrid-lock\",s_menu:\"datagrid-menu-box\",s_filter:\"datagrid-filter-box\",s_showhide:\"datagrid-showhide-box\",th_cell:\"datagrid-cell\",th_menu:\"datagrid-column-menu\",btn_menu:\"datagrid-column-menu-btn\",th_col:\"datagrid-col\",th_field:\"datagrid-col-field\",th_sort:\"datagrid-sortable\",th_resize:\"datagrid-resize-head\",th_resizemark:\"datagrid-column-resizemark\",tr_edit:\"datagrid-edit-tr\",tr_add:\"datagrid-add-tr\",tr_selected:\"datagrid-selected-tr\",td_edit:\"datagrid-edit-td\",td_changed:\"datagrid-changed\",td_linenumber:\"datagrid-linenumber-td\",td_checkbox:\"datagrid-checkbox-td\",li_asc:\"datagrid-li-asc\",li_desc:\"datagrid-li-desc\",li_filter:\"datagrid-li-filter\",li_showhide:\"datagrid-li-showhide\",li_lock:\"datagrid-li-lock\",li_unlock:\"datagrid-li-unlock\"}};a.DEFAULTS={gridTitle:\"\",columns:null,data:null,dataUrl:null,postData:null,loadType:\"POST\",dataType:\"json\",local:\"remote\",fieldSortable:!0,filterThead:!0,sortAll:!1,filterAll:!1,filterMult:!0,linenumberAll:!1,showLinenumber:!0,showCheckboxcol:!1,showEditbtnscol:!1,showTfoot:!1,showToolbar:!1,toolbarItem:\"\",toolbarCustom:\"\",columnResize:!0,columnMenu:!0,columnShowhide:!0,columnFilter:!1,columnLock:!0,paging:!0,pagingAlign:\"center\",editUrl:null,editCallback:null,editMode:\"inline\",editDialogOp:null,inlineEditMult:!0,saveAll:!0,addLocation:\"first\",delUrl:null,delType:\"POST\",delPK:null,delConfirm:!0,delCallback:null,jsonPrefix:\"\",contextMenuH:!0,contextMenuB:!1,hScrollbar:!1,fullGrid:!1,importOption:null,exportOption:null,beforeEdit:null,beforeDelete:null,beforeSave:null,afterSave:null,afterDelete:null},a.renderItem=function(e,a,i){if(!i||!i.length)return\"\";var n=\"\";return t.each(i,function(t,a){return\"undefined\"!=typeof a[e]?(n=a[e],!1):void 0}),n},a.prototype.TOOLS=function(){var e=this,a=e.options,i={getPageCount:function(t,e){return Math.ceil(e/t)},getPageInterval:function(t,e,a){var i=Math.ceil(a/2),n=t-a,o=e>i?Math.max(Math.min(e-i,n),0):0,s=e>i?Math.min(e+i,t):Math.min(a,t);return s-o==a&&(s+=1),a>s&&(s+=1),o+1==s&&(s+=1),{start:o+1,end:s}},getRight:function(a){var i=0,n=a.data(\"index\"),o=e.$tbody.find(\"> tr:first > td:lt(\"+(n+1)+\")\");return o&&o.length||(o=e.$colgroupH.find(\"> col:lt(\"+(n+1)+\")\")),o.each(function(){var e=t(this),a=e.is(\":hidden\")?0:e.outerWidth();i+=a}),i},getRight4Lock:function(a){var i=0,n=e.$lockTbody.find(\"> tr:first > td:eq(\"+a+\")\"),o=n&&n.prevAll().add(n);return o&&o.length||(o=e.$lockColgroupH.filter(\":lt(\"+(a+1)+\")\")),o.each(function(){var e=t(this),a=e.is(\":hidden\")?0:e.outerWidth();i+=a}),i},beforeEdit:function(t,i){var n=a.beforeEdit;return n&&(\"string\"==typeof n&&(n=n.toFunc()),\"function\"==typeof n)?n.call(e,t,i):!0},beforeSave:function(t,i){var n=a.beforeSave;return n&&(\"string\"==typeof n&&(n=n.toFunc()),\"function\"==typeof n)?n.call(e,t,i):!0},afterSave:function(t,i){var n=a.afterSave;n&&(\"string\"==typeof n&&(n=n.toFunc()),\"function\"==typeof n&&n.call(e,t,i))},afterDelete:function(){var t=a.afterDelete;t&&(\"string\"==typeof t&&(t=t.toFunc()),\"function\"==typeof t&&t.call(e))},setColspan:function(t,e){t.colspan&&(t.colspan=t.colspan+e-1),t.index=t.index+e-1,t.parent&&this.setColspan(t.parent,e)},columns2Arr:function(a,i,n,o){var s=this;return i||(i=[]),n||(n=0),i[n]||(i[n]=[]),t.each(a,function(t,a){var r,l=i[n].length;return o&&(a.parent=o),a.columns?(r=a.columns.length,n&&a.parent&&s.setColspan(a.parent,r),a.index=e.columnModel.length+r-1,a.colspan=r,a.quicksort=!1,i[n][l++]=a,s.columns2Arr(a.columns,i,n+1,a)):(a.rowspan=n,a.index=e.columnModel.length,a.menu=\"undefined\"==typeof a.menu?!0:a.menu,a.lock=\"undefined\"==typeof a.lock?!0:a.lock,a.hide=\"undefined\"==typeof a.hide?!1:a.hide,a.edit=\"undefined\"==typeof a.edit?!0:a.edit,a.add=\"undefined\"==typeof a.add?!0:a.add,a.quicksort=\"undefined\"==typeof a.quicksort?!0:a.quicksort,a.quickfilter=\"undefined\"==typeof a.quickfilter?!0:a.quickfilter,i[n][l++]=a,e.columnModel.push(a),void 0)}),i},createTrsByData:function(a,n){var o;e.$tbody||(e.$tbody=t(\"<tbody></tbody>\")),a&&(o=a.list?a.list:a,e.paging.total=o.length,\"object\"==typeof a&&(a[BJUI.pageInfo.total]&&(e.paging.total=parseInt(a[BJUI.pageInfo.total])),a[BJUI.pageInfo.pageSize]&&(n&&e.paging.pageSize!=a[BJUI.pageInfo.pageSize]&&e.$selectpage.trigger(\"bjui.datagrid.paging.pageSize\",a[BJUI.pageInfo.pageSize]),e.paging.pageSize=parseInt(a[BJUI.pageInfo.pageSize]))),e.paging.pageCount=i.getPageCount(e.paging.pageSize,e.paging.total),e.paging.pageCurrent>e.paging.pageCount&&(e.paging.pageCurrent=e.paging.pageCount),0==e.paging.pageCurrent&&(e.paging.pageCurrent=1),this.initTbody(o,n)),e.init_tbody||e.$tbody.appendTo(e.$element),e.init_thead||e.initThead()},initTbody:function(i,n){var o,s=this,r=e.allData,l=a.dataType||\"json\",d=e.columnModel,c=e.hiddenFields,u=(e.regional,[]),h=e.attach,p=e.paging,f=0,g=p.pageSize,m=function(){if(l=l.toLowerCase(),i&&(r=e.allData=i),\"local\"==a.local&&e.$element.data(\"allData\",i),r.length?\"local\"==a.local?(f=p.pageSize*(p.pageCurrent-1),g=f+p.pageSize,p.total!=r.length&&(p.total=r.length),f>r.length&&(f=p.pageSize*(p.pageCount-1))):r.length>p.pageSize&&(g=p.pageSize):g=0,g>r.length&&(g=r.length),\"array\"==l&&i&&i.length&&\"array\"==t.type(i[0])){var m,b=f,v=g,y=[];\"local\"==a.local&&(b=0,v=r.length);for(var k=b;v>k;k++)o={},m=0,t.each(r[k],function(e,a){var i,n=a;d[m]&&d[m].gridNumber&&m++,d[m]&&d[m].gridCheckbox&&m++,\"string\"==typeof n&&(n='\"'+n+'\"'),d[m]&&!d[m].gridEdit?(i='{\"'+d[m].name+'\":'+n+\"}\",t.extend(o,JSON.parse(i))):(d[m]&&d[m].gridEdit&&m++,m>=d.length&&c&&c[e-d.length]&&(i='{\"'+c[e-d.length]+'\":'+n+\"}\",t.extend(o,JSON.parse(i)))),m++}),y.push(o);r=e.allData=y}for(var k=f;g>k;k++)o=t.extend({},e.allData[k],h),u.push(o);s.createTrs(u,n),e.data=u};n&&e.$boxM?e.$boxM.show().trigger(\"bjui.ajaxEnd\").trigger(\"bjui.ajaxStart\",[50,m]):m()},createTrs:function(i,n){var o=e.columnModel,s=e.paging,r=BJUI.doRegional(FRAG.gridEditBtn,e.regional),l=!1;if(n&&(t.each(o,function(t,a){a.locked&&(e.colLock(a.th,!1),a.lock_refresh=!0)}),e.$tbody.empty(),e.$lockTableH&&e.$lockTableH.empty(),e.$lockTableB&&e.$lockTableB.empty()),!i.length&&!n){var d={};d[o[0].name]=\"0\",l=!0,i=[],i.push(d)}t.each(i,function(d,c){var u,h=t(\"<tr></tr>\"),p=a.linenumberAll?(s.pageCurrent-1)*s.pageSize+(d+1):d+1;t.extend(c,{gridNumber:p,gridIndex:d}),t.each(o,function(a,o){var s,l=o.name||\"datagrid-noname\",p=c[l],f=\"\",g=\"\";if((\"undefined\"==typeof p||null==p)&&(p=\"\"),s=p,o.align&&(f=' align=\"'+o.align+'\"'),o.gridCheckbox&&(p='<div><input type=\"checkbox\" data-toggle=\"icheck\" name=\"datagrid.checkbox\" value=\"true\"></div>'),o.gridEdit&&(p=r,g=' class=\"'+e.classnames.s_edit+'\"'),o.calc){o.calc_count||(o.calc_count=i.length);var m=p&&String(p).isNumber()?1*p:0;\"sum\"==o.calc||\"avg\"==o.calc?o.calc_sum=(o.calc_sum||0)+m:\"max\"==o.calc?o.calc_max=o.calc_max?o.calc_max<m?m:o.calc_max:m:\"min\"==o.calc&&(o.calc_min=o.calc_min?o.calc_min>m?m:o.calc_min:m)}if(u=t(\"<td\"+f+g+\"><div>\"+p+\"</div></td>\"),u.data(\"val\",p).appendTo(h),o.gridNumber&&u.addClass(e.classnames.td_linenumber),o.gridCheckbox&&u.addClass(e.classnames.td_checkbox),n&&o.hidden&&u.css(\"display\",\"none\"),o.items&&!o.render&&(o.render=t.datagrid.renderItem),o.render&&\"string\"==typeof o.render&&(o.render=o.render.toFunc()),o.render&&\"function\"==typeof o.render){var b=\"\";if(o.items){\"string\"==typeof o.items&&(o.items.trim().startsWith(\"[\")?o.items=o.items.toObj():o.items=o.items.toFunc()),o.renderTds||(o.renderTds=[]);var v=function(a,i,n){t.when(o.items.call(e)).then(function(s){o.items=s,b=o.render.call(e,i,n,s),a.html(b),t.each(o.renderTds,function(t,a){b=o.render.call(e,a.text(),n,s),a.html(b),t==o.renderTds.length-1&&(o.renderTds=null)}),e.delayRender--})};\"function\"==typeof o.items?0==d?(e.delayRender||(e.delayRender=0),e.delayRender++,v(u,s,c)):o.renderTds.push(u):(b=o.render.call(e,s,c,o.items),u.html(b))}else b=o.render.call(e,s,c),u.html(b)}}),l||(h.appendTo(e.$tbody),n&&h.initui())}),n&&(e.initEvents(),a.editMode&&e.edit(),e.$paging&&e.$paging.trigger(\"bjui.datagrid.paging.jump\"),t.each(o,function(t,a){a.lock_refresh&&(e.colLock(a.th,!0),delete a.lock_refresh)})),e.$boxM&&e.$boxM.trigger(\"bjui.ajaxStop\").hide()},loadData:function(i,n){var o=this,s=a.dataUrl,r=a.dataType||\"json\";e.columnModel;e.$tbody&&e.$boxM.show().trigger(\"bjui.ajaxStart\",[50]),r=r.toLowerCase(),\"array\"==r&&(r=\"text\"),a.postData&&(\"string\"==typeof a.postData&&(a.postData.trim().startsWith(\"{\")?a.postData=a.postData.toObj():a.postData=a.postData.toFunc()),\"function\"==typeof a.postData&&(a.postData=a.postData.apply()),\"object\"==typeof a.postData&&(i=i?t.extend({},a.postData,i):a.postData)),t.ajax({url:s,data:i||{},type:a.loadType,cache:a.cache||!1,dataType:r,success:function(a){var i=a;if(\"json\"!=r&&(i=String(a).toJson()),i[BJUI.keys.statusCode])return e.$grid.bjuiajax(\"ajaxDone\",i),e.$boxM.show().trigger(\"bjui.ajaxStop\").hide(),e.paging.oldPageCurrent&&(e.paging.pageCurrent=e.paging.oldPageCurrent,e.paging.oldPageCurrent=null),void(e.paging.oldPageSize&&(e.paging.pageSize=e.paging.oldPageSize,e.paging.oldPageSize=null));if(\"xml\"==r){var s,l=[];t(a).find(\"row\").each(function(){s={},t(this).find(\"cell\").each(function(e){var a=t(this),i=a.text(),n=a.attr(\"name\");s[n]=i}),l.push(s)}),l&&o.createTrsByData(l,n)}else\"json\"==r?o.createTrsByData(a,n):o.createTrsByData(a.toObj(),n)}})},appendColumns:function(){e.linenumberColumn={name:\"gridNumber\",gridNumber:!0,width:30,minWidth:30,label:\"No.\",align:\"center\",menu:!1,edit:!1,quicksort:!1},e.checkboxColumn={name:\"gridCheckbox\",gridCheckbox:!0,width:40,minWidth:40,label:\"Checkbox\",align:\"center\",menu:!1,edit:!1,quicksort:!1},e.editBtnsColumn={name:\"gridEdit\",gridEdit:!0,width:110,minWidth:110,label:\"string\"==typeof a.showEditbtnscol?a.showEditbtnscol:\"Edit\",align:\"center\",menu:!1,edit:!1,hide:!1,quicksort:!1}},createThead:function(){var i,n,o,s,r,l,d,c=this,u=a.columns,h=[];c.appendColumns(),a.showCheckboxcol&&(u.unshift(e.checkboxColumn),\"lock\"==a.showCheckboxcol&&(e.checkboxColumn.initLock=!0)),a.showLinenumber&&(u.unshift(e.linenumberColumn),\"lock\"==a.showLinenumber&&(e.linenumberColumn.initLock=!0)),a.showEditbtnscol&&u.push(e.editBtnsColumn),h=c.columns2Arr(u,h),e.columnModel[e.columnModel.length-(a.showEditbtnscol?2:1)].lock=!1,a.hiddenFields&&(e.hiddenFields=a.hiddenFields),e.$thead=t(\"<thead></thead>\"),t.each(h,function(c,u){var p,f=t('<tr style=\"height:25px;\"></tr>');t.each(u,function(c,u){i=u.label||u.name,n=u.align?' align=\"'+u.align+'\"':\"\",o=u.width?' width=\"'+u.width+'\"':\"\",s=u.colspan?' colspan=\"'+u.colspan+'\"':\"\",r=h.length-u.rowspan>1?' rowspan=\"'+(h.length-u.rowspan)+'\"':\"\",l='<div class=\"'+e.classnames.th_resizemark+'\"></div>',d=\"\",u.gridCheckbox&&(i='<input type=\"checkbox\" data-toggle=\"icheck\">'),u.colspan&&(n=' align=\"center\"'),u.thalign&&(n=' align=\"'+u.thalign+'\"'),u.menu&&a.columnMenu&&(d=' class=\"'+e.classnames.th_menu+'\"'),p=t(\"<th\"+d+o+n+s+r+'><div><div class=\"datagrid-space\"></div><div class=\"datagrid-label\">'+i+'</div><div class=\"'+e.classnames.th_cell+'\">'+l+\"</div></div></th>\"),p.data(\"index\",u.index).appendTo(f),p.find(\"> div\").css(\"height\",h.length-u.rowspan>1?24*(h.length-u.rowspan)+\"px\":\"24px\"),r||p.addClass(\"single-row\"),u.gridNumber&&p.addClass(e.classnames.td_linenumber),a.fieldSortable&&u.quicksort&&p.addClass(\"datagrid-quicksort-th\"),u.th=p}),f.appendTo(e.$thead)}),e.$thead.appendTo(e.$element)},createTbody:function(){var t=this,i=a.data;e.columnModel;i?(\"string\"==typeof i&&(i=i.trim().startsWith(\"[\")||i.trim().startsWith(\"{\")?i.toObj():i.toFunc()),\"function\"==typeof i&&(i=i.call()),a.data=i,t.createTrsByData(i)):a.dataUrl&&t.loadData()},setBoxbH:function(t){var i,n=t||a.height,o=0;100>n||(isNaN(n)&&(n=e.$grid.height()),e.$boxT&&(i=e.$boxT.outerHeight(),n-=i,o+=i),e.$toolbar&&(i=e.$toolbar.outerHeight(),n-=i,o+=i),e.$box_paging&&(n-=e.$box_paging.outerHeight()),e.$boxF&&(n-=e.$boxF.outerHeight()),o+=e.$tableH.outerHeight(),n-=e.$boxH.outerHeight(),0>n&&(n=0),e.$boxB.height(n),e.$boxM.height(n).css({top:o}))},fixedH:function(t){this.setBoxbH(t)},showSubMenu:function(a,i,n){var o,s,r=i.outerWidth(),l=n.data(\"width\")||n.outerWidth(),d=e.$boxH.width(),c=function(a,i,n){o=i.offset().left-e.$grid.offset().left-1,s={left:\"50%\"},a.removeClass(\"active\"),i.hasClass(\"position-right\")||r+l>d-o?(n.css({left:\"auto\",right:\"100%\"}),s={right:\"50%\"}):n.css({left:\"100%\",right:\"auto\"}),s.opacity=.2,n.stop().animate(s,\"fast\",function(){t(this).hide()})};a.hover(function(){if(n.appendTo(a),a.hasClass(e.classnames.li_filter)&&n.is(\":visible\"))return!1;var t=a.siblings(\".\"+e.classnames.li_filter);t.length&&t.hasClass(\"active\")&&c(t,i,t.find(\"> .\"+e.classnames.s_filter)),o=i.offset().left-e.$grid.offset().left-1,s={left:\"100%\"},i.hasClass(\"position-right\")||r+l>d-o?(n.css({left:\"auto\",right:\"50%\"}),s={right:\"100%\"}):n.css({left:\"50%\",right:\"auto\"}),s.opacity=1,a.addClass(\"active\"),n.show().stop().animate(s,\"fast\")},function(){return a.hasClass(e.classnames.li_filter)?!1:void c(a,i,n)}),a.on(\"bjui.datagrid.th.submenu.hide\",function(e,a,i){c(t(this),a,i)})},locking:function(t){var a=t.data(\"index\"),i=e.columnModel[a],n=i.lock,o=i.locked,s=e.$menu,r=s.find(\"> ul\"),l=r.find(\"> li.\"+e.classnames.li_lock),d=l.next();o?(l.addClass(\"disable\"),d.removeClass(\"disable\")):(d.addClass(\"disable\"),l.removeClass(\"disable\")),n?(l.show().off(\"click\").on(\"click\",function(){l.hasClass(\"disable\")||(s.hide().data(\"bjui.datagrid.menu.btn\").removeClass(\"active\"),e.colLock(t,!0))}),d.show().off(\"click\").on(\"click\",function(){d.hasClass(\"disable\")||(s.hide().data(\"bjui.datagrid.menu.btn\").removeClass(\"active\"),e.colLock(t,!1))})):(l.hide().off(\"click\"),d.hide().off(\"click\"))},createShowhide:function(){var a;e.$showhide||(e.col_showhide_count=e.columnModel.length,a=t('<ul class=\"'+e.classnames.s_showhide+'\" role=\"menu\"></ul>'),t.each(e.columnModel,function(i,n){\n(n.gridNumber||n.gridCheckbox||n.gridEdit)&&e.col_showhide_count--;var o=t(FRAG.gridShowhide.replaceAll(\"#index#\",n.index).replaceAll(\"#label#\",n.label||\"\")).toggleClass(\"nodisable\",!!(n.gridNumber||n.gridCheckbox||n.gridEdit)),s=function(i){o.click(function(){if(t(this).hasClass(\"disable\"))return!1;var n=t(this),o=!n.find(\"i\").hasClass(\"fa-check-square-o\");i.index;n.toggleClass(\"datagrid-col-check\").find(\"i\").attr(\"class\",\"fa fa\"+(o?\"-check\":\"\")+\"-square-o\"),e.showhideColumn(i.th,o),i.gridNumber||i.gridCheckbox||i.gridEdit||(e.col_showhide_count=o?e.col_showhide_count+1:e.col_showhide_count-1),1==e.col_showhide_count?a.find(\"> li.datagrid-col-check\").addClass(\"disable\"):a.find(\"> li.disable\").removeClass(\"disable\"),a.find(\"> li.nodisable\").removeClass(\"disable\")})};s(n),o.appendTo(a),n.hide&&o.trigger(\"click\")}),a.appendTo(e.$grid),a.data(\"width\",a.outerWidth()),e.$showhide=a)},showhide:function(t,a){var i=t.index,n=t.th,o=e.$tbody.find(\"> tr\"),s=a?\"\":\"none\",r=function(t){var e=t.colspan;a?e++:e--,e?t.th.css(\"display\",\"\"):t.th.css(\"display\",\"none\"),t.th.attr(\"colspan\",e),t.colspan=e,t.parent&&r(t.parent)};\"undefined\"==typeof t.hidden&&(t.hidden=!1),t.hidden!=!a&&(t.hidden=!a,n.css(\"display\",s),o.find(\"> td:eq(\"+i+\")\").css(\"display\",s),e.$colgroupH.find(\"> col\").eq(i).css(\"display\",s),e.$colgroupB.find(\"> col\").eq(i).css(\"display\",s),e.$thead.find(\"> tr.datagrid-filter > th:eq(\"+i+\")\").css(\"display\",s),e.$boxF&&(e.$tableF.find(\"> thead > tr > th:eq(\"+i+\")\").css(\"display\",s),e.$colgroupF.find(\"> col\").eq(i).css(\"display\",s)),t.calc&&e.$tfoot&&e.$tfoot.trigger(\"bjui.datagrid.tfoot.resizeH\"),t.parent&&r(t.parent))},jumpPage:function(t,i){var n,o=e.allData;t&&(e.paging.oldPageCurrent=e.paging.pageCurrent,e.paging.pageCurrent=t),i&&(e.paging.oldPageSize=e.paging.pageSize,e.paging.pageSize=i,e.paging.pageCount=this.getPageCount(i,e.paging.total),e.paging.pageCurrent>e.paging.pageCount&&(e.paging.pageCurrent=e.paging.pageCount)),\"remote\"==a.local?(n=this.getRemoteFilterData(!0),this.loadData(n,!0)):this.initTbody(o,!0)},quickSort:function(t){if(e.isDom){if(\"local\"==a.local)return;a.sortAll=!0}if(e.$tbody.find(\"> tr.\"+e.classnames.tr_edit).length)return void e.$tbody.alertmsg(\"info\",BJUI.getRegional(\"datagrid.editMsg\"));var i,n,o=t.th,s=e.data,r=e.allData,l=t.name,d=t.type,c=e.$thead.find(\"> tr > th.datagrid-quicksort-th\");l||(l=\"datagrid-noname\");var u=function(e){e.sort(function(e,a){var i=typeof e[l],n=typeof a[l];return\"boolean\"==d||\"number\"==d||(i=\"number\"==n)||(i=\"boolean\"==n)?t.sortAsc?e[l]-a[l]:a[l]-e[l]:t.sortAsc?String(e[l]).localeCompare(a[l]):String(a[l]).localeCompare(e[l])})};c.find(\"> div > .datagrid-label > i\").remove(),t.sortAsc?(n=\"desc\",t.sortAsc=!1):(n=\"asc\",t.sortAsc=!0),o.find(\"> div > .datagrid-label\").prepend('<i class=\"fa fa-long-arrow-'+(t.sortAsc?\"up\":\"down\")+'\"></i>'),a.sortAll?\"remote\"==a.local?(i={},i[BJUI.pageInfo.orderField]=l,i[BJUI.pageInfo.orderDirection]=n,i[BJUI.pageInfo.pageSize]=e.paging.pageSize,i[BJUI.pageInfo.pageCurrent]=e.paging.pageCurrent,this.loadData(i,!0)):(u(r),this.initTbody(r,!0)):(u(s),this.createTrs(s,!0))},quickFilter:function(i,n){if(e.isDom){if(\"remote\"!=a.local)return void BJUI.debug(\"Datagrid Plugin: Please change the local option is remote!\");if(!a.dataUrl)return void BJUI.debug(\"Datagrid Plugin: Not Set the dataUrl option!\")}var o,s=this,r=(i.th,e.data),l=e.allData,d=i.name,c=function(t,e,a){var n=!1;switch(t){case\"=\":n=String(e)==String(a);break;case\"!=\":n=String(e)!=String(a);break;case\">\":n=parseFloat(a)>parseFloat(e);break;case\"<\":n=parseFloat(a)<parseFloat(e);break;case\"like\":n=\"select\"==i.type?String(e)==String(a):String(a).indexOf(String(e))>=0}return n},u=function(e,a){var i=function(e){var i=0;return t.each(a,function(t,a){var n=a.datas;return i++,n?(a.model.isFiltered=!0,a.model.th.trigger(\"bjui.datagrid.th.filter\",[!0]),void(n.andor?\"and\"==n.andor?c(n.operatorA,n.valA,e[t])&&c(n.operatorB,n.valB,e[t])&&i--:\"or\"==n.andor&&(c(n.operatorA,n.valA,e[t])||c(n.operatorB,n.valB,e[t]))&&i--:n.operatorB?c(n.operatorB,n.valB,e[t])&&i--:c(n.operatorA,n.valA,e[t])&&i--)):(i--,a.model.isFiltered=!1,a.model.th.trigger(\"bjui.datagrid.th.filter\",[!1]),a.model.$quickfilter&&a.model.$quickfilter.trigger(\"bjui.datagrid.thead.clearfilter\"),!0)}),i?!1:!0};return t.grep(e,function(t,e){return i(t)})};e.filterDatas||(e.filterDatas={}),a.filterMult?e.filterDatas[d]={datas:n,model:i}:(e.filterDatas={},e.filterDatas[d]={datas:n,model:i}),\"remote\"!=a.local&&l&&(e.oldAllData?l=e.oldAllData.concat():e.oldAllData=l.concat()),a.filterAll?\"remote\"==a.local?s.loadData(s.getRemoteFilterData(),!0):(o=u(l,e.filterDatas),e.paging.pageCurrent=1,e.paging.pageCount=this.getPageCount(e.paging.pageSize,o.length),this.initTbody(o,!0)):e.isDom?s.loadData(s.getRemoteFilterData(),!0):(o=u(r,e.filterDatas),this.createTrs(o,!0))},getRemoteFilterData:function(i,n,o){var s={};return e.filterDatas&&!t.isEmptyObject(e.filterDatas)&&(t.each(e.filterDatas,function(t,e){return e.datas?(e.model.isFiltered=!0,e.model.th.trigger(\"bjui.datagrid.th.filter\",[!0]),a.jsonPrefix&&(t=a.jsonPrefix+\".\"+t),e.datas.andor&&(s.andor=e.datas.andor),e.datas.operatorA&&(s[t]=e.datas.valA,s[t+\".operator\"]=e.datas.operatorA),void(e.datas.operatorB&&(s[t]?(s[t]=[s[t],e.datas.valB],s[t+\".operator\"]=[s[t+\".operator\"],e.datas.operatorB]):(s[t]=e.datas.valB,s[t+\".operator\"]=e.datas.operatorB)))):(e.model.isFiltered=!1,e.model.th.trigger(\"bjui.datagrid.th.filter\",[!1]),e.model.$quickfilter&&e.model.$quickfilter.trigger(\"bjui.datagrid.thead.clearfilter\"),!0)}),i||(e.paging.pageCurrent=1)),s[BJUI.pageInfo.pageSize]=e.paging.pageSize,s[BJUI.pageInfo.pageCurrent]=e.paging.pageCurrent,e.$element.data(\"filterDatas\",s),s},setDomData:function(a){var i=e.columnModel,n={},o=a.attr(\"data-hidden-datas\"),s=e.attach;return a.find(\"> td\").each(function(e){var a=t(this),o=i[e],s=a.attr(\"data-val\")||a.text();o.name?n[o.name]=s:n[\"datagrid-noname\"+e]=s}),o&&(o=o.toObj()),t.extend(n,s,{gridNumber:a.index()+1},o),a.data(\"initData\",n),n},initEditInputs:function(){var a=e.columnModel;return e.inputs=[],t.each(a,function(a,i){var n=i.name,o=\"\",s=\"\",r=[],l=\"\";if(i)if(i.attrs&&\"object\"==typeof i.attrs&&t.each(i.attrs,function(t,e){l+=\" \"+t+\"=\"+e}),i==e.linenumberColumn||i==e.checkboxColumn||i==e.editBtnsColumn)e.inputs.push(\"\");else if(n)if(i.rule?o=' data-rule=\"'+i.label+\"：\"+i.rule+'\"':\"date\"==i.type&&(o=' data-rule=\"pattern('+(i.pattern||\"yyyy-MM-dd\")+')\"'),i.type)switch(i.type){case\"date\":i.pattern||(i.pattern=\"yyyy-MM-dd\"),s=' data-pattern=\"'+i.pattern+'\"',e.inputs.push('<input type=\"text\" name=\"'+n+'\" data-toggle=\"datepicker\"'+s+o+l+\">\");break;case\"select\":if(!i.items)return;t.each(i.items,function(e,a){t.each(a,function(t,e){r.push('<option value=\"'+t+'\">'+e+\"</option>\")})}),e.inputs.push('<select name=\"'+n+'\" data-toggle=\"selectpicker\"'+o+l+' data-width=\"100%\">'+r.join(\"\")+\"</select>\");break;case\"boolean\":e.inputs.push('<input type=\"checkbox\" name=\"'+n+'\" data-toggle=\"icheck\"'+o+l+' value=\"true\">');break;case\"lookup\":e.inputs.push('<input type=\"text\" name=\"'+n+'\" data-toggle=\"lookup\" data-custom-event=\"true\"'+o+l+\">\");break;case\"spinner\":e.inputs.push('<input type=\"text\" name=\"'+n+'\" data-toggle=\"spinner\"'+o+l+\">\");break;case\"textarea\":e.inputs.push('<textarea data-toggle=\"autoheight\" rows=\"1\"'+o+l+\"></textarea>\");break;default:e.inputs.push('<input type=\"text\" name=\"'+n+'\"'+o+l+\">\")}else e.inputs.push('<input type=\"text\" name=\"'+n+'\"'+o+l+\">\");else e.inputs.push(\"\")}),e.inputs},contextmenuH:function(){var a=this;e.$tableH.on(\"contextmenu\",function(i){e.$showhide||a.createShowhide();var n=i.pageX,o=i.pageY;t(window).width()<n+e.$showhide.width()&&(n-=e.$showhide.width()),t(window).height()<o+e.$showhide.height()&&(o-=e.$showhide.height()),e.$menu&&e.$grid.trigger(\"click.bjui.datagrid.filter\"),e.$showhide.appendTo(\"body\").css({left:n,top:o,opacity:1,\"z-index\":9999}).show(),t(document).on(\"click\",function(a){var i=t(a.target).closest(\".\"+e.classnames.s_showhide);i.length||e.$showhide.css({left:\"50%\",top:0,opacity:.2,\"z-index\":\"\"}).hide().appendTo(e.$grid)}),i.preventDefault(),i.stopPropagation()})},contextmenuB:function(t,a){t.contextmenu(\"show\",{exclude:\"input, .bootstrap-select\",items:[{icon:\"refresh\",title:BJUI.getRegional(\"datagrid.refresh\"),func:function(t,a){e.refresh()}},{title:\"diver\"},{icon:\"plus\",title:BJUI.getRegional(\"datagrid.add\"),func:function(t,a){e.add()}},{icon:\"edit\",title:BJUI.getRegional(\"datagrid.edit\"),func:function(t,i){var n=t;a&&(n=e.$tbody.find(\"> tr:eq(\"+n.index()+\")\")),e.doEditRow(n)}},{icon:\"undo\",title:BJUI.getRegional(\"datagrid.cancel\"),func:function(t,i){var n=t;a&&(n=e.$tbody.find(\"> tr:eq(\"+n.index()+\")\")),n.hasClass(e.classnames.tr_edit)||(n=e.$tbody.find(\"> tr.\"+e.classnames.tr_edit)),e.doCancelEditRow(n)}},{icon:\"remove\",title:BJUI.getRegional(\"datagrid.del\"),func:function(t,i){var n=t;a&&(n=e.$tbody.find(\"> tr:eq(\"+n.index()+\")\")),e.delRows(n)}}]})}};return i},a.prototype.createTable=function(){var t=this,e=t.options,a=t.tools;e.columns&&a.createThead(),(e.data||e.dataUrl)&&a.createTbody()},a.prototype.setColumnModel=function(){var e=this,a=e.options,i=e.$thead.find(\"> tr\"),n=[],o=[],s=i.length;if(!e.isDom){e.tools.appendColumns();var r,l=s>1?' rowspan=\"'+s+'\"':\"\";a.showCheckboxcol&&(e.columnModel.push(e.checkboxColumn),\"lock\"==a.showCheckboxcol&&(e.checkboxColumn.initLock=!0),r=t(\"<th\"+l+'><input type=\"checkbox\" data-toggle=\"icheck\"></th>'),r.prependTo(i.first()),l&&r.data(\"datagrid.column\",e.checkboxColumn)),a.showLinenumber&&(e.columnModel.unshift(e.linenumberColumn),\"lock\"==a.showLinenumber&&(e.linenumberColumn.initLock=!0),r=t('<th class=\"datagrid-linenumber-td\"'+l+\">No.</th>\"),r.prependTo(i.first()),l&&r.data(\"datagrid.column\",e.linenumberColumn)),a.showEditbtnscol&&(r=t(\"<th\"+l+\">\"+e.editBtnsColumn.label+\"</th>\"),r.appendTo(i.first()),l&&r.data(\"datagrid.column\",e.editBtnsColumn),e.columnModel[r.index()]=e.editBtnsColumn)}i.length&&1==s?(i.height(25),i.find(\"> th\").each(function(i){var n=t(this).addClass(\"single-row\"),o=n.data(\"options\"),s=n.attr(\"width\")||n.outerWidth(),r=n.html();e.columnModel.length&&e.columnModel[i]?(o=e.columnModel[i],o.index=i):(o&&\"string\"==typeof o&&(o=o.toObj()),\"object\"!=typeof o&&(o={}),o.index=i,o.label=r,o.width=\"undefined\"==typeof o.width?s:o.width,o.menu=\"undefined\"==typeof o.menu?!0:o.menu,o.lock=\"undefined\"==typeof o.lock?!0:o.lock,o.hide=\"undefined\"==typeof o.hide?!1:o.hide,o.edit=\"undefined\"==typeof o.edit?!0:o.edit,o.add=\"undefined\"==typeof o.add?!0:o.add,o.quicksort=\"undefined\"==typeof o.quicksort?!0:o.quicksort,o.quickfilter=\"undefined\"==typeof o.quickfilter?!0:o.quickfilter,e.columnModel[i]=o),o.th=n,n.html('<div><div class=\"datagrid-space\"></div><div class=\"datagrid-label\">'+r+'</div><div class=\"'+e.classnames.th_cell+'\"><div class=\"'+e.classnames.th_resizemark+'\"></div></div></div>'),o.menu&&a.columnMenu&&n.addClass(e.classnames.th_menu),a.fieldSortable&&o.quicksort&&n.addClass(\"datagrid-quicksort-th\"),o.align&&n.attr(\"align\",o.align),n.data(\"index\",i).find(\"> div\").css(\"height\",\"24px\")})):i.each(function(i){var s=[],r=[],l=-1,d=0;n.length&&(s=n.concat(),r=o.concat()),n=[],o=[],t(this).height(25).find(\"> th\").each(function(i){var c=t(this),u=c.data(\"options\")||c.data(\"datagrid.column\")||{},h=parseInt(c.attr(\"colspan\")||0),p=parseInt(c.attr(\"rowspan\")||0),f=c.attr(\"width\")||c.outerWidth(),g=c.html();if(u&&\"string\"==typeof u&&(u=u.toObj()),\"object\"!=typeof u&&(u={}),-[1]||1!=h||(h=0),u.label=g,u.th=c,u.gridCheckbox&&(u.label=\"Checkbox\"),l++,h){u.colspan=h;for(var m=s.length?s[l]:l,b=m;m+h>b;b++)n[d++]=b,o[d-1]=u;l+=h-1,c.data(\"index\",l),s.length&&(u.parent=r[l])}p&&1!=p||c.addClass(\"single-row\"),h?c.html('<div style=\"height:'+(p?24*p:24)+'px;\"><div class=\"datagrid-space\"></div><div class=\"datagrid-label\">'+g+'</div><div class=\"'+e.classnames.th_cell+'\"><div class=\"'+e.classnames.th_resizemark+'\"></div></div></div>'):(u.width=\"undefined\"==typeof u.width?f:u.width,u.menu=\"undefined\"==typeof u.menu?!0:u.menu,u.lock=\"undefined\"==typeof u.lock?!0:u.lock,u.hide=\"undefined\"==typeof u.hide?!1:u.hide,u.edit=\"undefined\"==typeof u.edit?!0:u.edit,u.add=\"undefined\"==typeof u.add?!0:u.add,u.quicksort=\"undefined\"==typeof u.quicksort?!0:u.quicksort,u.quickfilter=\"undefined\"==typeof u.quickfilter?!0:u.quickfilter,c.html('<div style=\"height:'+(p?24*p:24)+'px;\"><div class=\"datagrid-space\"></div><div class=\"datagrid-label\">'+g+'</div><div class=\"'+e.classnames.th_cell+'\"><div class=\"'+e.classnames.th_resizemark+'\"></div></div></div>'),u.menu&&a.columnMenu&&c.addClass(e.classnames.th_menu),a.fieldSortable&&u.quicksort&&c.addClass(\"datagrid-quicksort-th\"),u.align&&c.attr(\"align\",u.align),s.length?(u.index=s[l],u.parent=r[l],e.columnModel[s[l]]=u):(u.index=l,e.columnModel[l]=u),c.data(\"index\",u.index))})})},a.prototype.init=function(){if(this.$element.isTag(\"table\")&&!this.$element.data(\"bjui.datagrid.init\")){var e,a,i=this,n=i.tools,o=i.$element.parent();i.options.options&&(\"string\"==typeof i.options.options&&(i.options.options=i.options.options.toObj()),t.extend(i.options,\"object\"==typeof i.options.options&&i.options.options)),i.parentH=o.height(),e=i.options,i.$element.data(\"bjui.datagrid.init\",!0),e.width||(a=o.width()),String(e.width).endsWith(\"%\")&&(a=Math.round(o.width()*parseInt(String(e.width).replace(\"%\",\"\"))/100)),e.height=e.height||300,i.isDom=!1,i.columnModel=[],i.inputs=[],i.$grid=t('<div class=\"bjui-datagrid\"></div>').width(e.width).height(e.height),i.$boxH=t('<div class=\"datagrid-box-h\"></div>'),i.$boxB=t('<div class=\"datagrid-box-b\"></div>'),i.$boxM=t('<div class=\"datagrid-box-m\"></div>').appendTo(i.$grid),i.regional=BJUI.regional.datagrid,i.$element.before(i.$grid),\"string\"==typeof e.paging&&(e.paging=e.paging.toObj()),i.paging=t.extend({},{pageSize:30,selectPageSize:\"30,60,90\",pageCurrent:1,total:0,showPagenum:5},\"object\"==typeof e.paging&&e.paging),i.attach={gridNumber:0,gridCheckbox:\"#checkbox#\",gridEdit:\"#edit#\"},i.$thead=i.$element.find(\"> thead\"),i.$tbody=i.$element.find(\"> tbody\"),i.$tbody&&i.$tbody.find(\"> tr\").length&&(i.isDom=!0),e.columns?(\"string\"==typeof e.columns&&(e.columns.trim().startsWith(\"[\")?e.columns=e.columns.toObj():e.columns=e.columns.toFunc()),\"function\"==typeof e.columns&&(e.columns=e.columns.call()),i.$thead=null,n.createThead()):i.$thead&&i.$thead.length&&i.$thead.find(\"> tr\").length&&i.setColumnModel(),i.initTop(),i.$grid.data(\"bjui.datagrid.table\",i.$element.clone()),i.isDom?(n.appendColumns(),i.$tbody.find(\"> tr > td\").each(function(){var e=t(this),a=e.html();e.html(\"<div>\"+a+\"</div>\")}),i.paging.total?i.paging.pageCount=n.getPageCount(i.paging.pageSize,i.paging.total):(i.paging.total=i.$tbody.find(\"> tr\").length,i.paging.pageCount=1),i.paging.pageCurrent=1,i.initThead()):(i.$tbody=null,(e.data||e.dataUrl)&&n.createTbody())}},a.prototype.refresh=function(){var e=this,a=e.options,i=e.tools,n=(e.isDom,BJUI.pageInfo),o=e.paging,s={};return a.dataUrl?(s[n.pageSize]=o.pageSize,s[n.pageCurrent]=o.pageCurrent,i.loadData(s,!0),e.filterDatas=null,t.each(e.columnModel,function(t,e){e.th.trigger(\"bjui.datagrid.th.filter\",[!1]),e.isFiltered=!1,e.$quickfilter&&e.$quickfilter.trigger(\"bjui.datagrid.thead.clearfilter\")}),void e.$thead.find(\"> tr > th.datagrid-quicksort-th\").find(\"> div > .datagrid-label > i\").remove()):a.data&&a.data.length?void i.initTbody(e.allData,!0):void BJUI.debug(\"Datagrid Plugin: Not Set the dataUrl option!\")},a.prototype.destroy=function(){var t=this,e=t.$grid.data(\"bjui.datagrid.table\");e&&(t.$element.html(e.html()).insertBefore(t.$grid),t.$grid.remove())},a.prototype.initTop=function(){var e,a=this,i=a.options,n=(a.regional,!1),o='<div class=\"btn-group\" role=\"group\"></div>',s='<button type=\"button\" class=\"btn\" data-icon=\"\"></button>';if(i.gridTitle&&(a.$boxT=t('<div class=\"datagrid-title\">'+i.gridTitle+\"</div>\"),a.$boxT.appendTo(a.$grid)),i.showToolbar&&(i.toolbarItem||i.toolbarCustom)){if(a.$toolbar=t('<div class=\"datagrid-toolbar\"></div'),i.toolbarItem){var r=i.toolbarItem.toFunc();\"function\"==typeof r&&(i.toolbarItem=r.apply()),n=!0,i.toolbarItem.indexOf(\"all\")>=0&&(i.toolbarItem=\"add, edit, cancel, save, |, del, |, refresh, |, import, export\"),t.each(i.toolbarItem.split(\",\"),function(n,r){return r=r.trim().toLocaleLowerCase(),e&&\"|\"!=r||(e=t(o).appendTo(a.$toolbar),\"|\"!=r)?void(\"add\"==r?a.$toolbar_add=t(s).attr(\"data-icon\",\"plus\").addClass(\"btn-blue\").text(BJUI.getRegional(\"datagrid.add\")).appendTo(e).on(\"click\",function(t){a.add()}):\"edit\"==r?a.$toolbar_edit=t(s).attr(\"data-icon\",\"edit\").addClass(\"btn-green\").text(BJUI.getRegional(\"datagrid.edit\")).appendTo(e).on(\"click\",function(e){var n=a.$tbody.find(\"> tr.\"+a.classnames.tr_selected);return i.editMode?void(n.length?i.inlineEditMult?a.doEditRow(n):a.$lastSelect?a.doEditRow(a.$lastSelect):a.doEditRow(n.first()):t(this).alertmsg(\"info\",BJUI.getRegional(\"datagrid.selectMsg\"))):!1}):\"cancel\"==r?a.$toolbar_calcel=t(s).attr(\"data-icon\",\"undo\").addClass(\"btn-orange\").text(BJUI.getRegional(\"datagrid.cancel\")).appendTo(e).on(\"click\",function(t){a.doCancelEditRow(a.$tbody.find(\"> tr.\"+a.classnames.tr_edit))}):\"save\"==r?a.$toolbar_save=t(s).attr(\"data-icon\",\"save\").addClass(\"btn-default\").text(BJUI.getRegional(\"datagrid.save\")).appendTo(e).on(\"click\",function(t){a.doSaveEditRow()}):\"del\"==r?a.$toolbar_del=t(s).attr(\"data-icon\",\"times\").addClass(\"btn-red\").text(BJUI.getRegional(\"datagrid.del\")).appendTo(e).on(\"click\",function(e){var i=a.$tbody.find(\"> tr.\"+a.classnames.tr_selected);i.length?a.delRows(i):t(this).alertmsg(\"info\",BJUI.getRegional(\"datagrid.selectMsg\"))}):\"refresh\"==r?a.$toolbar_refresh=t(s).attr(\"data-icon\",\"refresh\").addClass(\"btn-green\").text(BJUI.getRegional(\"datagrid.refresh\")).appendTo(e).on(\"click\",function(t){a.refresh()}):\"import\"==r?a.$toolbar_add=t(s).attr(\"data-icon\",\"sign-in\").addClass(\"btn-blue\").text(BJUI.getRegional(\"datagrid.import\")).appendTo(e).on(\"click\",function(t){if(i.importOption){var e=i.importOption;\"string\"==typeof e&&(e=e.toObj()),e.options&&e.options.url&&(\"dialog\"==e.type?a.$grid.dialog(e.options):\"navtab\"==e.type?a.$grid.navtab(e.options):a.$grid.bjuiajax(\"doAjax\",e.options))}}):\"export\"==r&&(a.$toolbar_add=t(s).attr(\"data-icon\",\"sign-out\").addClass(\"btn-green\").text(BJUI.getRegional(\"datagrid.export\")).appendTo(e).on(\"click\",function(t){if(i.exportOption){var e=i.exportOption;\"string\"==typeof e&&(e=e.toObj()),e.options&&e.options.url&&(\"dialog\"==e.type?a.$grid.dialog(e.options):\"navtab\"==e.type?a.$grid.navtab(e.options):\"file\"==e.type?a.$grid.bjuiajax(\"ajaxdownload\",e.options):a.$grid.bjuiajax(\"doAjax\",e.options))}}))):!0})}if(i.toolbarCustom){var l,d=t('<div style=\"display:inline-block;\"></div>');if(\"string\"==typeof i.toolbarCustom){var c=t(i.toolbarCustom);c&&c.length?l=c:(c=c.toFunc(),c&&(l=c.call(a),\"string\"==typeof l&&(l=t(l))))}else\"function\"==typeof i.toolbarCustom?(l=i.toolbarCustom.call(a),\"string\"==typeof l&&(l=t(l))):l=i.toolbarCustom;l&&l.length&&\"string\"!=typeof l&&(n&&d.css(\"margin-left\",\"5px\"),d.appendTo(a.$toolbar),l.appendTo(d))}a.$toolbar.appendTo(a.$grid)}},a.prototype.initThead=function(){var e,a=this,i=a.options,n=a.tools,o=a.columnModel,s=[],r=a.$tbody.find(\"> tr:first-child > td\");a.init_thead=!0,a.$colgroupH=t(\"<colgroup></colgroup>\"),a.$tableH=t('<table class=\"table table-bordered\"></table>').append(a.$thead),a.$trsH=a.$thead.find(\"> tr\"),a.table_width=0,t.each(a.columnModel,function(t,i){e=i.width?i.width:r.eq(t).outerWidth()||50,s.push('<col style=\"width:'+e+'px;\">'),i.width=e,a.table_width+=e}),a.$thead.before(a.$colgroupH.append(s.join(\"\"))),a.$grid.append(a.$boxH.append(t('<div class=\"datagrid-wrap-h\"></div>').append(a.$tableH)));var l=a.$trsH.find(\"> th\");l.filter(\".datagrid-quicksort-th\").on(\"click.bjui.datagrid.quicksort\",function(e){var i=t(e.target);i.closest(\".\"+a.classnames.th_cell).length||a.isResize||n.quickSort(o[t(this).data(\"index\")])}),l.filter(\".datagrid-column-menu\").on(\"bjui.datagrid.th.filter\",function(e,i){var n=t(this),o=n.find(\"> div > .\"+a.classnames.th_cell+\"> .\"+a.classnames.btn_menu+\"> .btn\");i?(n.addClass(\"filter-active\"),o.find(\"> i\").attr(\"class\",\"fa fa-filter\")):(n.removeClass(\"filter-active\"),o.find(\"> i\").attr(\"class\",\"fa fa-bars\"))}),i.contextMenuH&&n.contextmenuH(),a.initTbody(),i.columnResize&&a.colResize(),i.columnMenu&&a.colMenu(),i.paging&&a.initPaging(),i.editMode&&a.edit(),a.resizeGrid();var d=function(){i.showTfoot&&a.initTfoot(),a.initLock(),i.height&&n.fixedH(),setTimeout(function(){a.$grid.initui(),a.initEvents()},50),setTimeout(function(){a.fixedWidth(\"init\")},500)};i.filterThead?a.delayRender?a.delayFilterTimeout=setInterval(function(){a.delayRender||(clearInterval(a.delayFilterTimeout),a.filterInThead(),d())},100):(a.filterInThead(),d()):d()},a.prototype.fixedWidth=function(e){var a,i,n,o=this,s=o.options,r=0,l=o.columnModel,d=l.length;if(!e||!o.initFixedW){o.initFixedW=!0;var c=function(){o.$boxH.find(\"> div\").css(\"width\",\"\"),o.$boxB.find(\"> div\").css(\"width\",\"\"),o.$boxF&&o.$boxF.find(\"> div\").css(\"width\",\"\"),o.$pagingCon&&o.$pagingCon.css(\"width\",\"\"),a=o.$boxB.find(\"> div\").width(),a&&(o.$boxB.find(\"> div\").width(a),o.$boxH.find(\"> div\").width(a),o.$boxF&&o.$boxF.find(\"> div\").width(a),o.table_width>a?o.$pagingCon&&o.$pagingCon.width(a):o.$pagingCon&&o.$pagingCon.width(o.table_width))},u=function(){a&&a<o.table_width&&(l[d-1]==o.editBtnsColumn&&(r+=o.editBtnsColumn.width,d--),l[0]==o.linenumberColumn&&(r+=o.linenumberColumn.width,d--),(l[0]==o.checkboxColumn||l[1]==o.checkboxColumn)&&(r+=o.checkboxColumn.width,d--),i=parseInt((a-o.table_width-r)/d),i?i--:i=-1,t.each(l,function(t,e){return e==o.linenumberColumn||e==o.checkboxColumn||e==o.editBtnsColumn?!0:(n=e.width+i,0>=n&&(n=1),o.$colgroupH.find(\"> col:eq(\"+e.index+\")\").width(n),o.$colgroupB.find(\"> col:eq(\"+e.index+\")\").width(n),o.$colgroupF&&o.$colgroupF.find(\"> col:eq(\"+e.index+\")\").width(n),void(e.new_width=n))}))};s.fullGrid?(c(),u()):c()}},a.prototype.initTbody=function(){var e=this,a=e.options,i=(e.tools,e.$tbody.find(\"> tr\")),n=(i.find(\"> td\"),\"0\");e.init_tbody=!0,e.$colgroupB=e.$colgroupH.clone(),e.$tableB=e.$element,e.$tableB.removeAttr(\"data-toggle width\").empty().append(e.$tbody),e.$tbody.before(e.$colgroupB),e.$grid.append(e.$boxB.append(t('<div class=\"datagrid-wrap-b\"></div>').append(e.$tableB))),-[1]||(n=\"auto\"),a.fullGrid&&(n=\"100%\"),e.$tableH.width(n),e.$tableB.width(n),e.$tableB.addClass(\"table table-bordered\").removeClass(\"table-hover\"),e.$boxB.scroll(function(){e.$boxH.find(\"> div\").prop(\"scrollLeft\",this.scrollLeft),e.$boxF&&e.$boxF.find(\"> div\").prop(\"scrollLeft\",this.scrollLeft),e.$lockB&&e.$lockB.prop(\"scrollTop\",this.scrollTop)}),e.isDom&&(a.showLinenumber&&e.showLinenumber(a.showLinenumber),a.showCheckboxcol&&e.showCheckboxcol(a.showCheckboxcol),a.showEditbtnscol&&e.showEditCol(a.showEditbtnscol),e.$grid.data(e.datanames.tbody,e.$tbody.clone()))},a.prototype.initEvents=function(e){var a=this,i=a.options,n=a.$tbody.find(\"> tr\");e||(e=n),e.on(\"click.bjui.datagrid.tr\",function(e,i){var n,o=t(this),s=o.index(),r=a.$tbody.find(\"> tr.\"+a.classnames.tr_selected),l=a.$lastSelect;a.$lockTbody&&a.$lockTbody.find(\"> tr\");if(i)n=i.is(\":checked\"),n||(a.$lastSelect=o),a.selectedRows(o,!n);else{if(o.hasClass(a.classnames.tr_edit))return;BJUI.KeyPressed.ctrl||BJUI.KeyPressed.shift?(window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),BJUI.KeyPressed.ctrl?(o.hasClass(a.classnames.tr_selected)||(a.$lastSelect=o),a.selectedRows(o)):BJUI.KeyPressed.shift&&(l||(l=a.$lastSelect=o),l.length&&(a.selectedRows(null),l.index()!=s?l.index()>s?a.selectedRows(o.nextUntil(l).add(o).add(l),!0):a.selectedRows(o.prevUntil(l).add(o).add(l),!0):a.selectedRows(s)))):r.length>1&&o.hasClass(a.classnames.tr_selected)?(a.selectedRows(r.not(o)),a.$lastSelect=o):(r.length&&r[0]!=this&&a.selectedRows(null),o.hasClass(a.classnames.tr_selected)||(a.$lastSelect=o),a.selectedRows(o))}}).on(\"mouseenter.bjui.datagrid\",function(e){var i=t(this),n=i.index();i.addClass(\"datagrid-hover\"),a.$lockTbody&&a.$lockTbody.find(\"> tr:eq(\"+n+\")\").addClass(\"datagrid-hover\")}).on(\"mouseleave.bjui.datagrid\",function(e){var i=t(this),n=i.index();i.removeClass(\"datagrid-hover\"),a.$lockTbody&&a.$lockTbody.find(\"> tr:eq(\"+n+\")\").removeClass(\"datagrid-hover\")}).on(\"bjui.datagrid.tr.delete\",function(e){var i,n=t(this),o=n.index(),s=a.data,r=a.allData,l=a.$lockTbody&&a.$lockTbody.find(\"> tr\");a.isDom||(i=s[o].gridIndex,a.data=s.remove(o),a.allData=r.remove(i)),a.columnModel[0]==a.linenumberColumn&&(n.nextAll().each(function(){var e=t(this).find(\"> td:eq(0)\"),a=parseInt(e.text());e.text(a-1)}),l&&l.eq(o).trigger(\"bjui.datagrid.tr.delete\",[o])),n.remove()}),i.contextMenuB&&e.each(function(){a.tools.contextmenuB(t(this))}),e.each(function(){var e=t(this);e.find(\"> td.\"+a.classnames.td_checkbox).find(\"input\").on(\"ifClicked\",function(){e.trigger(\"click.bjui.datagrid.tr\",[t(this)])})}),a.checkboxColumn&&a.checkboxColumn.th&&a.checkboxColumn.th.find(\"input\").on(\"ifChanged\",function(){var e=t(this).is(\":checked\"),i=a.$tbody.find(\"> tr\");a.selectedRows(i,e)})},a.prototype.initTfoot=function(){var e=this,a=e.options,i=e.tools,n=e.columnModel,o=t(\"<tr></tr>\");e.$boxF=t('<div class=\"datagrid-box-f\"></div>'),e.$colgroupF=e.$colgroupH.clone(),e.$tableF=e.$tableH.clone().empty(),e.$tableF.append(e.$colgroupF),e.$boxF.append(t('<div class=\"datagrid-wrap-h\"></div>').append(e.$tableF)),e.$boxF.insertAfter(e.$boxB),e.$tfoot=t(\"<thead></thead>\"),t.each(n,function(e,a){var i=t(\"<th><div></div></th>\");if(a.calc){var n='<div><div class=\"datagrid-calcbox\">#tit#</div>#number#</div>';\"avg\"==a.calc?i.html(n.replace(\"#tit#\",a.calcTit||\"AVG\").replace(\"#number#\",(a.calc_sum/a.calc_count).toFixed(a.calcDecimal||2))):\"count\"==a.calc?i.html(n.replace(\"#tit#\",a.calcTit||\"COUNT\").replace(\"#number#\",a.calc_count)):\"sum\"==a.calc?i.html(n.replace(\"#tit#\",a.calcTit||\"SUM\").replace(\"#number#\",a.calc_sum)):\"max\"==a.calc?i.html(n.replace(\"#tit#\",a.calcTit||\"MAX\").replace(\"#number#\",a.calc_max)):\"min\"==a.calc&&i.html(n.replace(\"#tit#\",a.calcTit||\"MIN\").replace(\"#number#\",a.calc_min))}a.hidden&&i.css(\"display\",\"none\"),i.appendTo(o)}),e.$tfoot.append(o).appendTo(e.$tableF),e.$tfoot.on(\"bjui.datagrid.tfoot.resizeH\",function(){i.setBoxbH(a.height)})},a.prototype.selectedRows=function(e,a){var i=this,n=i.$lockTbody&&i.$lockTbody.find(\"> tr\"),o=i.$tbody.find(\"> tr\"),s=function(t){\"undefined\"==typeof a&&(a=!0),o.eq(t).toggleClass(i.classnames.tr_selected,a).find(\"> td.\"+i.classnames.td_checkbox+\" input\").iCheck(a?\"check\":\"uncheck\"),n&&n.eq(t).toggleClass(i.classnames.tr_selected,a).find(\"> td.\"+i.classnames.td_checkbox+\" input\").iCheck(a?\"check\":\"uncheck\")};null==e?(o.removeClass(i.classnames.tr_selected).find(\"> td.\"+i.classnames.td_checkbox+\" input\").iCheck(\"uncheck\"),n&&n.removeClass(i.classnames.tr_selected).find(\"> td.\"+i.classnames.td_checkbox+\" input\").iCheck(\"uncheck\")):\"object\"==typeof e?e.each(function(){var e=t(this),o=e.index();\"undefined\"!=typeof a?s(o):(e.toggleClass(i.classnames.tr_selected).trigger(\"bjui.datagrid.tr.selected\").find(\"> td.\"+i.classnames.td_checkbox+\" input\").iCheck(e.hasClass(i.classnames.tr_selected)?\"check\":\"uncheck\"),n&&n.eq(o).toggleClass(i.classnames.tr_selected).trigger(\"bjui.datagrid.tr.selected\").find(\"> td.\"+i.classnames.td_checkbox+\" input\").iCheck(e.hasClass(i.classnames.tr_selected)?\"check\":\"uncheck\"))}):isNaN(e)?t.each(e.split(\",\"),function(t,e){s(parseInt(e.trim()))}):isNaN(e)||s(parseInt(e)),i.$lastSelect&&!i.$lastSelect.hasClass(i.classnames.tr_selected)&&(i.$lastSelect=null);var r=i.$tbody.find(\"> tr.\"+i.classnames.tr_selected),l=[];r.each(function(){var e,a=t(this),n=a.index();e=i.isDom?a.data(\"initData\")||tools.setDomData(a):i.data[n],l.push(e)}),i.$element.data(\"selectedTrs\",r).data(\"selectedDatas\",l)},a.prototype.initLock=function(){var e=this;e.columnModel;e.col_lock_count=0,t.each(e.columnModel,function(t,a){a.initLock&&e.col_lock_count++}),e.col_lock_count&&e.doLock()},a.prototype.colLock=function(e,a){var i,n,o,s=this;if(\"number\"==t.type(e)){if(n=parseInt(e),0>n||n>s.columnModel.length-1)return;o=s.columnModel[n],i=o.th}else i=e,n=i.data(\"index\"),o=s.columnModel[n];o!=s.editBtnsColumn&&o.index!=s.columnModel.length-1&&(\"undefined\"==typeof o.locked&&(o.locked=!1),o.locked!=a&&(o.initLock=a,a?s.col_lock_count++:s.col_lock_count--,s.col_lock_count<0&&(s.col_lock_count=0),s.doLock()))},a.prototype.fixedLockItem=function(e){var a=this,i=a.columnModel,n=a.$thead.find(\"> tr.datagrid-filter > th\"),o=a.$lockTbody&&a.$lockTbody.find(\"> tr\");e?(n&&n.length&&a.$lockThead.find(\"> tr.datagrid-filter > th:visible\").each(function(){var e=t(this),a=e.index(),i=n.eq(a);i.clone().html(\"\").insertAfter(i),i.show().insertAfter(e),e.remove()}),o&&o.length&&o.filter(\".\"+a.classnames.tr_edit).each(function(){var e=t(this),n=e.index();e.find(\"> td.\"+a.classnames.td_edit+\":visible\").each(function(){var e,o,s=t(this),r=s.index(),l=i[r];l.locked&&(e=a.$tbody.find(\"> tr:eq(\"+n+\")\"),o=e.find(\"> td:eq(\"+r+\")\"),o.clone().insertAfter(o),o.show().insertAfter(s),s.remove())})})):(n&&n.length&&a.$lockThead&&a.$lockThead.find(\"> tr.datagrid-filter > th:visible\").each(function(){var e=t(this),a=e.index(),i=n.eq(a);e.clone().insertAfter(e),e.hide().insertAfter(i),i.remove()}),o&&o.length&&o.filter(\".\"+a.classnames.tr_edit).each(function(){var e,n,o=t(this),s=o.find(\"> td:eq(\"+i.lockIndex+\")\"),r=o.index();s.hasClass(a.classnames.td_edit)&&(e=a.$tbody.find(\"> tr:eq(\"+r+\")\"),n=e.find(\"> td:eq(\"+index+\")\"),s.clone().insertAfter(s),s.hide().insertAfter(n),n.remove())}))},a.prototype.doLock=function(){var e,a,i=this,n=(i.options,i.tools),o=i.columnModel,s=(i.$tableH.width(),0),r=0,l=i.$boxF&&!0,d=0;i.$lockBox&&i.$lockBox.length?(i.fixedLockItem(),i.$lockTableH.empty(),i.$lockTableB.empty(),i.$lockTableF&&i.$lockTableF.empty()):(i.$lockBox=t('<div class=\"datagrid-box-l\"></div>'),i.$lockH=t('<div class=\"datagrid-box-h\"></div>'),i.$lockB=t('<div class=\"datagrid-box-b\"></div>'),i.$lockF=t('<div class=\"datagrid-box-f\"></div>'),i.$lockTableH=t('<table class=\"table table-bordered\"></table>'),i.$lockTableB=t(\"<table></table>\").addClass(i.$tableB.attr(\"class\")),i.$lockTableF=t('<table class=\"table table-bordered\"></table>'),i.$lockH.append(i.$lockTableH),i.$lockB.append(i.$lockTableB),i.$lockF.append(i.$lockTableF),i.$lockBox.append(i.$lockH).append(i.$lockB).prependTo(i.$grid),l&&(i.$lockBox.append(i.$lockF),i.$lockF.css(\"margin-top\",i.$boxB.outerHeight()-i.$boxB[0].clientHeight).height(i.$boxF.outerHeight()))),i.$boxT&&(d+=i.$boxT.outerHeight()),i.$toolbar&&(d+=i.$toolbar.outerHeight()),d&&i.$lockBox.css({top:d}),t.each(o,function(t,e){e.lockShow=!1,e.lockHide=!1,e.initLock?(e.hidden&&n.showhide(e,!0),e.lockHide=!0,e.locked=!0,e.lockIndex=r++,s+=e.width):(e.lockShow=!0,e.hidden?e.lockShow=!1:n.showhide(e,!1),e.locked&&(e.lockShow=!0),e.locked=!1)}),i.$lockThead=i.$thead.clone(!0),i.$lockTbody=i.$tbody.clone(),i.$lockColgroupH=i.$colgroupH.clone(),i.$lockColgroupB=i.$colgroupB.clone(),i.$lockTableH.append(i.$lockColgroupH).append(i.$lockThead).css(\"width\",s),i.$lockTableB.append(i.$lockColgroupB).append(i.$lockTbody).css(\"width\",s),l&&(i.$lockTfoot=i.$tableF.find(\"> thead\").clone(),i.$lockColgroupF=i.$colgroupF.clone(),i.$lockTableF.append(i.$lockColgroupF).append(i.$lockTfoot).css(\"width\",s)),t.each(i.columnModel,function(t,e){e.lockShow&&n.showhide(e,!0),e.lockHide&&n.showhide(e,!1)}),i.$boxH.find(\"> div\").css(\"width\",\"\"),i.$boxB.find(\"> div\").css(\"width\",\"\"),i.$boxF&&i.$boxF.find(\"> div\").css(\"width\",\"\"),setTimeout(function(){var t=i.$boxB.find(\"> div\").width();i.$boxB.find(\"> div\").width(t),i.$boxH.find(\"> div\").width(t),i.$boxF&&i.$boxF.find(\"> div\").width(t)},50),0==i.col_lock_count?i.$lockBox.hide():i.$lockBox.show(),s>1&&(s-=1),i.$boxH.css(\"margin-left\",s),i.$boxB.css(\"margin-left\",s),l&&i.$boxF.css(\"margin-left\",s),i.$lockB.height(i.$boxB[0].clientHeight),i.$lockB.prop(\"scrollTop\",i.$boxB[0].scrollTop);var c=i.$lockTableH.height(),u=i.$thead.height(),h=i.$lockTableF&&i.$lockTableF.height(),p=i.$tableF&&i.$tableF.height();c!=u&&(u>c?i.$lockTableH.height(u):i.$tableH.height(c)),\nh&&p&&h!=p&&(p>h?i.$lockTableF.find(\"> thead > tr:first-child > th:visible:first\").height(p):i.$tableF.find(\"> thead > tr:first-child > th:visible:first\").height(h)),a=i.$lockTbody.find(\"> tr\"),e=i.$tbody.find(\"> tr\"),setTimeout(function(){var n=i.$lockTableB.height(),o=i.$tableB.height();n!=o&&(n>o?a.each(function(a){var i=t(this),n=i.find(\"> td:visible:first\"),o=n.outerHeight();o>30&&(i.height(o),e.eq(a).height(o))}):e.each(function(e){var i=t(this),n=i.find(\"> td:visible:first\"),o=n.outerHeight();o>30&&(i.height(o),a.eq(e).height(o))}))},20),i.fixedLockItem(1),a.find(\"> td:hidden\").remove(),i.initLockEvents(a)},a.prototype.initLockEvents=function(e){if(this.$lockTbody){var a=this,i=a.options;e||(e=a.$lockTbody.find(\"> tr\")),e.on(\"click.bjui.datagrid.tr\",function(){var e=t(this).index();a.$tbody.find(\"> tr:eq(\"+e+\")\").trigger(\"click.bjui.datagrid.tr\")}).on(\"bjui.datagrid.tr.delete\",function(e,i){var n=t(this);a.linenumberColumn&&a.linenumberColumn.locked&&n.nextAll().each(function(){var e=t(this).find(\"> td:eq(0)\"),a=parseInt(e.text());e.text(a-1)}),n.remove()}).find(\"> td.\"+a.classnames.td_checkbox+\" input\").on(\"ifChanged\",function(){var e=t(this),i=e.closest(\"tr\"),n=i.index();e.is(\":checked\")?(i.addClass(a.classnames.tr_selected),$trs.eq(n).addClass(a.classnames.tr_selected)):(i.removeClass(a.classnames.tr_selected),$trs.eq(n).removeClass(a.classnames.tr_selected))}),i.contextMenuB&&e.each(function(){a.tools.contextmenuB(t(this),!0)})}},a.prototype.filterInThead=function(){var e=this,a=(e.options,e.tools),i=e.regional,n=e.columnModel,o=t('<tr class=\"datagrid-filter\"></tr>'),s=function(t,e,a){var i=e.type;\"date\"==i?t.on(\"afterchange.bjui.datepicker\",function(a,i){r(e,t.val())}).change(function(){r(e,t.val())}):\"lookup\"==i?(a.on(\"customEvent.bjui.lookup\",'[data-toggle=\"lookupbtn\"]',function(a,i){for(var n in i)e.name==n&&(t.val(i[n]),r(e,i[n]))}),t.change(function(){r(e,t.val())})):t.change(function(){r(e,t.val())})},r=function(t,e){a.quickFilter(t,e?{operatorA:\"like\",valA:e}:null)};e.inputs&&e.inputs.length||a.initEditInputs(),t.each(n,function(a,n){var r=t(e.inputs[a]),l=t(\"<th></th>\"),d=\"\";return n.quickfilter?(\"spinner\"==n.type?r=t('<input type=\"text\" name=\"'+n.name+'\">'):\"boolean\"==n.type?r=t(BJUI.doRegional('<select name=\"'+n.name+'\" data-toggle=\"selectpicker\"><option value=\"\">#all#</option><option value=\"true\">#true#</option><option value=\"false\">#false#</option></select>',i)):\"select\"==n.type&&(n.attrs&&\"object\"==typeof n.attrs&&t.each(n.attrs,function(t,e){d+=\" \"+t+\"=\"+e}),r.find(\"> option:first-child\").val()&&(r=t('<select name=\"'+n.name+'\" data-toggle=\"selectpicker\"'+d+\"></select>\").append(BJUI.doRegional('<option value=\"\">#all#</option>',i)).append(r.html()))),l.append(r),n.hidden&&l.hide(),\"boolean\"==n.type&&l.attr(\"align\",\"center\"),l.appendTo(o),r.data(\"clearFilter\",!1),s(r,n,l),r.on(\"bjui.datagrid.thead.clearfilter\",function(){r.val(\"\"),(\"boolean\"==n.type||\"select\"==n.type)&&r.selectpicker(\"refresh\")}),void(n.$quickfilter=r)):(l.appendTo(o),!0)}),o.appendTo(e.$thead).initui()},a.prototype.showLinenumber=function(e){var a=this,i=a.options,n=a.columnModel,o=n[0];a.data;if(o==a.linenumberColumn)\"string\"!=typeof e||\"lock\"!=e&&\"unlock\"!=e?a.showhideColumn(o.th,e?!0:!1):a.colLock(o.th,\"lock\"==e?!0:!1);else if(e){var s,r=a.$thead.find(\"> tr\"),l='<col style=\"width:30px;\">',d=r.filter(\".datagrid-filter\"),c=r.length-d.length;o=a.linenumberColumn,n.unshift(o),a.$colgroupH.prepend(l),a.$colgroupB.prepend(l),a.$colgroupF&&a.$colgroupF.prepend(l),s=t('<th align=\"center\" rowspan=\"'+c+'\" class=\"'+a.classnames.td_linenumber+'\">'+a.linenumberColumn.label+\"</th>\"),r.first().prepend(s),d.length&&d.prepend(\"<th></th>\"),o.th=s,o.index=0,o.width=30,a.$tbody.find(\"> tr\").each(function(e){t(this).prepend('<td align=\"center\" class=\"'+a.classnames.td_linenumber+'\">'+(e+1)+\"</td>\")}),a.$tableF&&a.$tableF.find(\"> thead > tr\").prepend(\"<th></th>\"),t.each(n,function(t,e){e.index=t,e.th&&e.th.data(\"index\",t)}),\"lock\"==e&&a.colLock(s,!0),a.$showhide&&(a.$showhide.remove(),a.colShowhide(i.columnShowhide))}},a.prototype.showCheckboxcol=function(e){var a,i=this,n=i.options,o=i.columnModel,s=o[0],r=i.data;if(o[0]==i.checkboxColumn&&(a=o[0]),o[1]==i.checkboxColumn&&(a=o[1]),a)\"string\"!=typeof e||\"lock\"!=e&&\"unlock\"!=e?i.showhideColumn(a.th,e):i.colLock(a.th,\"lock\"==e?!0:!1);else if(e){var l,d,c=i.$thead.find(\"> tr\"),u='<col style=\"width:26px;\">',h=c.filter(\".datagrid-filter\"),p=c.length-h.length;a=i.checkboxColumn,l=t('<th align=\"center\" rowspan=\"'+p+'\" class=\"'+i.classnames.td_checkbox+'\"><div><input type=\"checkbox\" data-toggle=\"icheck\"></div></th>'),s==i.linenumberColumn?(o.splice(1,0,a),r&&r.splice(1,0,{name:a.name}),a.index=1,i.$colgroupH.find(\"> col:first\").after(u),i.$colgroupB.find(\"> col:first\").after(u),i.$colgroupF&&i.$colgroupF.find(\"> col:first\").after(u),h.length&&h.find(\"> th:first\").after(\"<th></th>\"),c.first().find(\"> th:first\").after(l),i.$tableF&&i.$tableF.find(\"> thead > tr > th:first\").after(\"<th></th>\")):(o.unshift(a),r&&r.unshift({name:a.name}),a.index=0,i.$colgroupH.prepend(u),i.$colgroupB.prepend(u),i.$colgroupF&&i.$colgroupF.prepend(u),h.length&&h.prepend(\"<th></th>\"),c.first().prepend(l),i.$tableF&&i.$tableF.find(\"> thead > tr\").prepend(\"<th></th>\")),l.initui(),a.th=l,a.width=26,i.$tbody.find(\"> tr\").each(function(e){d=t('<td align=\"center\" class=\"'+i.classnames.td_checkbox+'\"><input type=\"checkbox\" data-toggle=\"icheck\" name=\"datagrid.checkbox\"></td>'),0==a.index?t(this).prepend(d):t(this).find(\"> td:first\").after(d),d.initui()}),t.each(o,function(t,e){e.index=t,e.th&&e.th.data(\"index\",t)}),\"lock\"==e&&i.colLock(l,!0),i.$showhide&&(i.$showhide.remove(),i.colShowhide(n.columnShowhide))}},a.prototype.showEditCol=function(e){var a=this,i=a.options,n=a.columnModel,o=n[n.length-1];a.data;if(o==a.editBtnsColumn)a.showhideColumn(o.th,e?!0:!1);else if(e){var s,r,l=a.$thead.find(\"> tr\"),d='<col style=\"width:110px;\">',c=l.filter(\".datagrid-filter\"),u=l.length-c.length;o=a.editBtnsColumn,n.push(o),a.$colgroupH.append(d),a.$colgroupB.append(d),a.$colgroupF&&a.$colgroupF.append(d),s=t('<th align=\"center\" rowspan=\"'+u+'\">'+a.editBtnsColumn.label+\"</th>\"),l.first().append(s),c.length&&c.append(\"<th></th>\"),s.initui().data(\"index\",n.length-1),o.th=s,o.width=110,o.index=n.length-1,a.$tbody.find(\"> tr\").each(function(e){r=t('<td align=\"center\" class=\"'+a.classnames.s_edit+'\">'+BJUI.doRegional(FRAG.gridEditBtn,a.regional)+\"</td>\"),t(this).append(r),r.initui()}),a.edit(a.$tbody.find(\"> tr\")),a.$tableF&&a.$tableF.find(\"> thead > tr\").append(\"<th></th>\"),a.$showhide&&(a.$showhide.remove(),a.colShowhide(i.columnShowhide))}},a.prototype.colResize=function(){var e=this,a=e.tools,i=e.columnModel,n=e.$thead,o=e.$grid.find(\"> .resizeProxy\");o.length||(o=t('<div class=\"resizeProxy\" style=\"left:0; display:none;\"></div>'),o.appendTo(e.$grid)),n.find(\"> tr > th\").each(function(n){var s=t(this),r=s.find(\"> div > .\"+e.classnames.th_cell+\"> .\"+e.classnames.th_resizemark);r.on(\"mousedown.bjui.datagrid.resize\",function(n){var r,l,d=e.$boxH.scrollLeft(),c=parseInt(e.$boxH.css(\"marginLeft\")||0),u=a.getRight(s)-d+c,h=s.data(\"index\"),p=i[h],f=p.th.width(),g=e.$tbody.find(\"> tr\"),m=e.$lockTbody&&e.$lockTbody.find(\"> tr\"),b=e.$lockTableB&&e.$lockTableB.height(),v=e.$tableB.height();e.isResize=!0,p.locked&&(u=a.getRight4Lock(p.lockIndex),p.lockWidth&&(f=p.lockWidth)),o.show().css({left:u,bottom:e.$box_paging?e.$box_paging.outerHeight():0,cursor:\"col-resize\"}).basedrag({scop:!0,cellMinW:20,relObj:o,move:\"horizontal\",event:n,stop:function(){var a=o.position().left,i=a-u,n=i+f,s=e.$tableH.width()+i,d=e.$lockTableH&&e.$lockTableH.width()+i;if(5>n&&(n=20),p.minWidth&&n<p.minWidth&&(n=p.minWidth),n!=f+i&&(s=s-i+(n-f),d=d-i+(n-f)),p.width=n,p.locked){if(d<.75*e.$grid.width()){p.lockWidth=n,e.$lockColgroupH.find(\"> col:eq(\"+h+\")\").width(n),e.$lockColgroupB.find(\"> col:eq(\"+h+\")\").width(n),e.$lockColgroupF&&e.$lockColgroupF.find(\"> col:eq(\"+h+\")\").width(n),e.$lockTableH.width(d),e.$lockTableB.width(d),e.$lockTableF&&e.$lockTableF.width(d);var c=e.$lockBox.width();e.$boxH.css(\"margin-left\",c-1),e.$boxB.css(\"margin-left\",c-1),e.$boxF&&e.$boxF.css(\"margin-left\",c-1),e.$colgroupH.find(\"> col:eq(\"+h+\")\").width(n),e.$colgroupB.find(\"> col:eq(\"+h+\")\").width(n),e.$colgroupF&&e.$colgroupF.find(\"> col:eq(\"+h+\")\").width(n)}}else setTimeout(function(){e.$colgroupH.find(\"> col:eq(\"+h+\")\").width(n),e.$colgroupB.find(\"> col:eq(\"+h+\")\").width(n),e.$colgroupF&&e.$colgroupF.find(\"> col:eq(\"+h+\")\").width(n)},1);setTimeout(function(){g.css(\"height\",\"\"),l=e.$tableB.height(),e.$lockTbody&&(m.css(\"height\",\"\"),r=e.$lockTableB.height(),(r!=b||l!=v)&&(r>l?m.each(function(e){var a=t(this),i=a.find(\"> td:eq(\"+p.lockIndex+\")\"),n=i.outerHeight();n>30&&(a.height(n),g.eq(e).height(n))}):g.each(function(e){var a=t(this),i=a.find(\"> td:eq(\"+h+\")\"),n=i.outerHeight();n>30&&(a.height(n),m.eq(e).height(n))})),e.$lockB.height(e.$boxB[0].clientHeight)),p.calc&&e.$tfoot&&e.$tfoot.trigger(\"bjui.datagrid.tfoot.resizeH\"),e.isResize=!1},10),o.hide(),e.resizeFlag=!0}})})})},a.prototype.colMenu=function(){var e=this,a=e.options,i=e.tools,n=e.regional,o=e.$trsH.find(\"> th.\"+e.classnames.th_menu),s=e.$grid.find(\"> .\"+e.classnames.s_menu);s.legnth||(s=t(BJUI.doRegional(FRAG.gridMenu,n)),s.hide().appendTo(e.$grid),e.$menu=s),e.colShowhide(a.columnShowhide),o.each(function(){var a,n=t(this),o=n.data(\"index\"),r=e.columnModel[o],l=n.find(\"> div > .\"+e.classnames.th_cell),d=l.find(\"> .\"+e.classnames.btn_menu);d.length||(a=t('<button class=\"btn btn-default\"><i class=\"fa fa-bars\"></button>'),d=t('<div class=\"'+e.classnames.btn_menu+'\"></div>').append(a),d.appendTo(l),a.click(function(){var o,l,d=(n.closest(\"tr\"),parseInt(n.attr(\"rowspan\")||1)),c=t(this).offset().left-e.$grid.offset().left-1,u=25*(e.$trsH.length-d)+13*d+11,h=s.find(\"> ul > li.datagrid-li-showhide\"),p=s.data(\"bjui.datagrid.menu.btn\");p&&p.length&&p.removeClass(\"active\"),t(this).addClass(\"active\"),h.length&&e.$showhide&&(e.$showhide.appendTo(h),l=e.$showhide.data(\"width\")),s.css({position:\"absolute\",top:u,left:c}).show().data(\"bjui.datagrid.menu.btn\",a).siblings(\".\"+e.classnames.s_menu).hide(),o=s.outerWidth();var f=function(t){e.$boxH.width()-t<o?s.css({left:t-o+18}).addClass(\"position-right\"):s.css({left:t}).removeClass(\"position-right\")},g=function(t){e.$boxB.scroll(function(){var a=t.offset().left-e.$grid.offset().left-1;f(a)})};f(c),g(a),r.columnFilter?e.colFilter(n):s.find(\"> ul > li.\"+e.classnames.li_filter).hide(),i.locking(n);var m=s.find(\"> ul > li.\"+e.classnames.li_asc),b=m.next();m.click(function(){r.sortAsc=!1,i.quickSort(r)}),b.click(function(){r.sortAsc=!0,i.quickSort(r)}),s.on(\"bjui.datagrid.th.sort\",function(t,e){m.toggleClass(\"sort-active\",e),b.toggleClass(\"sort-active\",!e)})}))}),e.$grid.on(\"click.bjui.datagrid.filter\",function(a){var i=t(a.target),n=e.$grid.find(\".\"+e.classnames.s_menu+\":visible\");n.length&&!i.closest(\".\"+e.classnames.btn_menu).length&&(i.closest(\".\"+e.classnames.s_menu).length||n.hide().data(\"bjui.datagrid.menu.btn\").removeClass(\"active\"))})},a.prototype.colShowhide=function(t){var e=this,a=(e.options,e.tools),i=e.$menu,n=i.find(\"> ul\"),o=n.find(\"> li.\"+e.classnames.li_showhide);t?e.$showhide||(a.createShowhide(),a.showSubMenu(o,i,e.$showhide)):o.hide()},a.prototype.showhideColumn=function(e,a){var i,n,o=this,s=o.tools;if(\"number\"==t.type(e)){if(i=parseInt(e),0>i)return}else i=e.data(\"index\");if(n=o.columnModel[i]){if(n.locked){if(a)return;o.colLock(n.th,a)}s.showhide(n,a)}},a.prototype.colFilter=function(e,a){var i=this,n=(i.options,i.tools),o=i.regional,s=e.data(\"bjui.datagrid.filter\"),r=i.$menu,l=r.find(\"> ul > li.\"+i.classnames.li_filter),d=i.columnModel[e.data(\"index\")];if(i.inputs&&i.inputs.length||n.initEditInputs(),d.quickfilter){if(l.find(\".\"+i.classnames.s_filter).addClass(\"hide\"),!s||!s.length){s=t(BJUI.doRegional(FRAG.gridFilter.replaceAll(\"#label#\",e.text()),o)).hide().appendTo(i.$grid);var c,u,h=e.data(\"index\"),d=i.columnModel[h],p=d.type||\"string\",f=d.operator||[],g=s.find(\"span.filter-a\"),m=s.find(\"span.filter-b\"),b=t('<select data-toggle=\"selectpicker\" data-container=\"true\"></select>'),v=t(i.inputs[h]);v.removeAttr(\"data-rule\").attr(\"size\",10).addClass(\"filter-input\"),\"string\"==p||\"lookup\"==p?f.length||(f=[\"=\",\"!=\",\"like\"]):\"number\"==p||\"int\"==p||\"spinner\"==p?(\"spinner\"==p&&v.removeAttr(\"data-toggle\"),f.length||(f=[\"=\",\"!=\",\">\",\"<\",\">=\",\"<=\"])):\"date\"==p?f.length||(f=[\"=\",\"!=\"]):\"boolean\"==p?(f.length||(f=[\"=\",\"!=\"]),v=t(BJUI.doRegional('<select name=\"'+d.name+'\" data-toggle=\"selectpicker\"><option value=\"\">#all#</option><option value=\"true\">#true#</option><option value=\"false\">#false#</option></select>',o))):\"select\"==p&&(f.length||(f=[\"=\",\"!=\"]),v.attr(\"data-width\",\"80\"),v.find(\"> option:first-child\").val()&&(v=t('<select name=\"'+d.name+'\" data-toggle=\"selectpicker\" data-width=\"80\"></select>').append(BJUI.doRegional('<option value=\"\">#all#</option>',o)).append(v.html())));for(var y=0;y<f.length;y++)b.append('<option value=\"'+f[y]+'\">'+f[y]+\"</option>\");c=v,u=c.clone(),g.append(b).append(v),m.append(b.clone()).append(u),e.data(\"bjui.datagrid.filter\",s),s.appendTo(l),s.data(\"width\",s.outerWidth()).hide().initui(),s.on(\"customEvent.bjui.lookup\",'[data-toggle=\"lookupbtn\"]',function(t,e){for(var a in e)d.name==a&&v.val(e[a])});var k=s.find(\"button.ok\"),x=s.find(\"button.clear\"),C=s.find(\"select\"),w=C.first(),$=C.last(),j=C.eq(1);k.click(function(){var a=w.val(),o=c.val().trim(),d=$.val(),h=u.val().trim(),p=j.val(),f={};o.length&&t.extend(f,{operatorA:a,valA:o}),h.length&&(o.length&&t.extend(f,{andor:p}),t.extend(f,{operatorB:d,valB:h})),t.isEmptyObject(f)||(n.quickFilter(i.columnModel[e.data(\"index\")],f),i.$grid.trigger(\"click\"),l.trigger(\"bjui.datagrid.th.submenu.hide\",[r,s]))}),x.click(function(){var t=i.columnModel[e.data(\"index\")];C.find(\"> option:first\").prop(\"selected\",!0),C.selectpicker(\"refresh\"),c.val(\"\"),u.val(\"\"),t.isFiltered&&(n.quickFilter(t,null),i.$grid.trigger(\"click\"),l.trigger(\"bjui.datagrid.th.submenu.hide\",[r,s]))})}n.showSubMenu(l,r,s.removeClass(\"hide\")),r.find('> ul > li:not(\".'+i.classnames.li_filter+'\")').on(\"mouseover\",function(){l.hasClass(\"active\")&&l.trigger(\"bjui.datagrid.th.submenu.hide\",[r,s])})}else l.hide()},a.prototype.initPaging=function(){var e,a=this,i=a.tools,n=(a.options,a.paging),o=BJUI.regional.pagination,s=FRAG.gridPaging,r=[],l=n.pageCount,d=[];e=i.getPageInterval(l,n.pageCurrent,n.showPagenum);for(var c=e.start;c<e.end;c++)r.push(FRAG.gridPageNum.replace(\"#num#\",c).replace(\"#active#\",n.pageCurrent==c?\" active\":\"\"));s=BJUI.doRegional(s.replaceAll(\"#pageCurrent#\",n.pageCurrent).replaceAll(\"#count#\",n.total+\"/\"+parseInt(l||0)),o),a.$box_paging=t('<div class=\"datagrid-paging-box\"></div>'),a.$pagingCon=t('<div class=\"paging-content\"></div>').width(a.$boxB.width()),a.$refreshBtn=t('<button class=\"btn-default btn-refresh\" title=\"'+o.refresh+'\" data-icon=\"refresh\"></button>'),a.$paging=t('<div class=\"datagrid-paging\"></div>'),a.$btnpaging=t(s),a.$pagenum=t(r.join(\"\")),a.$pagesize=t('<div class=\"datagrid-pagesize\"><span></span></div>'),a.$selectpage=t('<select data-toggle=\"selectpicker\"></select>'),a.$pagingCon.appendTo(a.$box_paging),a.$box_paging.appendTo(a.$grid),a.$pagesize.appendTo(a.$pagingCon),a.$refreshBtn.appendTo(a.$pagesize),a.$selectpage.appendTo(a.$pagesize),a.$paging.appendTo(a.$pagingCon),a.$btnpaging.appendTo(a.$paging),a.$pagenum.insertAfter(a.$btnpaging.find(\"> li.page-prev\")),a.$box_paging.initui();var u=a.$btnpaging.find(\"> li.page-jumpto\"),h=u.next(),p=h.next(),f=a.$btnpaging.find(\"> li.page-next\"),g=f.next(),m=function(){h.addClass(\"disabled\"),p.addClass(\"disabled\")},b=function(){h.removeClass(\"disabled\"),p.removeClass(\"disabled\")},v=function(){f.addClass(\"disabled\"),g.addClass(\"disabled\")},y=function(){f.removeClass(\"disabled\"),g.removeClass(\"disabled\")},k=function(){m(),y()},x=function(){b(),v()},C=function(e){a.$selectpage.empty(),e||(e=a.paging.pageSize),d=n.selectPageSize.split(\",\"),d.push(String(e)),t.unique(d).sort(function(t,e){return t-e}),t.each(d,function(e,i){var s=t('<option value=\"'+i+'\">'+i+\"/\"+o.page+\"</option>\");i==n.pageSize&&s.prop(\"selected\",!0),a.$selectpage.append(s)}),a.$selectpage.selectpicker(\"refresh\")};1==n.pageCurrent&&k(),n.pageCurrent==n.pageCount&&(x(),1==n.pageCurrent&&m()),0==n.total&&v(),C(),a.$paging.on(\"click\",\".page-num\",function(e){var i=t(this);i.hasClass(\"active\")||a.jumpPage(i.text()),e.preventDefault()}).on(\"bjui.datagrid.paging.jump\",function(e){for(var o=a.paging.pageCurrent,s=i.getPageInterval(a.paging.pageCount,o,n.showPagenum),r=[],l=s.start;l<s.end;l++)r.push(FRAG.gridPageNum.replace(\"#num#\",l).replace(\"#active#\",o==l?\" active\":\"\"));a.$pagenum.empty(),a.$pagenum=t(r.join(\"\")),a.$pagenum.insertAfter(p),1==o?(k(),o==a.paging.pageCount&&v(),a.paging.total||v()):o==a.paging.pageCount?x():(b(),y()),u.find(\"input\").val(o),a.$btnpaging.find(\"> li.page-total > span\").html(a.paging.total+\"/\"+a.paging.pageCount)}),a.$selectpage.on(\"bjui.datagrid.paging.pageSize\",function(t,e){C(e)}),u.find(\"input\").on(\"keyup\",function(e){if(e.which==BJUI.keyCode.ENTER){var i=t(this).val();i&&a.jumpPage(i)}}),h.on(\"click\",function(){a.paging.pageCurrent>1&&a.jumpPage(1)}),p.on(\"click\",function(){a.paging.pageCurrent>1&&a.jumpPage(a.paging.pageCurrent-1)}),f.on(\"click\",function(){a.paging.pageCurrent<a.paging.pageCount&&a.jumpPage(a.paging.pageCurrent+1)}),g.on(\"click\",function(){a.paging.pageCurrent<a.paging.pageCount&&a.jumpPage(a.paging.pageCount)}),a.$refreshBtn.on(\"click\",function(){a.refresh()}),a.$selectpage.on(\"change\",function(){var e=t(this).val();a.jumpPage(null,e)})},a.prototype.jumpPage=function(t,e){var a=this,i=a.paging,n=i.pageCount;t&&isNaN(t)||e&&isNaN(e)||t&&(t=parseInt(t),1>t&&(t=1),t>n&&(t=n),t==i.pageCurrent)||e&&(e=parseInt(e),\"remote\"!=a.options.local&&i.pageSize>i.total)||a.tools.jumpPage(t,e)},a.prototype.add=function(e){if(this.tools.beforeEdit()){if(!this.options.editUrl)return void BJUI.debug(\"Datagrid Plugin: Edit url is not set!\");if(this.options.editMode){this.options.inlineEditMult||this.doCancelEditRow(this.$tbody.find(\"> tr.\"+this.classnames.tr_edit));var a,i,n=this,o=n.options,s=(n.tools,n.paging),r={},l=(s.pageCurrent-1)*s.pageSize,d=function(e){var a=t(\"<tr></tr>\").addClass(n.classnames.tr_add),i=a.clone();return t.each(n.columnModel,function(e,o){var s=t(\"<td></td>\");o.gridNumber?s.addClass(n.classnames.td_linenumber).text(0):o.gridCheckbox?s.addClass(n.classnames.td_checkbox).html('<div><input type=\"checkbox\" data-toggle=\"icheck\" name=\"datagrid.checkbox\" value=\"true\"></div>'):o.gridEdit?s.addClass(n.classnames.s_edit).data(\"isAdd\",!0).html(BJUI.doRegional(FRAG.gridEditBtn,n.regional)):s.text(\"\"),o.hidden&&s.css(\"display\",\"none\"),o.align&&s.attr(\"align\",o.align),r[o.name]=\"\",o.locked?(s.clone().show().appendTo(i),s.hide().appendTo(a)):s.appendTo(a)}),r=t.extend({},n.attach,r),n.emptyData||(n.emptyData=r),{tr:a,lockTr:i.find(\"> td\").length?i:null}};e||(e=o.addLocation||\"first\"),n.$lastSelect||(\"prev\"==e?e=\"first\":\"next\"==e&&(e=\"last\")),\"first\"==e?(i=0,a=d(i),a.tr.prependTo(n.$tbody),a.lockTr&&a.lockTr.prependTo(n.$lockTbody)):\"last\"==e?(i=n.data?n.data.length:0,a=d(i),a.tr.appendTo(n.$tbody),a.lockTr&&a.lockTr.appendTo(n.$lockTbody)):\"prev\"==e?(i=n.$lastSelect.index(),a=d(i),a.tr.insertBefore(n.$lastSelect),a.lockTr&&a.lockTr.insertBefore(n.$lockTbody.find(\"> tr:eq(\"+n.$lastSelect.index()+\")\"))):\"next\"==e&&(i=n.$lastSelect.index()+1,a=d(i),a.tr.insertAfter(n.$lastSelect),a.lockTr&&a.lockTr.insertAfter(n.$lockTbody.find(\"> tr:eq(\"+n.$lastSelect.index()+\")\")));var c=t.extend({},n.emptyData,{addFlag:!0});n.data||(n.data=[]),n.allData||(n.allData=[]),n.allData.length?n.allData.splice(i+l,0,c):n.allData.push(c),n.data.length?n.data.splice(i,0,c):n.data.push(c),t.each(n.data,function(e,a){var i=o.linenumberAll?l+(e+1):e+1;t.extend(a,{gridNumber:i,gridIndex:e})}),a.tr.initui(),setTimeout(function(){n.initEvents(a.tr)},20),a.lockTr&&n.initLockEvents(a.lockTr),n.edit(a.tr),\"dialog\"!=o.editMode?n.doEditRow(a.tr,\"inline\",!0):n.dialogEdit(a.tr,!0)}}},a.prototype.edit=function(e){var a,i=this,n=i.options,o=i.tools,s=n.editMode;i.columnModel;s&&(\"dialog\"!=s&&(s=\"inline\"),e||(e=i.$tbody.find(\"> tr\")),a=e.find(\"> td.\"+i.classnames.s_edit),a.each(function(){var e=t(this),a=e.find(\"button\"),n=a.first(),r=n.next(),l=r.next(),d=l.next(),c=d.next();n.on(\"click\",function(n,c){var u=t(this),h=u.closest(\"tr\"),p=e.data(\"isAdd\");return c||(c=i.isDom?h.data(\"initData\")||o.setDomData(h):i.data[h.index()]),o.beforeEdit(h,c)?(\"dialog\"!=s?(i.inlineEdit(h,p),a.hide(),r.show(),d.show(),p&&(r.hide(),l.show())):i.dialogEdit(h,p),void n.stopPropagation()):!1}),l.on(\"click\",function(e){var a=t(this),n=a.closest(\"tr\");i.updateEdit(n,a),e.stopPropagation()}).on(\"bjui.datagrid.update.tr\",function(){a.hide(),n.show(),c.show()}),r.on(\"click\",function(e){var a=t(this),n=a.closest(\"tr\");i.updateEdit(n,a),e.stopPropagation()}).on(\"bjui.datagrid.update.tr\",function(){a.hide(),n.show(),c.show()}),d.on(\"click\",function(e){var o=t(this),s=o.closest(\"tr\");i.cancelEdit(s),a.hide(),n.show(),c.show(),e.stopPropagation()}),c.on(\"click\",function(e){var a=t(this),n=a.closest(\"tr\");i.delRows(n),e.stopPropagation()})}))},a.prototype.doEditRow=function(e,a,i){var n,o,s=this,r=[];if(a=a||s.options.editMode,\"object\"==typeof e)n=e;else if(isNaN(e)){var l,d=s.$tbody.find(\"> tr\"),e=e.split(\",\");e=e.unique(),e.sort(function(t,e){return t.trim()-e.trim()}),t.each(e,function(t,e){var a=d.eq(parseInt(e.trim()));a&&a.length&&(l=l?l.add(a):a)}),n=l}else isNaN(e)||(n=s.$tbody.find(\"> tr\").eq(e));return n.length&&(n.each(function(){var e,a=t(this),i=a.index();e=s.isDom?a.data(\"initData\")||tools.setDomData(a):s.data[i],r.push(e)}),s.tools.beforeEdit(n,r))?s.options.editUrl?void n.each(function(e){var n=t(this);o=n.find(\"> td.\"+s.classnames.s_edit+\" > button.edit\"),\"dialog\"!=a?o.length?o.trigger(\"click\",[r[e]]):s.inlineEdit(n,i,r[e]):s.dialogEdit(n,i,r[e])}):void BJUI.debug(\"Datagrid Plugin: Edit url is not set!\"):void 0},a.prototype.doCancelEditRow=function(e){var a,i=this;a=\"number\"==t.type(e)?this.$tbody.find(\"> tr\").eq(e):e,a.each(function(){var e=t(this),a=e.find(\"> td.\"+i.classnames.s_edit+\" > button.cancel\");a.length?a.trigger(\"click\"):i.cancelEdit(e)})},a.prototype.doSaveEditRow=function(e){var a,i=this,n=i.options;a=\"number\"==t.type(e)?this.$tbody.find(\"> tr\").eq(e):e?e:i.$tbody.find(\"> tr.\"+i.classnames.tr_edit),a.length||i.$grid.alertmsg(\"info\",BJUI.getRegional(\"datagrid.saveMsg\")),1==a.length?a.hasClass(i.classnames.tr_edit)&&this.updateEdit(a):n.saveAll?i.saveAll(a):a.each(function(){i.updateEdit(t(this))})},a.prototype.delRows=function(e){var a,i=this,n=i.options,o=n.beforeDelete,s=n.delConfirm;if(!o||(\"string\"==typeof o&&(o=o.toFunc()),\"function\"!=typeof o||o.call(this))){if(\"object\"==typeof e)a=e;else if(isNaN(e)){var r,l=i.$tbody.find(\"> tr\"),e=e.split(\",\");e=e.unique(),e.sort(function(t,e){return t.trim()-e.trim()}),t.each(e,function(t,e){var a=l.eq(parseInt(e.trim()));a&&a.length&&(r=r?r.add(a):a)}),a=r}else isNaN(e)||(a=this.$tbody.find(\"> tr\").eq(e));if(a&&a.length){var d=function(){a.each(function(){t(this).trigger(\"bjui.datagrid.tr.delete\")}),i.tools.afterDelete()},c=function(){var e=a.filter(\".\"+i.classnames.tr_add);if(!e.length||(e.remove(),e.length!=a.length))if(n.delUrl){var o=[],s=n.delCallback;a.each(function(){var e,a,s=t(this),r=s.index();e=i.isDom?s.data(\"initData\")||tools.setDomData(s):i.data[r],n.delPK?o.push(e[n.delPK]):(n.jsonPrefix?(a={},t.each(e,function(t,e){return\"gridCheckbox\"==t||\"gridEdit\"==t?!0:void(a[n.jsonPrefix+\".\"+t]=e)})):(a=t.extend({},e),delete a.gridCheckbox,delete a.gridEdit),o.push(a))}),\"string\"==typeof s&&(s=s.toFunc()),i.$grid.bjuiajax(\"doAjax\",{url:n.delUrl,data:n.delPK?[{name:n.delPK,value:o.join(\",\")}]:{json:JSON.stringify(o)},type:n.delType,callback:s||function(t){t[BJUI.keys.statusCode]==BJUI.statusCode.ok?d():i.$grid.bjuiajax(\"ajaxDone\",t)}})}else d()};s?(\"string\"!=typeof s&&(s=1==a.length?BJUI.getRegional(\"datagrid.delMsg\"):BJUI.getRegional(\"datagrid.delMsgM\")),i.$grid.alertmsg(\"confirm\",s,{okCall:function(){c()}})):c()}}},a.prototype.inlineEdit=function(e,a,i){if(!this.tools.beforeEdit(e,i))return!1;var n=this,o=n.options,s=n.tools,r=n.columnModel,l=e.find(\"> td\"),d=l.length,c=e.index();return i||(i=n.isDom?e.data(\"initData\")||s.setDomData(e):n.data[c]),e.hasClass(n.classnames.tr_edit)?!1:(n.inputs&&n.inputs.length||s.initEditInputs(),e.addClass(n.classnames.tr_edit).data(n.datanames.changeData,{}),e.data(\"validator\")&&e.validator(\"destroy\"),o.inlineEditMult||n.doCancelEditRow(e.siblings(\".\"+n.classnames.tr_edit)),n.$lastEditTr=e,void l.each(function(o){var s,l=t(this),u=r[o],h=u&&u.name&&i[u.name],p=l.html(),f=n.inputs[o],g=function(a,o,s){var r=e.data(n.datanames.changeData),l=u.jsontype;switch(u.type){case\"date\":a.on(\"afterchange.bjui.datepicker\",function(t,e){o.addClass(n.classnames.td_changed),a.val()==s&&o.removeClass(n.classnames.td_changed),r[u.name]=a.val()}).change(function(){o.addClass(n.classnames.td_changed),a.val()==s&&o.removeClass(n.classnames.td_changed),r[u.name]=a.val()});break;case\"select\":a.change(function(){o.addClass(n.classnames.td_changed),a.val()==String(s)&&o.removeClass(n.classnames.td_changed),s=a.val().trim(),l&&(\"boolean\"==l?s=\"true\"==s||\"1\"==s?!0:\"false\"==s||\"0\"==s?!1:\"\":\"number\"==l&&(s=1*s)),r[u.name]=s});break;case\"boolean\":a.on(\"ifChanged\",function(){o.toggleClass(n.classnames.td_changed);var e=t(this).is(\":checked\")?!0:!1;e==s&&o.removeClass(n.classnames.td_changed),r[u.name]=e});break;case\"lookup\":o.on(\"customEvent.bjui.lookup\",'[data-toggle=\"lookupbtn\"]',function(t,e){o.toggleClass(n.classnames.td_changed);for(var s in e)\"undefined\"!=typeof i[s]&&(r[s]=e[s]),u.name==s&&(a.val()==e[s]?o.removeClass(n.classnames.td_changed):a.val(e[s]))}),a.change(function(){o.addClass(n.classnames.td_changed),a.val()==s&&o.removeClass(n.classnames.td_changed),r[u.name]=a.val()});break;case\"spinner\":a.on(\"afterchange.bjui.spinner\",function(t,e){o.addClass(n.classnames.td_changed),a.val()==s&&o.removeClass(n.classnames.td_changed),r[u.name]=a.val()}).change(function(){o.addClass(n.classnames.td_changed),a.val()==s&&o.removeClass(n.classnames.td_changed),r[u.name]=a.val()});break;default:a.change(function(){o.addClass(n.classnames.td_changed),a.val()==s&&o.removeClass(n.classnames.td_changed),s=a.val(),l&&\"number\"==l&&(s=1*s),r[u.name]=s})}};if(l.data(n.datanames.td_html,p),a?u.add||(f=\"\"):(i.addFlag&&(i.addFlag=!1),u.edit||(f=\"\")),f&&(s=t(f),\"boolean\"==u.type?s.prop(\"checked\",h):((\"undefined\"==typeof h||\"null\"==h)&&(h=\"\"),s.val(h)),a?u.addAttrs&&\"object\"==typeof u.addAttrs&&t.each(u.addAttrs,function(t,e){s.attr(t,e)}):u.editAttrs&&\"object\"==typeof u.editAttrs&&t.each(u.editAttrs,function(t,e){s.attr(t,e)}),l.empty().append(s).addClass(n.classnames.td_edit),g(s,l,h),u.locked)){var m=n.$lockTbody.find(\"tr:eq(\"+c+\")\"),b=m.find(\"> td:eq(\"+u.lockIndex+\")\");l.clone().html(p).insertAfter(l),l.show().insertAfter(b).initui(),b.remove()}--d||e.initui().validator({msgClass:\"n-bottom\",theme:\"red_bottom_effect_grid\"})}))},a.prototype.saveAll=function(e){var a,i,n,o,s=this,r=s.options,l=r.editCallback,d=[],c=[],u=e&&e.length;(!e||e.length)&&(e=s.$tbody.find(\"> tr.\"+s.classnames.tr_edit),u=e.length),e.each(function(){a=t(this),i=s.isDom?a.data(\"initData\"):s.data[a.index()],d.push(i),a.isValid(function(e){return e?(n=a.data(s.datanames.changeData),t.extend(i,n),r.jsonPrefix?(o={},t.each(i,function(t,e){return\"gridCheckbox\"==t||\"gridEdit\"==t?!0:void(o[r.jsonPrefix+\".\"+t]=e)})):(o=t.extend({},i),delete o.gridCheckbox,delete o.gridEdit),u--,c.push(o),void 0):(c=[],!1)})}),u||(l=l?l.toFunc():function(a){var i=!1,n=[];\"array\"==t.type(a)?(i=!0,n=a):\"object\"==t.type(a)&&(a[BJUI.keys.statusCode]?a[BJUI.keys.statusCode]==BJUI.statusCode.ok?i=!0:s.$grid.bjuiajax(\"ajaxDone\",a):(i=!0,n.push(a))),i&&(e.each(function(e){var a=t(this),i=s.isDom?a.data(\"initData\"):s.data[a.index()];t.extend(i,\"object\"==typeof n[e]&&n[e]),s.allData&&s.allData[i.gridIndex]&&t.extend(s.allData[i.gridIndex],i),s.inlineEditComplete(a,i)}),s.tools.afterSave(e,c))},s.tools.beforeSave(e,d)&&s.$grid.bjuiajax(\"doAjax\",{url:r.editUrl,data:{json:JSON.stringify(c)},type:\"POST\",callback:l}))},a.prototype.updateEdit=function(e,a){var i,n,o,s=this,r=s.options,l=r.editCallback,d=[],c=[];i=s.isDom?e.data(\"initData\"):s.data[e.index()],e.hasClass(s.classnames.tr_edit)&&e.isValid(function(u){u&&(n=e.data(s.datanames.changeData),t.extend(i,n),r.jsonPrefix?(o={},t.each(i,function(t,e){return\"gridCheckbox\"==t||\"gridEdit\"==t?!0:void(o[r.jsonPrefix+\".\"+t]=e)})):(o=t.extend({},i),delete o.gridCheckbox,delete o.gridEdit),l=l?l.toFunc():function(n){var o,r=!1;\"array\"==t.type(n)?(r=!0,o=n[0]):\"object\"==t.type(n)&&(n[BJUI.keys.statusCode]?n[BJUI.keys.statusCode]==BJUI.statusCode.ok?r=!0:s.$grid.bjuiajax(\"ajaxDone\",n):(r=!0,o=n)),r&&(t.extend(i,\"object\"==typeof o&&o),s.allData&&s.allData[i.gridIndex]&&t.extend(s.allData[i.gridIndex],i),s.inlineEditComplete(e,i,a),s.tools.afterSave(e,i))},d.push(i),s.tools.beforeSave(e,d)&&(c.push(o),e.bjuiajax(\"doAjax\",{url:r.editUrl,data:{json:JSON.stringify(c)},type:\"POST\",callback:l})))})},a.prototype.cancelEdit=function(e){var a=this,i=a.columnModel;e.each(function(){var e=t(this),n=e.index();if(e.hasClass(a.classnames.tr_edit)&&e.removeClass(a.classnames.tr_edit).find(\"> td.\"+a.classnames.td_edit).each(function(){var e=t(this),o=e.index(),s=i[o],r=e.data(a.datanames.td_html);if(e.removeClass(a.classnames.td_edit).removeClass(a.classnames.td_changed).html(r),s.locked){var l=a.$lockTbody.find(\"tr:eq(\"+n+\")\"),d=l.find(\"> td:eq(\"+s.lockIndex+\")\");r=d.data(a.datanames.td_html),l.removeClass(a.classnames.tr_edit),d.removeClass(a.classnames.td_edit).removeClass(a.classnames.td_changed).html(r)}}),e.hasClass(a.classnames.tr_add)){var o=!1,s=e.data(a.datanames.changeData);if(t.isEmptyObject(s))o=!0;else{for(var r in s)s[r]||delete s[r];t.isEmptyObject(s)&&(o=!0)}if(o){var l=e.index();a.data=a.data.remove(l),a.$lockTbody&&a.$lockTbody.find(\"> tr:eq(\"+l+\")\").remove(),e.remove()}}})},a.prototype.inlineEditComplete=function(e,i,n){var o=this,s=o.columnModel,r=e.index(),l=e.find(\"> td\"),d=!1,c=o.$tbody.find(\"> tr\"),u=c.filter(\".\"+o.classnames.tr_add);t.each(s,function(t,e){if(e.gridNumber&&(d=!0),e.name&&!(e.gridNumber||e.gridCheckbox||e.gridEdit)){var n,s=i[e.name],c=l.eq(e.index);if(\"undefined\"==typeof s&&(s=\"\"),c.text(s).removeClass(o.classnames.td_edit).removeClass(o.classnames.td_changed),e.render&&\"function\"==typeof e.render?e.items?(n=e.render.call(o,s,i,e.items),c.html(n)):(n=e.render.call(o,s,i),c.html(n)):e.items&&(n=a.renderItem.call(o,s,i,e.items),c.html(n)),e.locked){var u=o.$lockTbody.find(\"> tr:eq(\"+r+\")\"),h=u.find(\"> td:eq(\"+e.lockIndex+\")\");h.removeClass(o.classnames.td_changed).html(c.html())}}}),e.removeClass(o.classnames.tr_edit),n||(n=l.filter(\".\"+o.classnames.s_edit).find(\"button.update\")),n&&n.length&&n.trigger(\"bjui.datagrid.update.tr\"),d&&u.length&&(u.removeClass(o.classnames.tr_add),c.each(function(e){t(this).find(\"> td.\"+o.classnames.td_linenumber).text(e+1),o.$lockTbody&&o.$lockTbody.find(\"> tr:eq(\"+e+\")\").find(\"> td.\"+o.classnames.td_linenumber).text(e+1)}))},a.prototype.dialogEdit=function(e,a,i){if(!this.tools.beforeEdit(e,i))return!1;var n,o,s,r=this,l=r.options,d=r.tools,c=r.columnModel,u=e.index();i||(i=r.isDom?e.data(\"initData\")||d.setDomData(e):r.data[u]),r.inputs&&r.inputs.length||d.initEditInputs(),s=l.gridTitle||\"datagrid\",a?s+=\" - \"+BJUI.getRegional(\"datagrid.add\"):(i.addFlag&&(i.addFlag=!1),s+=\" - \"+BJUI.getRegional(\"datagrid.edit\")),n=t('<div><div class=\"bjui-pageContent\"></div><div class=\"bjui-pageFooter\"></div></div>'),o=t('<form class=\"datagrid-dialog-edit-form\"></form>');var h=function(e,a,n,o){var s=e.data(r.datanames.changeData);switch(o.type){case\"date\":n.on(\"afterchange.bjui.datepicker\",function(t,e){s[o.name]=n.val()}).change(function(){s[o.name]=n.val()});break;case\"select\":n.change(function(){s[o.name]=n.val()});break;case\"boolean\":n.on(\"ifChanged\",function(){\nvar e=t(this).is(\":checked\")?!0:!1;s[o.name]=e});break;case\"lookup\":a.on(\"customEvent.bjui.lookup\",'[data-toggle=\"lookupbtn\"]',function(t,e){for(var a in e)\"undefined\"!=typeof i[a]&&(s[a]=e[a]),o.name==a&&n.val(e[a])}),n.change(function(){s[o.name]=n.val()});break;case\"spinner\":n.on(\"afterchange.bjui.spinner\",function(t,e){s[o.name]=n.val()}).change(function(){s[o.name]=n.val()});break;default:n.change(function(){s[o.name]=n.val()})}},p=function(a){var n=a.find(\"form.datagrid-dialog-edit-form\"),o=a.find(\"div.bjui-pageFooter button\"),s=o.first(),u=o.eq(1),p=o.eq(2),f=o.last(),g=function(e,a,i){a.empty(),i.data(r.datanames.changeData)||i.data(r.datanames.changeData,{}),a.data(\"validator\")&&a.validator(\"destroy\"),t.each(c,function(n,o){if(o==r.linenumberColumn||o==r.checkboxColumn||o==r.editBtnsColumn)return!0;var s=t(r.inputs[n]),l=t(\"<p></p>\"),d=\"datagrid-dialog-edit-column-\"+n;s.isTag(\"select\")?s.attr(\"data-width\",\"auto\"):s.isTag(\"checkbox\")||s.attr(\"size\",30),\"boolean\"==o.type?s.attr(\"checked\",e[o.name]):\"textarea\"==o.type?s.html(e[o.name]):s.attr(\"value\",e[o.name]),l.append('<label class=\"control-label x120\" for=\"'+d+'\">'+o.label+\"：</label>\").append(t('<span class=\"datagrid-dialog-column-span\"></span>').append(s.attr(\"id\",d))).appendTo(a),h(i,a,s,o)}),a.initui().validator({msgClass:\"n-bottom\",theme:\"red_bottom_effect_grid\"})};n.is(\":empty\")&&g(i,n,e),0==e.index()&&s.addClass(\"disabled\"),e.index()==r.data.length-1&&u.addClass(\"disabled\"),s.click(function(){var t,a=e.prev();a.length?(t=r.isDom?a.data(\"initData\")||d.setDomData(a):r.data[a.index()],e=a,g(t,n,e),u.removeClass(\"disabled\"),a.prev().length||s.addClass(\"disabled\")):s.addClass(\"disabled\")}),u.click(function(){var t,a=e.next();a.length?(t=r.isDom?a.data(\"initData\")||d.setDomData(a):r.data[a.index()],e=a,g(t,n,e),n.initui(),s.removeClass(\"disabled\"),a.next().length||u.addClass(\"disabled\")):u.addClass(\"disabled\")}),f.click(function(){var a,i,o,s=[],d=l.editCallback;i=r.isDom?e.data(\"initData\"):r.data[e.index()],n.isValid(function(n){n&&(a=e.data(r.datanames.changeData),t.extend(i,a),l.jsonPrefix?(o={},t.each(i,function(t,e){return\"gridCheckbox\"==t||\"gridEdit\"==t?!0:void(o[l.jsonPrefix+\".\"+t]=e)})):(o=t.extend({},i),delete o.gridCheckbox,delete o.gridEdit),d=d?d.toFunc():function(a){var n,o=!1;\"array\"==t.type(a)?(o=!0,n=a[0]):\"object\"==t.type(a)&&(a[BJUI.keys.statusCode]?a[BJUI.keys.statusCode]==BJUI.statusCode.ok?o=!0:r.$grid.bjuiajax(\"ajaxDone\",a):(o=!0,n=a)),o&&(t.extend(i,\"object\"==typeof n&&n),r.dialogEditComplete(e,i),r.$grid.dialog(\"close\",\"datagrid-dialog-edit\"),r.tools.afterSave(e,i))},s.push(i),r.tools.beforeSave(e,s)&&e.bjuiajax(\"doAjax\",{url:l.editUrl,data:{json:JSON.stringify(o)},type:\"POST\",callback:d}))})}),p.click(function(){r.$grid.dialog(\"close\",\"datagrid-dialog-edit\")})},f=function(){r.$tbody.find(\"> tr.\"+r.classnames.tr_add).each(function(){var e=!1,a=t(this),i=a.data(r.datanames.changeData);if(t.isEmptyObject(i))e=!0;else{for(var n in i)i[n]||delete i[n];t.isEmptyObject(i)&&(e=!0)}if(e){var o=a.index();r.data=r.data.remove(o),r.$lockTbody&&r.$lockTbody.find(\"> tr:eq(\"+o+\")\").remove(),a.remove()}})};n.find(\"> div:first\").append(o).next().append(BJUI.doRegional(FRAG.gridDialogEditBtns,r.regional));var g=t.extend({},{id:\"datagrid-dialog-edit\",fresh:!0,target:n[0],width:520,height:400,mask:!0,title:s,onLoad:p,onClose:f},\"object\"==typeof l.editDialogOp&&l.editDialogOp);r.$grid.dialog(g)},a.prototype.dialogEditComplete=function(e,i){var n=this,o=n.columnModel,s=e.index(),r=e.find(\"> td\"),l=!1,d=n.$tbody.find(\"> tr\"),c=d.filter(\".\"+n.classnames.tr_add);t.each(o,function(t,e){if(e.gridNumber&&(l=!0),e.name&&!(e.gridNumber||e.gridCheckbox||e.gridEdit)){var o,d=i[e.name],c=r.eq(e.index);if(\"undefined\"==typeof d&&(d=\"\"),c.text(d).removeClass(n.classnames.td_edit).removeClass(n.classnames.td_changed),e.render&&\"function\"==typeof e.render?e.items?(o=e.render.call(n,d,i,e.items),c.html(o)):(o=e.render.call(n,d,i),c.html(o)):e.items&&(o=a.renderItem.call(n,d,i,e.items),c.html(o)),e.locked){var u=n.$lockTbody.find(\"> tr:eq(\"+s+\")\"),h=u.find(\"> td:eq(\"+e.lockIndex+\")\");h.removeClass(n.classnames.td_edit).removeClass(n.classnames.td_changed).html(c.html()),u.removeClass(n.classnames.tr_edit)}}}),l&&c.length&&(c.removeClass(n.classnames.tr_add),d.each(function(e){t(this).find(\"> td.\"+n.classnames.td_linenumber).text(e+1),n.$lockTbody&&n.$lockTbody.find(\"> tr:eq(\"+e+\")\").find(\"> td.\"+n.classnames.td_linenumber).text(e+1)}))},a.prototype.resizeGrid=function(){var e,a,i=this,n=i.$grid.getPageTarget(),o=function(){i.initFixedW&&String(i.options.width).endsWith(\"%\")&&(e=i.$grid.parent().width(),n.is(\":hidden\")&&n.hasClass(\"navtabPage\")?i.$grid.data(\"need.fixedW\",!0):i.fixedWidth()),String(i.options.height).endsWith(\"%\")&&(a=i.$grid.parent().height(),n.is(\":hidden\")&&n.hasClass(\"navtabPage\")?n.hasClass(\"navtabPage\")&&i.$grid.data(\"need.fixedH\",!0):a&&a!=i.parentH&&i.tools.fixedH(a))};n.on(\"bjui.navtab.switch\",t.proxy(function(){i.$grid.data(\"need.fixedH\")&&(a=i.$grid.parent().height(),a&&i.tools.fixedH(a),i.$grid.removeData(\"need.fixedH\")),i.$grid.data(\"need.fixedW\")&&(i.fixedWidth(),i.$grid.removeData(\"need.fixedW\"))},i)),t(window).on(BJUI.eventType.resizeGrid,t.proxy(o,i))};var i=t.fn.datagrid;t.fn.datagrid=e,t.datagrid=a,t.fn.datagrid.noConflict=function(){return t.fn.datagrid=i,this},t(document).on(BJUI.eventType.initUI,function(a){var i=t(a.target).find('table[data-toggle=\"datagrid\"]');i.length&&e.call(i)})}(jQuery),+function(t){\"use strict\";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),\"object\"==typeof e&&e),r=o.data(\"bjui.tablefixed\");r||o.data(\"bjui.tablefixed\",r=new a(this,s)),\"string\"==typeof n&&t.isFunction(r[n])?([].shift.apply(i),i?r[n].apply(r,i):r[n]()):r.init()})}var a=function(e,a){this.$element=t(e),this.options=a,this.tools=this.TOOLS()};a.SCROLLW=18,a.DEFAULTS={width:\"100%\"},a.prototype.TOOLS=function(){var e={getLeft:function(e){var a=0;return e.prevAll().each(function(){a+=t(this).outerWidth()}),a},getRight:function(e){var a=0;return e.prevAll().andSelf().each(function(){a+=t(this).outerWidth()}),a-1},getCellNum:function(t){return t.prevAll().andSelf().size()},getColspan:function(t){return t.attr(\"colspan\")||1},getStart:function(e){var a=1;return e.prevAll().each(function(){a+=parseInt(t(this).attr(\"colspan\")||1)}),a},getPageCoord:function(t){for(var e={x:0,y:0};t;)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e},getOffset:function(e,a){if(!t.support.leadingWhitespace){var i=e.offset(),n={offsetX:a.pageX||a.screenX,offsetY:a.pageY||a.screenY},o={offsetX:n.offsetX-i.left,offsetY:n.offsetY-i.top};return o}var s=a.target;void 0==s.offsetLeft&&(s=s.parentNode);var r=this.getPageCoord(s),l={x:window.pageXOffset+a.clientX,y:window.pageYOffset+a.clientY},o={offsetX:l.x-r.x,offsetY:l.y-r.y};return o}};return e},a.prototype.resetWidth=function(){var e=this.$element,i=e.width(),n=e.find(\"table\"),o=n&&n.width(),s=n.eq(0)&&n.eq(0).find(\"tr:first-child > th\"),r=n.eq(1)&&n.eq(1).find(\"tr:first-child > td\");if(n&&i-o<a.SCROLLW){var l=parseInt((i-o)/s.length);n.width(i-a.SCROLLW),s.each(function(e){var a=parseInt(t(this).css(\"width\"));t(this).width(a+l),r.eq(e)&&r.eq(e).width(a+l)})}},a.prototype.init=function(){if(this.$element.isTag(\"table\")){this.$container=this.$element.parent().addClass(\"bjui-resizeGrid\"),this.$fixed=void 0;var t=this.$container.width(),e=this.options.height;this.$container.hasClass(\"tab-pane\")&&(t=this.$container.parent().width()-20),\"string\"==typeof this.options.width&&this.options.width.indexOf(\"%\")?this.options.newWidth=t*(this.options.width.replace(\"%\",\"\")/100):this.options.newWidth=parseInt(this.options.width),this.options.styles=[],this.$element.wrap('<div class=\"bjui-tablefixed clearfix\"></div>'),this.$fixed=this.$element.parent(),this.initHead(),this.initBody(),this.resizeCol(),this.resizeGrid(),e&&!this.$fixed.closest(\".tab-content\").length&&this.$fixed.height(e).addClass(\"fixedH\")}},a.prototype.initHead=function(){var e=this.options.styles=[],i=this.$element.find(\"thead > tr\"),n=i.eq(0).find(\"> th\"),o=(this.$element,0),s=[],r=[],l=-1;n.each(function(e){for(var a=t(this),i=parseInt(a.attr(\"colspan\")||1),n=a.attr(\"width\"),o=a.attr(\"align\"),d=\"\",c=0;i>c;c++)1==i&&n&&(d=' width=\"'+n+'\"'),o&&a.removeAttr(\"align\").addClass(o),s.push(\"<th\"+d+\"></th>\");a.attr(\"colsNum\",l+=i),r[e]=i});var d=s.length,c=t('<tr class=\"resize-head\">'+s.join(\"\")+\"</tr>\");if(i.length>1){l=0;var u=i.eq(1).find(\"> th\");t.each(r,function(t,e){if(e=parseInt(e),e>1)for(var a=parseInt(n.eq(t).attr(\"colsnum\")),i=e-1;i>=0;i--){var o=u.eq(l++),s=a-i,r=o.attr(\"width\"),d=o.attr(\"align\"),h=c.find(\"> th\").eq(s);o&&o.length&&o.attr(\"colsnum\",s),r&&h.attr(\"width\",r),d&&o.addClass(d).removeAttr(\"align\")}})}this.$fixed.html(this.$element.html());var h=this.$fixed.find(\"thead\");h.prepend(c),c.find(\"> th\").each(function(a){var i=t(this),n=[],s=i.innerWidth();n[0]=parseInt(s),o+=n[0],e[e.length]=n}),o=parseInt((this.options.newWidth-a.SCROLLW-o)/d);var p=h.find(\"> tr:eq(0) > th\");this.options.$ths=p,p.each(function(a){var i=t(this),n=e[a],s=i.attr(\"width\");i.removeAttr(\"align\").width(n[0]+o),n[0]=n[0]+o,s&&(n[0]=parseInt(s),i.width(s).removeAttr(\"width\"))}),h.find(\"> tr:gt(0) > th\").each(function(){var e=t(this);e.html('<div class=\"fixedtableCol\">'+e.html()+\"</div>\")}),h.wrap('<div class=\"fixedtableHeader\" style=\"width:'+(this.options.newWidth-a.SCROLLW)+'px;overflow:hidden;\"><div class=\"fixedtableThead\"><table class=\"table table-bordered\" style=\"width:'+(this.options.newWidth-a.SCROLLW)+\"px; max-width:\"+(this.options.newWidth-a.SCROLLW)+'px;\"></table></div></div>'),this.$fixed.append('<div class=\"resizeMarker\" style=\"display:none; height:300px; left:57px;\"></div><div class=\"resizeProxy\" style=\"left:377px; display:none; height:300px;\"></div>')},a.prototype.initBody=function(){var e,i,n=this,o=this.$fixed.find(\"> tbody\");this.options.styles;if(this.options.height)i=this.options.height-this.$fixed.find(\".fixedtableHeader\").height()+\"px\";else{i=\"100%\";var s=function(){var t=n.$fixed.parent().height();n.$fixed.parent().css(\"overflow\",\"hidden\"),n.$fixed.height(t).find(\".fixedtableScroller\").height(t-n.$fixed.find(\".fixedtableHeader\").height())};t(document).one(BJUI.eventType.afterInitUI,function(t){s()})}e='style=\"height:'+i+'; overflow-y:auto;\"',o.wrap('<div class=\"fixedtableScroller\"'+e+' style=\"width:'+this.options.newWidth+'px;\"><div class=\"fixedtableTbody\"><table style=\"width:'+(this.options.newWidth-a.SCROLLW)+\"px; max-width:\"+(this.options.newWidth-a.SCROLLW)+'px;\"></table></div></div>'),this.$element.attr(\"class\")?o.parent().addClass(this.$element.attr(\"class\")):o.parent().addClass(\"table table-striped table-bordered table-hover\"),\"undefined\"!=typeof this.$element.attr(\"data-selected-multi\")&&o.parent().attr(\"data-selected-multi\",this.$element.attr(\"data-selected-multi\")),o.before('<thead><tr class=\"resize-head\">'+this.$fixed.find(\"thead > tr\").html()+\"</tr></thead>\"),this.options.$tds=o.prev().find(\"> tr:first-child > th\"),this.options.nowrap&&o.parent().addClass(\"nowrap\"),o.closest(\".fixedtableScroller\").scroll(function(e){var a=t(this),i=a.scrollLeft(),n=a.prev().find(\"> .fixedtableThead\");return n.css({position:\"relative\",left:-i}),!1})},a.prototype.resizeCol=function(){var e=this,i=this.$fixed,n=this.options.$ths,o=this.options.$tds,s=this.tools;i.find(\"thead > tr:gt(0) > th\").each(function(r){var l=t(this);l.mouseover(function(t){var r=parseInt(i.find(\".fixedtableThead\").css(\"left\"))||0,d=s.getOffset(l,t).offsetX,c=n.eq(l.attr(\"colsnum\"));return l.outerWidth()-d<5?l.css(\"cursor\",\"col-resize\").off(\"mousedown.bjui.tablefixed.resize\").on(\"mousedown.bjui.tablefixed.resize\",function(t){i.find(\"> .resizeProxy\").show().css({left:s.getRight(c)+r+i.position().left,top:i.position().top,height:i.height(),cursor:\"col-resize\"}).basedrag({scop:!0,cellMinW:20,relObj:i.find(\".resizeMarker\"),move:\"horizontal\",event:t,stop:function(){var t=i.find(\".resizeProxy\").position().left,n=i.find(\".resizeMarker\").position().left,r=t-n-c.outerWidth()-9,l=s.getCellNum(c),d=(c.width(),c.width()+r),u=o.eq(l-1),h=i.find(\"> .fixedtableHeader .table\").width();if(c.width(d),u.width(d),i.find(\".table\").width(h+r),i.find(\".resizeMarker, .resizeProxy\").hide(),h+r+a.SCROLLW<e.options.newWidth)i.find(\".fixedtableScroller\").width(h+r+a.SCROLLW);else{var d=i.closest(\".bjui-resizeGrid\").innerWidth();h+r+a.SCROLLW<d&&(d=h+r+a.SCROLLW),i.find(\".fixedtableHeader\").width(d-a.SCROLLW),i.find(\".fixedtableScroller\").width(d),i.width(d)}i.data(\"resizeGrid\",!0)}}),i.find(\"> .resizeMarker\").show().css({left:s.getLeft(c)+r+i.position().left,top:i.position().top,height:i.height()})}):l.css(\"cursor\",\"default\").off(\"mousedown.bjui.tablefixed.resize\"),!1})})},a.prototype.setOrderBy=function(e){var a=this.$element,i=a.find(\".fixedtableCol\"),n=t(FRAG.orderby.replace(\"#asc#\",BJUI.regional.orderby.asc).replace(\"#desc#\",BJUI.regional.orderby.desc));e=e||this.options,a.addClass(\"orderby\"),e.orderDirection&&(BJUI.ui.clientPaging||a.addClass(e.orderDirection),a.pagination(\"setClientOrder\",{orderField:e.orderField,orderDirection:e.orderDirection})),i.length||(i=t('<div class=\"fixedtableCol\">'+a.html()+\"</div>\").appendTo(a.empty())),n.data(\"orderField\",e.orderField).appendTo(i).pagination(\"orderBy\")},a.prototype.resizeGrid=function(){var e=this,i=function(){t(\"div.bjui-resizeGrid\").each(function(){var i,n=t(this),o=n.closest(\".navtabPage\"),s=n.width(),r=n.height(),l=n.find(\".bjui-tablefixed\"),d=l.find(\".fixedtableThead\").height(),c=e.options.newWidth;n.length&&n.is(\":hidden\")&&(n.hasClass(\"tab-pane\")||(o.show(),s=n.innerWidth(),r=n.height(),d=l.find(\".fixedtableHeader\").height(),o.hide())),s&&n.find(\".bjui-tablefixed\").each(function(){var e=t(this);i=e.data(\"resizeGrid\")?c:s,e.width(i),e.find(\".table\").width(i-a.SCROLLW),e.find(\".fixedtableHeader\").width(i-a.SCROLLW),e.find(\".fixedtableScroller\").width(i)}),n.css(\"overflow\",\"hidden\"),l.height(r).find(\".fixedtableScroller\").height(r-d)})};t(window).on(BJUI.eventType.resizeGrid,i)};var i=t.fn.tablefixed;t.fn.tablefixed=e,t.fn.tablefixed.Constructor=a,t.fn.tablefixed.noConflict=function(){return t.fn.tablefixed=i,this},t(document).on(BJUI.eventType.initUI,function(a){var i=t(a.target).find('table[data-toggle=\"tablefixed\"]');i.length&&e.call(i)}),t(document).on(BJUI.eventType.afterInitUI,function(a){var i=t(a.target).find(\"th[data-order-field]\");i.length&&e.call(i,\"setOrderBy\")}),t(document).on(\"click.bjui.tr.data-api\",\"tr[data-id]\",function(e){var a=t(this),i=a.closest(\"table\"),n=i.data(\"selectedMulti\"),o=a.attr(\"data-id\"),s=\"selected\",r=i.closest(\".unitBox\").find(\"#bjui-selected\");a.toggleClass(s),n?(o=[],a.siblings(\".\"+s).add(a.hasClass(s)?a:\"\").each(function(){o.push(t(this).attr(\"data-id\"))}),o=o.join(\",\")):(a.siblings().removeClass(s),a.hasClass(s)||(o=\"\")),r&&r.length?r.val(o):(r=t('<input type=\"hidden\" id=\"bjui-selected\" value=\"'+o+'\">'),r.appendTo(i.closest(\".unitBox\")))})}(jQuery),+function(t){\"use strict\";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),\"object\"==typeof e&&e),r=o.data(\"bjui.tabledit\");r||o.data(\"bjui.tabledit\",r=new a(this,s)),\"string\"==typeof n&&t.isFunction(r[n])?([].shift.apply(i),i?r[n].apply(r,i):r[n]()):r.init()})}var a=function(e,a){this.$element=t(e),this.options=a,this.tools=this.TOOLS(),this.$tbody=this.$element.find(\"> tbody\"),this.$tbody.length||(this.$tbody=t(\"<tbody></tbody>\"),this.$element.append(this.$tbody)),this.$numAdd=this.$btnAdd=null};a.DEFAULTS={singleNoindex:!0},a.EVENTS={afterDelete:\"afterdelete.bjui.tabledit\"},a.prototype.TOOLS=function(){var e=this,i={initSuffix:function(e){var a=e.find(\"> tr\");a.each(function(e){var a=t(this);a.find(\":input, :file, a, label, div\").each(function(){var a=t(this),i=a.attr(\"name\"),n=a.val(),o=a.attr(\"for\"),s=a.attr(\"id\"),r=a.attr(\"href\"),l=a.attr(\"data-group\"),d=a.attr(\"data-suffix\");if(i&&a.attr(\"name\",i.replaceSuffix(e)),o&&a.attr(\"for\",o.replaceSuffix(e)),s&&a.attr(\"id\",s.replaceSuffix(e).replaceSuffix2(e)),r&&a.attr(\"href\",r.replaceSuffix(e)),l&&a.attr(\"data-group\",l.replaceSuffix(e)),d&&a.attr(\"data-suffix\",d.replaceSuffix(e)),n&&n.indexOf(\"#index#\")>=0&&a.val(n.replace(\"#index#\",e+1)),a.hasClass(\"no\")){var c=a.data(\"prefix\")?a.data(\"prefix\"):\"\";a.val(c+(e+1))}})})},initEnter:function(e){var a=e.find(\":text\");a.each(function(e){t(this).bind(\"keydown\",function(t){if(t.which==BJUI.keyCode.ENTER){var i=e+1;a.eq(i)&&a.eq(i).focus(),t.preventDefault()}})}),this.initInput(e)},initInput:function(e){e.find(\"> tr > td\").each(function(){var e=t(this).find(\".input-hold\");e.length||(e=t('<span class=\"input-hold\" style=\"display:block; padding:0 4px; height:0px; font-size:12px; visibility:hidden;\"></span>'),t(this).append(e)),t.support.leadingWhitespace?t(this).on(\"input\",\":text\",function(a){e.text(t(this).val())}):t(this).on(\"propertychange\",\":text\",function(a){e.text(t(this).val())})})},initTbody:function(){function a(e){e.removeClass(\"readonly\").find(\"> td *\").each(function(){var e=t(this),a=e.closest(\"td\"),i=a.data(\"val\"),n=e.attr(\"data-toggle-old\"),o=a.data(\"readonly\");if(\"undefined\"==typeof i&&(i=a.html()),a.data(\"notread\"))return!0;if(e.isTag(\"select\")&&e.val(a.attr(\"data-val\")).selectpicker(\"refresh\").nextAll(\".bootstrap-select\").removeClass(\"readonly\").find(\"button\").removeClass(\"disabled\"),e.is(\":checkbox\")&&(e.closest(\".icheckbox_minimal-purple\").removeClass(\"disabled\"),e.closest(\".icheckbox_minimal-purple\").find(\"ins\").removeClass(\"readonly\")),e.is(\":radio\")&&(e.closest(\".iradio_minimal-purple\").removeClass(\"disabled\"),e.closest(\".iradio_minimal-purple\").find(\"ins\").removeClass(\"readonly\")),n){if(\"dosave\"==n)return!0;e.removeAttr(\"data-toggle-old\").attr(\"data-toggle\",n),\"spinner\"==n&&e.spinner(\"destroy\").spinner(),\"kindeditor\"==n&&a.initui()}(e.is(\":text\")||e.is(\"textarea\"))&&(e.off(\"keydown.readonly\"),o&&e.prop(\"readonly\",!0)),e.find(\".bjui-lookup, .bjui-spinner, .bjui-upload\").show()}),e.find('[data-toggle=\"doedit\"]').attr(\"data-toggle\",\"dosave\").text(\"完成\")}function i(e){e.addClass(\"readonly\").find(\"> td *\").each(function(){var e=t(this),a=e.closest(\"td\"),i=e.attr(\"data-toggle\");if(a.data(\"notread\"))return!0;if(e.isTag(\"select\")&&e.nextAll(\".bootstrap-select\").addClass(\"readonly\").find(\"button\").addClass(\"disabled\"),e.is(\":checkbox\")&&(e.closest(\".icheckbox_minimal-purple\").addClass(\"disabled\"),e.closest(\".icheckbox_minimal-purple\").find(\"ins\").addClass(\"readonly\")),e.is(\":radio\")&&(e.closest(\".iradio_minimal-purple\").addClass(\"disabled\"),e.closest(\".iradio_minimal-purple\").find(\"ins\").addClass(\"readonly\")),i){if(\"doedit\"==i||\"dosave\"==i)return!0;e.removeAttr(\"data-toggle\").attr(\"data-toggle-old\",i),\"kindeditor\"==i&&KindEditor.remove(e)}(e.is(\":text\")||e.is(\"textarea\"))&&e.on(\"keydown.readonly\",function(t){t.preventDefault()}),e.find(\".bjui-lookup, .bjui-spinner, .bjui-upload\").hide()}),e.find('[data-toggle=\"dosave\"]').attr(\"data-toggle\",\"doedit\").text(\"编辑\")}var n=e.$element,o=e.$tbody;o.find(\"> tr\").each(function(){var s=t(this),r=s.find(\"> td\"),l=n.data(\"bjui.tabledit.tr\").clone().find(\"> th\");s.data(\"bjui.tabledit.oldTds\",s.html()),l.each(function(e){var a=r.eq(e),i=a.data(\"val\"),n=t(this),o=n.children(),s=n.find(\".pic-box\");\"undefined\"==typeof i&&(i=a.html()),a.data(\"noedit\")||o.length&&(o.is(\"input:checkbox\")||o.is(\"input:radio\")?o.filter('[value=\"'+i+'\"]').attr(\"checked\",\"checked\"):o.isTag(\"select\")?o.find('option[value=\"'+a.data(\"val\")+'\"]').attr(\"selected\",\"selected\"):s.length?(a.data(\"val\")&&n.find(\".pic-name\").val(a.data(\"val\")),s.html(a.html())):o.hasClass(\"wrap_bjui_btn_box\")?o.find(\"input[data-toggle]\").attr(\"value\",i+\"\"):o.is(\"textarea\")?(o.html(i),\"kindeditor\"==o.attr(\"data-toggle\")&&o.attr(\"data-toggle-old\",\"kindeditor\").removeAttr(\"data-toggle\")):o.attr(\"value\",i+\"\"),a.html(n.html()))}),s.on(\"dblclick\",t.proxy(function(t){a(s)},e)).initui(),e.tools.initSuffix(o),i(s)}),o.on(\"click.bjui.tabledit.readonly\",'[data-toggle=\"doedit\"]',function(e){a(t(this).closest(\"tr\"))}).on(\"click.bjui.tabledit.readonly\",'[data-toggle=\"dosave\"]',function(a){var o=t(this).closest(\"tr\"),s=o.index(),r=e.options.callback;if(e.options.action){if(o.wrap('<form action=\"\" method=\"POST\"></form>'),o.attr(\"data-id\")){var l=n.find(\"> thead > tr:eq(0)\").data(\"idname\")||\"id\";o.before('<input type=\"hidden\" name=\"'+l.replaceSuffix(s)+'\" value=\"'+o.attr(\"data-id\")+'\">')}var d=o.parent().serializeArray();e.options.singleNoindex&&t.each(d,function(e,a){t.extend(a,{name:a.name.replaceSuffix(0)})}),o.prev(\"input\").remove(),o.unwrap().isValid(function(t){t&&(r=r?r.toFunc():function(t){t[BJUI.keys.statusCode]==BJUI.statusCode.ok?i(o):o.bjuiajax(\"ajaxDone\",t)},o.bjuiajax(\"doAjax\",{url:e.options.action,data:d,type:e.options.type||\"POST\",callback:r}))})}else i(o)}),e.tools.initEnter(o)},doAdd:function(){var t=e.$element;e.$numAdd&&e.$btnAdd&&t.on(\"keydown.bjui.tabledit.add\",\"thead .num-add\",function(t){t.which==BJUI.keyCode.ENTER&&(e.$btnAdd.trigger(\"click.bjui.tabledit.add\"),t.preventDefault())}).on(\"click.bjui.tabledit.add\",\"thead .row-add\",function(a){var i=1;isNaN(e.$numAdd.val())||(i=parseInt(e.$numAdd.val())),e.add(t,i),a.preventDefault()})},doDel:function(e){var a=this,i=\"click.bjui.tabledit.del\";e.off(i).on(i,\".row-del\",function(e){var i=t(this);i.data(\"confirmMsg\")?i.alertmsg(\"confirm\",i.data(\"confirmMsg\"),{okCall:function(){a.delData(i)}}):a.delData(i),e.preventDefault()})},delData:function(t){var a=this,i=t.closest(\"tbody\"),n=t.data(),o=function(o){t.closest(\"tr\").remove(),a.initSuffix(i),a.afterDelete(i),n.callback&&n.callback.toFunc().apply(e,[o])};t.is(\"[href^=javascript:]\")||t.is('[href^=\"#\"]')?o():t.bjuiajax(\"doAjax\",{url:t.attr(\"href\"),data:n.data,callback:o})},afterDelete:function(i){var n=t.Event(a.EVENTS.afterDelete,{relatedTarget:i[0]});e.$element.trigger(n),n.isDefaultPrevented()}};return i},a.prototype.init=function(){var e=this,a=this.tools,i=this.$element.addClass(\"bjui-tabledit\"),n=i.find(\"> thead > tr:first\"),o=this.$tbody,s=i.find(\"> thead > tr:first\").html();n.find(\"> th\").each(function(){var a=t(this),i=a.attr(\"title\"),n=a.data(\"addtool\");if(i&&a.html(i),n){var o=t('<span style=\"position:relative;\"></span>');a.empty(),e.$numAdd=t('<input type=\"text\" value=\"1\" class=\"form-control num-add\" size=\"2\" title=\"待添加的行数\">'),e.$btnAdd=t('<a href=\"javascript:;\" class=\"row-add\" title=\"添加行\"><i class=\"fa fa-plus-square\"></i></a>'),o.append(e.$numAdd).append(e.$btnAdd).appendTo(a)}}),i.data(\"bjui.tabledit.tr\",t(\"<tr>\"+s+\"</tr>\")),a.initTbody(),a.doAdd(),a.doDel(o)},a.prototype.add=function(e,a){for(var i,n=this.tools,o=e.find(\"> tbody\"),s=e.data(\"bjui.tabledit.tr\"),r=0;a>r;r++){s.find(\"> th\").each(function(){t(this).replaceWith(\"<td>\"+t(this).html()+\"</td>\")});var l=s.clone();0==r&&(i=l),l.hide().appendTo(o),n.initSuffix(o),n.initEnter(o),l.show().css(\"display\",\"\").initui()}if(i&&i.length){var d=i.find(\":text\");d.each(function(){var e=t(this);return e.prop(\"readonly\")?void 0:(e.focus(),!1)})}};var i=t.fn.tabledit;t.fn.tabledit=e,t.fn.tabledit.Constructor=a,t.fn.tabledit.noConflict=function(){return t.fn.tabledit=i,this},t(document).on(BJUI.eventType.initUI,function(a){var i=t(a.target).find('table[data-toggle=\"tabledit\"]');i.length&&e.call(i)}),t(document).on(BJUI.eventType.afterInitUI,function(a){var i=t(a.target).find('table[data-toggle=\"tabledit\"]');i.each(function(){if(t(this).is(\"[data-initnum]\")){var a=t(this).data(\"initnum\");a>0&&e.call(t(this),\"add\",t(this),a)}})}),t(document).on(\"click.bjui.tabledit.data-api\",'[data-toggle=\"tableditadd\"]',function(a){var i=t(this),n=i.data(\"num\")||1,o=i.data(\"target\");o&&t(o).length&&t(o).isTag(\"table\")&&(e.call(i,\"add\",t(o),n),a.preventDefault())})}(jQuery),+function(t){\"use strict\";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),\"object\"==typeof e&&e),r=o.data(\"bjui.spinner\");r||o.data(\"bjui.spinner\",r=new a(this,s)),\"string\"==typeof n&&t.isFunction(r[n])?([].shift.apply(i),i?r[n].apply(r,i):r[n]()):r.init()})}var a=function(e,a){this.$element=t(e),this.options=a,this.tools=this.TOOLS(),this.$spinner=null,this.height=this.$element.addClass(\"form-control\").innerHeight(),this.ivalue=Number(this.$element.val())||0};a.DEFAULTS={min:0,max:100,step:1,decimalPlace:0},a.EVENTS={afterChange:\"afterchange.bjui.spinner\"},a.prototype.TOOLS=function(){var t=this,e={changeVal:function(e){var i=t.$element,n=Number(i.val())||Number(t.ivalue),o=e.data(\"add\")||-1,s=t.options.min,r=t.options.max,l=t.options.step;1==o?r-l>=n&&(n+=l):-1==o?n>=s+l&&(n-=l):n>r?n=r:s>n&&(n=s),t.options.decimalPlace&&(n=new String(n.toFixed(t.options.decimalPlace))),t.ivalue=n,i.val(n).trigger(a.EVENTS.afterChange,{value:n})}};return e},a.prototype.init=function(){this.$element,this.options;return isNaN(this.options.min)||isNaN(this.options.max)||isNaN(this.options.step)?void BJUI.debug(\"Spinner Plugin: Parameter is non-numeric type!\"):void this.addBtn()},a.prototype.addBtn=function(){var e=this,a=e.$element;if(!this.$lookBtn&&!a.parent().hasClass(\"wrap_bjui_btn_box\")){this.$spinner=t(FRAG.spinnerBtn),a.css({paddingRight:\"13px\"}).wrap('<span class=\"wrap_bjui_btn_box\"></span>');var i=a.parent();i.css(\"position\",\"relative\"),this.$spinner.css({height:this.height}).appendTo(i),this.$spinner.on(\"selectstart\",function(){return!1});var n=null;e.$spinner.find(\"li\").on(\"click\",function(a){e.tools.changeVal(t(this))}).on(\"mousedown\",function(){var a=t(this);n=setInterval(function(){e.tools.changeVal(a)},150)}).on(\"mouseup\",function(){clearTimeout(n)})}},a.prototype.destroy=function(){this.$element.parent().hasClass(\"wrap_bjui_btn_box\")&&(this.$element.parent().find(\".bjui-spinner\").remove(),this.$element.unwrap())};var i=t.fn.spinner;t.fn.spinner=e,t.fn.spinner.Constructor=a,t.fn.spinner.noConflict=function(){return t.fn.spinner=i,this},t(document).on(BJUI.eventType.initUI,function(a){var i=t(a.target).find('input[data-toggle=\"spinner\"]');i.length&&e.call(i)})}(jQuery),+function(t){\"use strict\";function e(e){var a=arguments,i=e;return this.each(function(){var n=t(this),s=t.extend({},o.DEFAULTS,n.data(),\"object\"==typeof e&&e),r=n.data(\"bjui.lookup\");r?n.data(\"newurl\")&&(r.options.url=n.data(\"newurl\"),n.data(\"bjui.dialog\",null)):n.data(\"bjui.lookup\",r=new o(this,s)),\"string\"==typeof i&&t.isFunction(r[i])?([].shift.apply(a),a?r[i].apply(r,a):r[i]()):r.init()})}var a,i,n,o=function(e,a){this.$element=t(e),this.options=a,this.$lookBtn=null};o.DEFAULTS={url:null,id:null,mask:!0,width:600,height:400,title:\"Lookup\",maxable:!0,resizable:!0},o.EVENTS={afterChange:\"afterchange.bjui.lookup\"},o.prototype.init=function(){var t=this,e=this.options;this.tools;return e.url?(e.url=decodeURI(e.url).replacePlh(t.$element.closest(\".unitBox\")),e.url.isFinishedTm()?(e.url=encodeURI(e.url),a=this.options.group||null,i=this.options.suffix||null,n=this.$element,i&&(i=i.trim()),void this.open(t.$element)):(t.$element.alertmsg(\"error\",e.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),BJUI.debug(\"Lookup Plugin: The lookup's url is incorrect, url:\"+e.url),!1)):(BJUI.debug(\"Lookup Plugin: Error trying open a lookup dialog, url is undefined!\"),!1)},o.prototype.addBtn=function(){var e=this,a=e.$element;if(!this.$lookBtn&&!a.parent().hasClass(\"wrap_bjui_btn_box\")){this.$lookBtn=t(FRAG.lookupBtn),this.$element.css({paddingRight:\"15px\"}).wrap('<span class=\"wrap_bjui_btn_box\"></span>');var i=this.$element.parent(),n=this.$element.addClass(\"form-control\").innerHeight();i.css({position:\"relative\",display:\"inline-block\"}),t.each(e.options,function(t,a){\"toggle\"!=t&&e.$lookBtn.data(t,a)}),this.$lookBtn.css({height:n,lineHeight:n+\"px\"}).appendTo(i),this.$lookBtn.on(\"selectstart\",function(){return!1})}},o.prototype.open=function(t){var e=this.options;t.dialog({id:e.id||\"lookup_dialog\",url:e.url,title:e.title,width:e.width,height:e.height,mask:e.mask,maxable:e.maxable,resizable:e.resizable})},o.prototype.getField=function(t){return(a?a+\".\":\"\")+t+(i?i:\"\")},o.prototype.setSingle=function(t,e){\"string\"==typeof t&&(t=new Function(\"return \"+t)()),this.setVal(t,e)},o.prototype.setMult=function(e,a){var i={},n=this.$element.closest(\".unitBox\");return n.find('[name=\"'+e+'\"]').filter(\":checked\").each(function(){var e=new Function(\"return \"+t(this).val())();for(var a in e){var n=i[a]?i[a]+\",\":\"\";i[a]=n+e[a]}}),t.isEmptyObject(i)?void this.$element.alertmsg(\"error\",this.$element.data(\"warn\")||FRAG.alertSelectMsg):void this.setVal(i,a)},o.prototype.setVal=function(e,a){var i,s=this,r=n.closest(\".unitBox\");n.data(\"customEvent\")?n.trigger(\"customEvent.bjui.lookup\",[e]):r.find(\":input\").each(function(){var n=t(this),r=n.attr(\"name\");for(var l in e){var d=s.getField(l);if(d==r){i=1==a&&n.val()?n.val()+\",\"+e[l]:e[l],n.val(i).trigger(o.EVENTS.afterChange,{value:e[l]});break}}}),this.$element.dialog(\"closeCurrent\")};var s=t.fn.lookup;t.fn.lookup=e,t.fn.lookup.Constructor=o,t.fn.lookup.noConflict=function(){return t.fn.lookup=s,this},t(document).on(BJUI.eventType.initUI,function(a){var i=t(a.target).find('[data-toggle=\"lookup\"]');i.length&&e.call(i,\"addBtn\")}),t(document).on(\"click.bjui.lookup.data-api\",'[data-toggle=\"lookupbtn\"]',function(a){var i=t(this);i.attr(\"href\")&&!i.data(\"url\")&&i.attr(\"data-url\",i.attr(\"href\")),i.data(\"title\")||i.attr(\"data-title\",i.text()),e.call(i),a.preventDefault()}),t(document).on(\"click.bjui.lookupback.data-api\",'[data-toggle=\"lookupback\"]',function(a){var i=t(this),n=i.data(\"args\"),o=i.data(\"lookupid\"),s=t('input[name=\"lookupType\"]:checked').val();n?e.call(i,\"setSingle\",n,s):o&&e.call(i,\"setMult\",o,s),a.preventDefault()})}(jQuery),+function(t){\"use strict\";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),\"object\"==typeof e&&e),r=o.data(\"bjui.tags\");r||o.data(\"bjui.tags\",r=new a(this,s)),\"string\"==typeof n&&t.isFunction(r[n])?([].shift.apply(i),i?r[n].apply(r,i):r[n]()):r.init()})}var a=function(e,a){this.$element=t(e).addClass(\"tag-input\"),this.options=a,this.tools=this.TOOLS(),this.$box=t(this.$element.wrap('<div class=\"bjui-tags\"></div>')).parent(),this.timeout=null,this.$tagsArr={},this.tags=[]};a.DEFAULTS={width:300,url:\"\",global:!1,type:\"GET\",tagname:\"tag\",max:0,clear:!1,lightCls:\"tags-highlight\"},a.EVENTS={afterCreated:\"aftercreated.bjui.tags\"},a.prototype.TOOLS=function(){var e=this,i=this.options,n={keyDown:function(t){return 13==t.which?!1:void 0},keyUp:function(a){switch(a.which){case BJUI.keyCode.BACKSPACE:if(0==t.trim(e.$element.val()).length)return e.tools.removeMenu(),!1;break;case BJUI.keyCode.ESC:e.tools.removeMenu();break;case BJUI.keyCode.DOWN:if(!e.$menu||!e.$menu.length)return;var n=e.$menu.find(\"> .\"+i.lightCls),o=e.$menu.find(\"> li:first-child\");if(n.length){var s=n.removeClass(i.lightCls).next();s.length?s.addClass(i.lightCls):o.addClass(i.lightCls)}else o.addClass(i.lightCls);return!1;case BJUI.keyCode.UP:if(!e.$menu||!e.$menu.length)return;var n=e.$menu.find(\"> .\"+i.lightCls),r=e.$menu.find(\"> li:last-child\");if(n.length){var l=n.removeClass(i.lightCls).prev();l.length?l.addClass(i.lightCls):r.addClass(i.lightCls)}else r.addClass(i.lightCls);return!1;case BJUI.keyCode.ENTER:if(i.max>0&&e.$tagsArr.length>=i.max)return!1;var d=!1,c=!1,u=null,h=e.$menu&&e.$menu.find(\"> .\"+i.lightCls);if(h&&h.length)d=h.text(),u=h.data(\"item\"),c=u.value;else{if(d=t.trim(e.$element.val()),!d.length)return!1;if(i.clear&&-1==t.inArray(d,e.tags))return e.$element.val(\"\"),!1;c=d}if(!d)return;var p=!1;return e.$tagsArr.length&&e.$tagsArr.each(function(){return t(this).val()==c?void(p=!0):void 0}),p?(e.$element.val(\"\"),!1):(e.tools.createTag(d,c),e.tools.removeMenu(),e.$element.val(\"\"),t.proxy(e.tools.onAfterCreated(u,c),e),!1)}},query:function(){e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(e.tools.doQuery,300)},doQuery:function(){if(!(i.max>0&&e.$tagsArr.length>=i.max)){var a=e.$element.val(),n=e.$box.find(\"> .tags-menu\"),o=[],s=null,r=e.$element.closest(\".navtab-panel\").length?t.CurrentNavtab:t.CurrentDialog;e.$element.closest(\".bjui-layout\").length&&(r=e.$element.closest(\".bjui-layout\")),\n0!=a.length&&(e.$element.one(\"ajaxStart\",function(){r.trigger(\"bjui.ajaxStart\")}).one(\"ajaxStop\",function(){r.trigger(\"bjui.ajaxStop\")}),t.ajax({url:i.url,global:i.global,type:i.type,data:{term:a},dataType:\"json\",success:function(a){if(0!=a.length){n.length||(n=t('<ul class=\"tags-menu\"></ul>')),n.empty().hide().appendTo(e.$box);for(var r=0;r<a.length;r++)s=t('<li class=\"tags-item\">'+a[r].label+\"</li>\").data(\"item\",a[r]),s.appendTo(n),o.push(a[r].label);e.tags=o,n.css({top:e.$element.position().top+e.$element.outerHeight(),left:e.$element.position().left}).fadeIn().find(\"> li\").hover(function(){t(this).addClass(i.lightCls).siblings().removeClass(i.lightCls)},function(){t(this).removeClass(i.lightCls)}).click(function(){var a=t(this).text(),i=t(this).data(\"item\"),o=i.value,s=!1;return e.$box.find(\"input:hidden\").each(function(){return t(this).val()==o?void(s=!0):void 0}),s?(e.$element.val(\"\"),void n.remove()):(t.proxy(e.tools.createTag(a,o),e),n.remove(),e.$element.val(\"\"),void t.proxy(e.tools.onAfterCreated(i,o),e))}),e.$menu=n}}}))}},createTag:function(a,i){var n=t('<span class=\"label label-tag\" data-value=\"'+i+'\" style=\"margin-left: 1px; margin-top: 1px;\"><i class=\"fa fa-tag\"></i> '+a+'&nbsp;&nbsp;<a href=\"#\" class=\"close\">&times;</a></span>');n.insertBefore(e.$element).find(\"a.close\").click(function(){var a=n.data(\"value\");e.$box.find(\"input:hidden\").each(function(){t(this).val()==a&&t(this).remove()}),n.remove(),e.$tagsArr=e.$box.find('input[name=\"'+e.options.tagname+'\"]')});var o=t('<input type=\"hidden\" name=\"'+e.options.tagname+'\">').val(i);o.appendTo(e.$box),e.$tagsArr=e.$box.find('input[name=\"'+e.options.tagname+'\"]')},removeMenu:function(){e.$menu&&e.$menu.remove()},onAfterCreated:function(i,n){var o=[];e.$tagsArr.length&&e.$tagsArr.each(function(){o.push(t(this).val())}),e.$element.trigger(a.EVENTS.afterCreated,{item:i,value:n,tags:o.join(\",\")})}};return n},a.prototype.init=function(){var e=this,a=this.$element,i=this.options;return i.url?(i.url=decodeURI(i.url).replacePlh(a.closest(\".unitBox\")),i.url.isFinishedTm()?(i.url=encodeURI(i.url),isNaN(this.options.max)?void BJUI.debug(\"Tags Plugin: Parameter 'max' is non-numeric type!\"):(e.$box.width(i.width).on(\"click\",function(){a.focus()}),a.on(\"keydown\",t.proxy(this.tools.keyDown,this)).on(\"keyup\",t.proxy(this.tools.keyUp,this)),t.support.leadingWhitespace?a.on(\"input\",t.proxy(this.tools.query,this)):a.on(\"propertychange\",t.proxy(this.tools.query,this)),void t(document).on(\"click.bjui.tags\",t.proxy(function(e){t(e.target).closest(this.$box).length||this.tools.removeMenu()},this)))):(a.alertmsg(\"error\",i.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"Tags Plugin: The query tags url is incorrect, url: \"+i.url))):void BJUI.debug(\"Tags Plugin: Do query tags, url is undefined!\")},a.prototype.destroy=function(){this.$tags&&(this.$element.upwrap(),$tags.remove())};var i=t.fn.tags;t.fn.tags=e,t.fn.tags.Constructor=a,t.fn.tags.noConflict=function(){return t.fn.tags=i,this},t(document).on(BJUI.eventType.initUI,function(a){var i=t(a.target).find('input[data-toggle=\"tags\"]');i.length&&e.call(i)})}(jQuery),+function(t){\"use strict\";function e(e){var i=arguments,n=e;return window.FileReader?this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),\"object\"==typeof e&&e),r=o.data(\"bjui.upload\");r||o.data(\"bjui.upload\",r=new a(this,s)),\"string\"==typeof n&&t.isFunction(r[n])?([].shift.apply(i),i?r[n].apply(r,i):r[n]()):r.init()}):void this.each(function(){if(t.fn.uploadify){var e={swf:BJUI.PLUGINPATH+\"uploadify/scripts/uploadify.swf\",fileTypeExts:\"*.jpg;*.png\",id:\"fileInput\",fileObjName:\"file\",fileSizeLimit:204800,buttonText:\"选择上传文件\",auto:!1,multi:!1,height:24},a=t(this),i=a.data();if(i.id||(i.id=a.attr(\"id\")),t.extend(e,i),!e.uploader)return void BJUI.debug(\"Upload Plugin: The options uploader is undefined!\");if(e.uploader=decodeURI(e.uploader).replacePlh(a.closest(\".unitBox\")),!e.uploader.isFinishedTm())return a.alertmsg(\"error\",e.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"Upload Plugin: The options uploader is incorrect: \"+e.uploader);e.uploader=encodeURI(e.uploader),\"fileInput\"==e.id&&(e.id=e.id+(new Date).getTime());var n=t('<input type=\"file\" name=\"'+e.name+'\" id=\"'+e.id+'\">');if(e.onInit&&\"string\"==typeof e.onInit&&(e.onInit=e.onInit.toFunc()),e.onCancel&&\"string\"==typeof e.onCancel&&(e.onCancel=e.onCancel.toFunc()),e.onSelect&&\"string\"==typeof e.onSelect&&(e.onSelect=e.onSelect.toFunc()),e.onUploadSuccess&&\"string\"==typeof e.onUploadSuccess&&(e.onUploadSuccess=e.onUploadSuccess.toFunc()),e.onUploadComplete&&\"string\"==typeof e.onUploadComplete&&(e.onUploadComplete=e.onUploadComplete.toFunc()),e.onUploadError&&\"string\"==typeof e.onUploadError&&(e.onUploadError=e.onUploadError.toFunc()),n.appendTo(a),!e.auto){var o=t('<button class=\"btn btn-orange\" data-icon=\"cloud-upload\">开始上传</button>');o.hide().insertAfter(a).click(function(){n.uploadify(\"upload\",\"*\"),t(this).hide()}),e.onSelect=function(){o.show()}}n.uploadify(e)}})}var a=function(e,a){this.$element=t(e),this.options=a,this.tools=this.TOOLS()};a.DEFAULTS={fileTypeExts:\"*.jpg;*.png\",uploader:\"\",auto:!1,method:\"POST\",multi:!1,formData:{},fileObjName:\"file\",fileSizeLimit:204800,previewImg:!0,previewLoadimg:null,dragDrop:!1,showUploadedPercent:!0,showUploadedSize:!0,buttonText:\"选择上传文件\",removeTimeout:1e3,itemTemplate:FRAG.uploadTemp,breakPoints:!1,fileSplitSize:1048576,onUploadStart:null,onUploadSuccess:null,onUploadComplete:null,onUploadError:null,onInit:null,onCancel:null,onSelect:null},a.MIMETYPES={zip:[\"application/x-zip-compressed\"],jpg:[\"image/jpeg\"],png:[\"image/png\"],gif:[\"image/gif\"],swf:[\"application/x-shockwave-flash\"],doc:[\"application/msword\"],xls:[\"application/vnd.ms-excel\"],docx:[\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"],xlsx:[\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"],ppt:[\"application/vnd.ms-powerpoint\"],pptx:[\"application/vnd.openxmlformats-officedocument.presentationml.presentation\"],mp3:[\"audio/mpeg\"],mp4:[\"video/mp4\"],pdf:[\"application/pdf\"],txt:[\"text/plain\"],xml:[\"text/xml\"]},a.prototype.TOOLS=function(){var e=this,i=this.options,n={formatFileSize:function(t,e){return t=t>1048576&&!e?(Math.round(100*t/1048576)/100).toString()+\"MB\":(Math.round(100*t/1024)/100).toString()+\"KB\"},getFile:function(t,e){for(var a=0;a<e.length;a++)if(e[a].index==t)return e[a];return!1},getFileTypes:function(t){for(var e=[],a=t.split(\";\"),i=0;i<a.length;i++)e.push(a[i].split(\".\").pop());return e},getMimetype:function(t){return a.MIMETYPES[t]},getAcceptString:function(t){for(var e=this.getFileTypes(t),a=[],i=0;i<e.length;i++){var n=this.getMimetype(e[i]);n?a.push(n):a.push(\".\"+e[i])}return a.join(\",\")},filter:function(a){var n=[],o=this.getFileTypes(i.fileTypeExts);if(o.length>0)for(var s=0;s<a.length;s++){var r=a[s];parseInt(this.formatFileSize(r.size,!0))>i.fileSizeLimit?e.$element.alertmsg(\"error\",'文件\"'+r.name+'\"大小超出限制！'):t.inArray(r.name.split(\".\").pop().toLowerCase(),o)>=0?n.push(r):e.$element.alertmsg(\"error\",'文件\"'+r.name+'\"类型不允许！')}return n},getFiles:function(t){var a=t.target.files||t.dataTransfer.files;a=this.filter(a);for(var i=0;i<a.length;i++)a[i].id=a[i].lastModifiedDate.getTime()+\"_\"+a[i].size+\"_\"+(a[i].type||\"\").replace(/\\W/g,\"\"),this.renderQueueItem(a[i]),e.queueData.files++;return a},renderQueueItem:function(a){var n=0,o=t(i.itemTemplate.replace(\"{fileId}\",a.id).replace(\"{fileName}\",a.name).replace(\"#upConfirm#\",BJUI.regional.upload.upConfirm).replace(\"#upPause#\",BJUI.regional.upload.upPause).replace(\"#upCancel#\",BJUI.regional.upload.upCancel).replace(\"{percent}\",\"0.00%\").replace(\"{uploadedSize}\",\"0KB\").replace(\"{fileSize}\",this.formatFileSize(a.size)));if(i.auto&&o.find(\"> .info > .up_confirm\").remove(),o.data(\"upfile\",a),e.$uploadFileList.append(o),i.breakPoints&&(n=this.getUploadedSize(a.id),n>a.size&&(n=a.size)),this.showProgress(a.id,n,a.size),i.previewImg&&-1!=a.type.indexOf(\"image\")){var s=o.find(\"> .preview > .img\");i.previewLoadimg&&s.html('<img src=\"'+i.previewLoadimg+'\" height=\"114\">'),this.previewImg(a,s)}else o.find(\"> .preview\").remove();if(i.showUploadedSize){var r=o.find(\"> .filesize\");r.find(\"> .uploadedsize\").html(this.formatFileSize(n)),r.find(\"> .filesize\").html(this.formatFileSize(a.size))}else o.find(\"> .filesize\").remove();i.showUploadedPercent?o.find(\"> .percent\").html((n/a.size*100).toFixed(2)+\"%\"):o.find(\"> .percent\").remove(),i.onSelect&&i.onSelect(files),i.auto&&e.fileUpload(a,n),o.on(\"click.bjui.upload.confirm\",\".up_confirm\",function(a){var i=t(this),o=i.closest(\".item\");i.hide().next().show(),e.fileUpload(o.data(\"upfile\"),n)}),o.on(\"click.bjui.upload.cancel\",\".up_cancel\",this.removeQueueItem)},successQueueItem:function(a,o){n.showProgress(a.id,a.size,a.size),i.onUploadSuccess&&i.onUploadSuccess.toFunc().call(e,a,o.responseText,e.$element),setTimeout(function(){e.$element.find(\"#\"+a.id).fadeOut(\"normal\",function(){t(this).remove();var a=e.$element.find(\"> .queue > .item:visible\").length;0==a&&(e.$element.find(\"> .queue\").hide(),e.$file.val(\"\"))})},i.removeTimeout)},removeQueueItem:function(a,i){i&&i.abort(),t(this).closest(\".item\").fadeOut(\"normal\",function(){t(this).remove();var a=e.$element.find(\"> .queue > .item:visible\").length;0==a&&e.$element.find(\"> .queue\").hide()}),a.preventDefault()},previewImg:function(t,e){if(t&&e.length){var a=new FileReader;a.onload=function(t){e.html('<img src=\"'+t.target.result+'\">')},a.readAsDataURL(t)}},showProgress:function(t,a,i){var n=a/i*100+\"%\";e.tools.formatFileSize(a),(a/i*100).toFixed(2)+\"%\";e.$element.find(\"#\"+t+\" > .progress > .bar\").css(\"width\",n)},getUploadedSize:function(t){return 1*localStorage.getItem(t)},saveUploadedSize:function(t,e){localStorage.setItem(t,e)},sendBlob:function(t,e,a,n){var o=new FormData;if(e.open(i.method,t,!0),e.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\"),o.append(i.fileObjName,a),n)for(var s in n)o.append(s,n[s]);e.send(o)}};return n},a.prototype.init=function(){var e=this,a=this.$element,i=this.options;if(!i.uploader)return void BJUI.debug(\"Upload Plugin: The options uploader is undefined!\");if(i.uploader=decodeURI(i.uploader).replacePlh(a.closest(\".unitBox\")),!i.uploader.isFinishedTm())return a.alertmsg(\"error\",i.warn||FRAG.alertPlhMsg.replace(\"#plhmsg#\",BJUI.regional.plhmsg)),void BJUI.debug(\"Upload Plugin: The options uploader is incorrect: \"+i.uploader);if(i.uploader=encodeURI(i.uploader),!a.hasClass(\"bjui-upload\")){i.formData&&\"string\"==typeof i.formData&&(i.formData=i.formData.toObj());var n=t(FRAG.uploadFrag.replaceAll(\"#multi#\",i.multi?\"multiple\":\"\").replaceAll(\"#accept#\",e.tools.getAcceptString(i.fileTypeExts)).replaceAll(\"#btnTxt#\",(i.icon?'<i class=\"fa fa-'+i.icon+'\">&nbsp;&nbsp;':\"\")+i.buttonText));a.addClass(\"bjui-upload\").append(n),this.$file=a.find(\"> .bjui-upload-select-file\"),this.$uploadFileList=a.find(\"> .queue\"),this.queueData={files:0,success:0,error:0},a.on(\"change.bjui.upload\",\".bjui-upload-select-file\",function(t){e.fileSelect(t)}).on(\"click.bjui.upload\",\".bjui-upload-select\",function(t){e.$file.trigger(\"click\")}),i.onInit&&i.onInit(),i.dragDrop&&(a[0].ondragover=function(t){return t.preventDefault(),!0},a[0].ondrop=function(t){e.fileSelect(t),t.stopPropagation(),t.preventDefault()})}},a.prototype.fileSelect=function(t){this.$uploadFileList.show(),this.tools.getFiles(t)},a.prototype.fileUpload=function(e,a){var i=this,n=i.$element,o=i.options,s=i.tools,r=!1,l=e;r=new XMLHttpRequest,o.breakPoints&&(e=l.slice(a,a+o.fileSplitSize)),r.upload&&(r.upload.onprogress=function(t){i.onProgress(e,t.loaded,l.size)},r.onreadystatechange=function(t){if(4==r.readyState&&200==r.status){var n=(JSON.parse(r.responseText),!1);o.breakPoints?(a+=o.fileSplitSize,s.saveUploadedSize(l.id,a),a<l.size?(e=l.slice(a,a+o.fileSplitSize),s.sendBlob(o.uploader,r,e,o.formData)):n=!0):n=!0,n&&(i.queueData.success++,s.successQueueItem(l,r),o.onUploadComplete&&o.onUploadComplete(l,r.responseText))}else i.queueData.error++,o.onUploadError&&o.onUploadError(l,r.responseText);o.onQueueComplete&&(i.queueData.files=i.queueData.success+i.queueData.error)&&option.onQueueComplete(i.queueData)},o.onUploadStart&&o.onUploadStart(),o.formData.fileName=l.name,o.formData.lastModifiedDate=l.lastModifiedDate.getTime(),s.sendBlob(o.uploader,r,e,o.formData)),n.find(\"#\"+l.id+\" > .info > .up_pause\").on(\"click.bjui.upload.pause\",function(e){r.abort(),t(this).hide().prev().show()}),n.find(\"#\"+l.id+\" > .info > .up_cancel\").off(\"click.bjui.upload.cancel\").on(\"click.bjui.upload.cancel\",t.proxy(function(t){this.tools.removeQueueItem(t,r)},this))},a.prototype.onProgress=function(t,e,a){var i=this,n=i.options,o=i.$element.find(\"#\"+t.id+\" .progress\"),s=e,r=o.attr(\"lastLoaded\")||0;e-=parseInt(r),e>t.size&&(e=t.size),i.$progressBar=o.children(\".bar\");var l=n.breakPoints?parseFloat(i.$progressBar.get(0).style.width||0):0,d=(e/a*100+l).toFixed(2),c=d>100?\"100%\":d+\"%\";if(n.showUploadedSize){var u=o.nextAll(\".filesize\");u.find(\"> .uploadedsize\").text(i.tools.formatFileSize(e))}n.showUploadedPercent&&o.nextAll(\".up_percent\").text(c),i.$progressBar.css(\"width\",c),s<n.fileSplitSize?o.attr(\"lastLoaded\",s):o.removeAttr(\"lastLoaded\")},a.prototype.destroy=function(){};var i=t.fn.upload;t.fn.upload=e,t.fn.upload.Constructor=a,t.fn.upload.noConflict=function(){return t.fn.upload=i,this},t(document).on(BJUI.eventType.initUI,function(a){var i=t(a.target).find('[data-toggle=\"upload\"]');i.length&&e.call(i)})}(jQuery),+function(t){\"use strict\";function e(e){var a=arguments,i=e;return this.each(function(){var o=t(this),s=t.extend({},n.DEFAULTS,o.data(),\"object\"==typeof e&&e),r=o.data(\"bjui.theme\");r||o.data(\"bjui.theme\",r=new n(this,s)),\"string\"==typeof i&&t.isFunction(r[i])?([].shift.apply(a),a?r[i].apply(r,a):r[i]()):r.init()})}var a,i;t(function(){var e=function(){if(a=t(\"#bjui-link-theme\"),i=t(\"#bjui-themes\"),t.cookie){var e=t.cookie(\"bjui_theme\")||\"blue\",n=i.find(\"a.theme_\"+e);n.theme({})}};e()});var n=function(e,a){this.$element=t(e),this.options=a};n.DEFAULTS={theme:\"purple\"},n.prototype.init=function(){if(a.length){var t=a.attr(\"href\");t=t.substring(0,t.lastIndexOf(\"/\")),t=t.substring(0,t.lastIndexOf(\"/\")),t+=\"/\"+this.options.theme+\"/core.css\",a.attr(\"href\",t);var e=this.$element.closest(\"ul\").prev(),n=e.attr(\"class\");n=n.replace(/(theme[\\s][a-z]*)/g,\"\"),e.removeClass().addClass(n).addClass(\"theme\").addClass(this.options.theme),i.find(\"li\").removeClass(\"active\"),this.$element.parent().addClass(\"active\"),this.cookie()}},n.prototype.setTheme=function(t){i.find(\"a.theme_\"+t).trigger(\"click\")},n.prototype.cookie=function(){var e=this.options.theme;t.cookie&&t.cookie(\"bjui_theme\",e,{path:\"/\",expires:30})};var o=t.fn.theme;t.fn.theme=e,t.fn.theme.Constructor=n,t.fn.theme.noConflict=function(){return t.fn.theme=o,this},t(document).on(\"click.bjui.theme.data-api\",'[data-toggle=\"theme\"]',function(a){e.call(t(this)),a.preventDefault()})}(jQuery),+function(t){\"use strict\";function e(e){var i=arguments,n=e;return this.each(function(){var o=t(this),s=t.extend({},a.DEFAULTS,o.data(),\"object\"==typeof e&&e),r=o.data(\"bjui.initui\");r||o.data(\"bjui.initui\",r=new a(this,s)),\"string\"==typeof n&&t.isFunction(r[n])?([].shift.apply(i),i?r[n].apply(r,i):r[n]()):r.init()})}var a=function(e,a){this.$element=t(e),this.options=a};a.DEFAULTS={},a.prototype.init=function(){var e=this,a=e.$element;t.when(e.initUI()).done(function(){a.trigger(BJUI.eventType.afterInitUI)})},a.prototype.initUI=function(){var e=this.$element;t.when(e.trigger(BJUI.eventType.beforeInitUI)).done(function(){e.trigger(BJUI.eventType.initUI)})};var i=t.fn.initui;t.fn.initui=e,t.fn.initui.Constructor=a,t.fn.initui.noConflict=function(){return t.fn.initui=i,this},t(document).on(\"click.bjui.initui.data-api\",'[data-toggle=\"initui\"]',function(t){e.call($this,$this.data()),t.preventDefault()}),t(document).on(BJUI.eventType.beforeInitUI,function(e){var a=t(e.target),i=[],n=a.find(\"[data-noinit]\");a.find(\"> .bjui-maskProgress\").find(\".progress\").stop().animate({width:\"85%\"},\"fast\"),n.each(function(e){var a=t(this),n={};n.$target=a,n.$next=a.next(),n.$prev=a.prev(),n.$parent=a.parent(),n.visible=a.is(\":visible\")?!0:!1,i.push(n),a.remove()}),a.data(\"bjui.noinit\",i)}),t(document).on(BJUI.eventType.initUI,function(e){var a=t(e.target);a.find(\"> .bjui-maskProgress\").find(\".progress\").stop().animate({width:\"95%\"},\"fast\")}),t(document).on(BJUI.eventType.afterInitUI,function(e){var a=t(e.target),i=a.data(\"bjui.noinit\"),n=a.find(\"> .bjui-pageContent\").find(\"form\");i&&t.each(i,function(t,e){e.$next.length?e.$next.before(e.$target):e.$prev.length?e.$prev.after(e.$target):e.$parent.length&&e.$parent.append(e.$target),e.visible&&e.$target.show(),a.removeData(\"bjui.noinit\")}),a.resizePageH(),n.length&&a.find(\"> .bjui-pageFooter\").find(\":submit\").on(\"click.bjui.submit\",function(t){t.preventDefault(),n.submit()}),a.find(\".bjui-maskProgress\").find(\".progress\").stop().animate({width:\"100%\"},\"fast\",function(){a.find(\".bjui-ajax-mask\").fadeOut(\"normal\",function(){t(this).remove()})})}),t(document).one(BJUI.eventType.afterInitUI,function(e){var a=t(\"#bjui-hnav-navbar\"),i=a.find(\"> li.active\");i.length&&i.find(\"> .items\").length&&i.find(\"> a\").trigger(\"click\")});var n=function(e){var a=e,i=a,n=a.css(\"position\");\"static\"==n&&(i=a.offsetParent());var o=parseInt(i.css(\"zIndex\"))||0,s=a.find(\"> .bjui-maskBackground\"),r=a.find(\"> .bjui-maskProgress\");s.length||(s=t(FRAG.maskBackground),r=t(FRAG.maskProgress.replace(\"#msg#\",BJUI.regional.progressmsg)),a.prepend(s).prepend(r));parseInt(s.css(\"zIndex\"))||0,parseInt(r.css(\"zIndex\"))||0;return s.css(\"zIndex\",o+1),r.css(\"zIndex\",o+2),{$bg:s,$pr:r}};t(document).on(\"bjui.ajaxStart\",function(e,a,i){var o=n(t(e.target));o.$bg.fadeIn(),o.$pr.fadeIn(),o.$pr.find(\".progress\").animate({width:\"80%\"},a||500),i&&setTimeout(function(){i.toFunc().call(this)},25)}).on(\"bjui.ajaxStop\",function(e){var a=n(t(e.target));a.$pr.find(\".progress\").animate({width:\"100%\"},\"fast\",function(){a.$bg.remove(),a.$pr.remove()})}).on(\"bjui.ajaxError\",function(e){var a=n(t(e.target));a.$bg.remove(),a.$pr.remove()}),t(document).on(BJUI.eventType.ajaxStatus,function(e){var a=t(e.target),i=n(a);a.one(\"ajaxStart\",function(){i.$bg.fadeIn(),i.$pr.fadeIn(),i.$pr.find(\".progress\").animate({width:\"10%\"},\"fast\")}).one(\"ajaxStop\",function(){}).one(\"ajaxError\",function(){i.$bg.remove(),i.$pr.remove()})});var o=function(t){t.find('select[data-toggle=\"selectpicker\"]').selectpicker(\"destroyMenu\"),t.find('[data-toggle=\"selectztree\"]').trigger(\"destroy.bjui.selectztree\")};t(document).on(BJUI.eventType.beforeLoadDialog,function(t){}).on(BJUI.eventType.beforeAjaxLoad,function(e){o(t(e.target))}).on(BJUI.eventType.beforeCloseNavtab,function(e){o(t(e.target))}).on(BJUI.eventType.beforeCloseDialog,function(e){o(t(e.target))}),t(function(){t(document).on(\"keydown keyup\",function(t){t.which===BJUI.keyCode.CTRL&&(BJUI.KeyPressed.ctrl=\"keydown\"==t.type?!0:!1),t.which===BJUI.keyCode.SHIFT&&(BJUI.KeyPressed.shift=\"keydown\"==t.type?!0:!1)})})}(jQuery),+function(t){\"use strict\";t(document).on(BJUI.eventType.initUI,function(e){var a=t(e.target),i=a.find('[data-toggle=\"icheck\"]');i.each(function(e){var a=t(this),i=a.attr(\"id\"),n=a.attr(\"name\"),o=a.data(\"label\");o&&a.after('<label for=\"'+i+'\" class=\"ilabel\">'+o+\"</label>\"),a.on(\"ifCreated\",function(e){var a=t(this).closest(\"div\"),o=a.next('[for=\"'+i+'\"]');a.attr(\"data-icheck\",n),o.attr(\"data-icheck\",n)}).iCheck({checkboxClass:\"icheckbox_minimal-purple\",radioClass:\"iradio_minimal-purple\",increaseArea:\"20%\"}).on(\"ifChanged\",function(){t(this).trigger(\"validate\")}),a.prop(\"disabled\")&&a.iCheck(\"disable\")}),i.filter(\".checkboxCtrl\").on(\"ifChanged\",function(e){var i=1==e.target.checked?\"check\":\"uncheck\",n=t(this).data(\"group\");a.find(':checkbox[name=\"'+n+'\"]').iCheck(i)}),a.find(\":text, :password, textarea, :button, a.btn\").each(function(){var e=t(this),a=e.closest(\"table.bjui-tabledit\");if((e.is(\":text\")||e.is(\":password\")||e.isTag(\"textarea\"))&&!e.hasClass(\"form-control\")&&e.addClass(\"form-control\"),e.is(\":button\")){var i=e.data(\"icon\"),n=(e.data(\"large\"),e.attr(\"class\"));if(e.hasClass(\"btn\")||e.removeClass().addClass(\"btn\").addClass(n),i){var o=\"fa-\"+i.replace(\"fa-\",\"\");e.data(\"bjui.icon\")||e.html('<i class=\"fa '+o+'\"></i> '+e.html()).data(\"bjui.icon\",!0)}}if(e.isTag(\"a\")){var i=e.data(\"icon\");e.data(\"large\");if(i){var o=\"fa-\"+i.replace(\"fa-\",\"\");e.data(\"bjui.icon\")||e.html('<i class=\"fa '+o+'\"></i> '+e.html()).data(\"bjui.icon\",!0)}}if(e.isTag(\"textarea\")){var s=e.data(\"toggle\");s&&\"autoheight\"==s&&t.fn.autosize&&e.addClass(\"autosize\").autosize()}if(!a.length){var r=e.attr(\"size\")||e.attr(\"cols\"),l=10*r;if(!r)return;l&&e.css(\"width\",l)}}),a.find('form[data-toggle=\"validate\"]').each(function(){var e=t(this),a=\"undefined\"==typeof e.data(\"alertmsg\")?!0:e.data(\"alertmsg\");t(this).validator({valid:function(e){t(e).bjuiajax(\"ajaxForm\",t(e).data())},validClass:\"ok\",theme:\"red_right_effect\"}).on(\"invalid.form\",function(e,i,n){a&&t(i).alertmsg(\"error\",FRAG.validateErrorMsg.replace(\"#validatemsg#\",BJUI.regional.validatemsg).replaceMsg(n.length))})}),a.find('[data-toggle=\"moresearch\"]').each(function(){var e=t(this),a=e.closest(\".bjui-pageHeader\"),i=a&&a.find(\".bjui-moreSearch\"),n=e.data(\"name\");e.attr(\"title\")||e.attr(\"title\",\"更多查询条件\"),e.click(function(o){return i.length?(i.css(\"top\",a.outerHeight()-1),i.is(\":visible\")?(e.html('<i class=\"fa fa-angle-double-down\"></i>'),n&&t(\"body\").data(\"moresearch.\"+n,!1)):(e.html('<i class=\"fa fa-angle-double-up\"></i>'),n&&t(\"body\").data(\"moresearch.\"+n,!0)),i.fadeToggle(\"slow\",\"linear\"),void o.preventDefault()):void BJUI.debug(\"Not created 'moresearch' box[class=\\\"bjui-moreSearch\\\"]!\")}),n&&t(\"body\").data(\"moresearch.\"+n)&&(i.css(\"top\",a.outerHeight()-1).fadeIn(),e.html('<i class=\"fa fa-angle-double-up\"></i>'))});var n=a.find('select[data-toggle=\"selectpicker\"]'),o=function(e,a){var i=e.data(\"refurl\"),n=function(e){var a=t(e.data(\"nextselect\"));if(a&&a.length){var i=a.data(\"emptytxt\")||\"&nbsp;\";a.html(\"<option>\"+i+\"</option>\").selectpicker(\"refresh\"),n(a)}};if(a&&a.length&&i){var o=e.data(\"val\"),s=a.data(\"val\");\"undefined\"==typeof o&&(o=e.val()),t.ajax({type:\"POST\",dataType:\"json\",url:i.replace(\"{value}\",encodeURIComponent(o)),cache:!1,data:{},success:function(i){if(i){var o=\"\",r=\"\";t.each(i,function(t){var e,a;i[t]&&i[t].length?(e=i[t][0],a=i[t][1]):(e=i[t].value,a=i[t].label),\"undefined\"!=typeof s&&(r=e==s?\" selected\":\"\"),o+='<option value=\"'+e+'\"'+r+\">\"+a+\"</option>\"}),e.removeAttr(\"data-val\").removeData(\"val\"),a.removeAttr(\"data-val\").removeData(\"val\"),o||(o=a.data(\"emptytxt\")||\"&nbsp;\",o=\"<option>\"+o+\"</option>\"),a.html(o).selectpicker(\"refresh\"),n(a)}},error:BJUI.ajaxError})}};n.each(function(){var e=t(this),a=e.data(),i=t(a.nextselect);e.addClass(\"show-tick\"),a.style||e.data(\"style\",\"btn-default\"),a.width||e.data(\"width\",\"auto\"),a.container?1==a.container&&e.attr(\"data-container\",\"false\").data(\"container\",!1):e.data(\"container\",\"body\"),e.selectpicker(),i&&i.length&&\"undefined\"!=typeof i.data(\"val\")&&o(e,i)}),n.change(function(){var e=t(this),a=t(e.data(\"nextselect\"));o(e,a),e.attr(\"aria-required\")&&e.trigger(\"validate\")}),a.find('[data-toggle=\"ztree\"]').each(function(){function e(e,a,i){if(i.faicon){var n=t(\"#\"+i.tId+\"_a\");n.data(\"faicon\")||n.data(\"faicon\",!0).addClass(\"faicon\").find(\"> span.button\").append('<i class=\"fa fa-'+i.faicon+'\"></i>')}c.onNodeCreated&&c.onNodeCreated.toFunc().call(this,e,a,i)}function a(e,a,i){i.faiconClose&&t(\"#\"+i.tId+\"_ico\").find(\"> i\").attr(\"class\",\"fa fa-\"+i.faiconClose),c.onCollapse&&c.onCollapse.toFunc().call(this,e,a,i)}function i(e,a,i){i.faicon&&i.faiconClose&&t(\"#\"+i.tId+\"_ico\").find(\"> i\").attr(\"class\",\"fa fa-\"+i.faicon),c.onExpand&&c.onExpand.toFunc().call(this,e,a,i)}function n(e,a){var i=a.level,n=t(\"#\"+a.tId+p),o=t(\"#diyBtn_add_\"+a.id),s=t(\"#diyBtn_del_\"+a.id);if(o.length||i<c.maxAddLevel&&(o=t('<span class=\"tree_add\" id=\"diyBtn_add_'+a.id+'\" title=\"添加\"></span>'),o.appendTo(n),o.on(\"click\",function(){f.addNodes(a,{name:\"新增Item\"})})),!s.length){var s=t('<span class=\"tree_del\" id=\"diyBtn_del_'+a.id+'\" title=\"删除\"></span>');s.appendTo(n).on(\"click\",function(t){var i=function(){s.alertmsg(\"confirm\",\"确认要删除 \"+a.name+\" 吗？\",{okCall:function(){if(f.removeNode(a),c.onRemove){var i=c.onRemove.toFunc();i&&i.call(this,t,e,a)}},cancelCall:function(){}})};if(c.beforeRemove){var n=c.beforeRemove.toFunc();if(n){var o=n.call(n,e,a);o&&1==o&&i()}}else i()})}}function o(e,a){var i=t(\"#diyBtn_add_\"+a.id),n=t(\"#diyBtn_del_\"+a.id);i&&i.length&&i.off(\"click\").remove(),n&&n.length&&n.off(\"click\").remove()}function s(t,e){for(var a=0;a<e.length;a++)if(e[a].drag===!1)return!1;return!0}function r(t,e,a,i){return a?a.drop!==!1:!0}var l,d=t(this),c=d.data(),u=c.options;u&&\"string\"==typeof u&&(u=u.toObj()),u&&t.extend(c,\"object\"==typeof u&&u),l=c.setting,c.nodes?(\"string\"==typeof c.nodes&&(c.nodes.trim().startsWith(\"[\")||c.nodes.trim().startsWith(\"{\")?c.nodes=c.nodes.toObj():c.nodes=c.nodes.toFunc()),\"function\"==typeof c.nodes&&(c.nodes=c.nodes.call(this)),d.removeAttr(\"data-nodes\")):(c.nodes=[],d.find(\"> li\").each(function(){var e=t(this),a=e.data();a.pid&&(a.pId=a.pid),a.name=e.html(),c.nodes.push(a)}),d.empty()),c.showRemoveBtn||(c.showRemoveBtn=!1),c.showRenameBtn||(c.showRenameBtn=!1),c.addHoverDom&&\"function\"!=typeof c.addHoverDom&&(c.addHoverDom=\"edit\"==c.addHoverDom?n:c.addHoverDom.toFunc()),c.removeHoverDom&&\"function\"!=typeof c.removeHoverDom&&(c.removeHoverDom=\"edit\"==c.removeHoverDom?o:c.removeHoverDom.toFunc()),c.maxAddLevel||(c.maxAddLevel=2);var h={view:{addHoverDom:c.addHoverDom||null,removeHoverDom:c.removeHoverDom||null,addDiyDom:c.addDiyDom?c.addDiyDom.toFunc():null},edit:{enable:c.editEnable,showRemoveBtn:c.showRemoveBtn,showRenameBtn:c.showRenameBtn},check:{enable:c.checkEnable,chkStyle:c.chkStyle,radioType:c.radioType},callback:{onClick:c.onClick?c.onClick.toFunc():null,beforeDrag:c.beforeDrag?c.beforeDrag.toFunc():s,beforeDrop:c.beforeDrop?c.beforeDrop.toFunc():r,onDrop:c.onDrop?c.onDrop.toFunc():null,onCheck:c.onCheck?c.onCheck.toFunc():null,beforeRemove:c.beforeRemove?c.beforeRemove.toFunc():null,onRemove:c.onRemove?c.onRemove.toFunc():null,onNodeCreated:e,onCollapse:a,onExpand:i},data:{simpleData:{enable:c.simpleData||!0},key:{title:c.title||\"\"}}};l&&\"string\"==typeof l&&(l=l.toObj()),l&&t.extend(!0,h,\"object\"==typeof l&&l),t.fn.zTree.init(d,h,c.nodes);var p=\"_a\",f=t.fn.zTree.getZTreeObj(d.attr(\"id\"));c.expandAll&&f.expandAll(!0)});var s=a.find('[data-toggle=\"selectztree\"]');s.each(function(){var e=t(this),a=e.data(),i=t(a.tree),n=(parseFloat(e.css(\"width\")),e.outerHeight());if(a.width=a.width||e.outerWidth(),a.height=a.height||\"auto\",i&&i.length){var o=i.attr(\"id\"),s=t(\"#\"+o+\"_select_box\"),r=function(o){var s=e.offset().top,r=e.offset().left,l=i.clone().appendTo(t(\"body\")),d=l.outerHeight();l.remove();var c=t(window).height()-d-s-n,u=t(window).height()-s-n;\"auto\"==a.height&&0>c&&(u+=c),o.css({top:s+n,left:r,\"max-height\":u})};e.click(function(){if(s&&s.length)return r(s),void s.show();var n=2,l=t.CurrentDialog;l&&l.length&&(n=l.css(\"zIndex\")+1),s=t('<div id=\"'+o+'_select_box\" class=\"tree-box\"></div>').css({position:\"absolute\",zIndex:n,\"min-width\":a.width,height:a.height,overflow:\"auto\",background:\"#FAFAFA\",border:\"1px #EEE solid\"}).hide().appendTo(t(\"body\")),i.appendTo(s).css(\"width\",\"100%\").data(\"fromObj\",e).removeClass(\"hide\").show(),r(s),s.show()}),t(\"body\").on(\"mousedown\",function(a){var i=t(a.target);e[0]==a.target||s&&s.length>0&&i.closest(\".tree-box\").length>0||s.hide()});var l=e.closest(\".bjui-pageContent\");l&&l.length&&l.scroll(function(){s&&s.length&&r(s)}),e.on(\"destroy.bjui.selectztree\",function(){s.remove()})}}),a.find('[data-toggle=\"accordion\"]').each(function(){var e=t(this),a=e.data(\"heightbox\"),i=e.data(\"height\"),n=function(a,i){var n=e.data(\"offsety\")||0,i=i||t(a).outerHeight()-1*n,o=e.find(\".panel-heading\"),s=o.outerHeight();s=(s+1)*o.length,e.css(\"height\",i),i-=s,e.find(\".panel-collapse\").find(\".panel-body\").css(\"height\",i)};e.find(\"> .panel\").length&&(a||i)&&(n(a,i),t(window).resize(function(){n(a,i)}),e.on(\"hidden.bs.collapse\",function(e){var a=t(this).find(\"> .panel:last\"),i=a.find(\"> .panel-heading > h4 > a\");i.hasClass(\"collapsed\")&&a.css(\"border-bottom\",\"1px #ddd solid\")}))}),a.find('[data-toggle=\"kindeditor\"]').each(function(){var e=t(this),a=e.data();a.items&&\"string\"==typeof a.items&&(a.items=a.items.replaceAll(\"'\",\"\").replaceAll(\" \",\"\").split(\",\")),a.afterUpload&&(a.afterUpload=a.afterUpload.toFunc()),a.afterSelectFile&&(a.afterSelectFile=a.afterSelectFile.toFunc()),a.confirmSelect&&(a.confirmSelect=a.confirmSelect.toFunc());var i={font:[],span:[\".color\",\".background-color\",\".font-size\",\".font-family\"],div:[\".margin\",\".padding\",\".text-align\"],table:[\"align\",\"width\"],\"td,th\":[\"align\",\"valign\",\"width\",\"height\",\"colspan\",\"rowspan\"],a:[\"href\",\"target\",\"name\"],embed:[\"src\",\"width\",\"height\",\"type\",\"loop\",\"autostart\",\"quality\",\".width\",\".height\",\"align\",\"allowscriptaccess\"],img:[\"src\",\"width\",\"height\",\"border\",\"alt\",\"title\",\"align\",\".width\",\".height\",\".border\"],\"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6\":[\"class\",\"align\",\".text-align\",\".color\",\".font-weight\",\".font-style\",\".text-decoration\",\".vertical-align\",\".text-indent\",\".margin-left\"],pre:[\"class\"],hr:[\"class\",\".page-break-after\"],\"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del\":[]};KindEditor.create(e,{pasteType:a.pasteType,minHeight:a.minHeight||260,autoHeightMode:a.autoHeight||!1,items:a.items||KindEditor.options.items,uploadJson:a.uploadJson,fileManagerJson:a.fileManagerJson,allowFileManager:a.allowFileManager||!0,fillDescAfterUploadImage:a.fillDescAfterUploadImage||!0,afterUpload:a.afterUpload,afterSelectFile:a.afterSelectFile,X_afterSelect:a.confirmSelect,htmlTags:i,cssPath:[BJUI.PLUGINPATH+\"kindeditor_4.1.10/editor-content.css\",BJUI.PLUGINPATH+\"kindeditor_4.1.10/plugins/code/prettify.css\"],afterBlur:function(){this.sync()}})}),a.find('[data-toggle=\"colorpicker\"]').each(function(){var e=t(this),a=e.data(\"bgcolor\");e.colorpicker(),a&&e.on(\"changeColor\",function(t){e.css(\"background-color\",t.color.toHex())})}),a.find('[data-toggle=\"clearcolor\"]').each(function(){var e=t(this),a=e.data(\"target\")?t(e.data(\"target\")):null;a&&a.length&&e.click(function(){a.val(\"\"),a.data(\"bgcolor\")&&a.css(\"background-color\",\"\")})}),a.find('[data-toggle=\"tooltip\"]').each(function(){t(this).tooltip()}),a.find('[data-toggle=\"dropdown\"]').parent().on(\"show.bs.dropdown\",function(e){var a=t(this),i=a.outerWidth(),n=a.find(\"> .dropdown-menu\"),o=n.outerWidth();i>o&&n.css(\"min-width\",i)}),a.find('form[data-toggle=\"ajaxform\"]').each(function(){t(this).validator({ignore:\":input\"}),t(this).validator(\"destroy\")});var r=a.find('[data-toggle=\"highcharts\"]');r.each(function(){var e=t(this),a=e.data();t.get(a.url,function(t){e.highcharts(t)},\"json\")});var l=a.find('[data-toggle=\"echarts\"]');l.each(function(){var e=t(this),a=e.data(),i=a.theme?a.theme:\"default\",n=a.type.split(\",\"),o=a.event,s=a.callback;s&&\"string\"==typeof s&&(s=s.toFunc()),require.config({paths:{echarts:BJUI.PLUGINPATH+\"echarts/\"}}),require([\"echarts\",\"echarts/theme/\"+i,\"echarts/chart/\"+n[0],n[1]?\"echarts/chart/\"+n[1]:\"echarts\"],function(i,n){var r=i.init(e[0],n);t.get(a.url,function(t){if(r.setOption(t),o&&s){var e=require(\"echarts/config\");r.on(e.EVENT[o],s)}},\"json\")})})})}(jQuery);"],"file":"bjui-all.min.js","sourceRoot":"/source/"}